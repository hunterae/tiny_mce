(function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(c){var a=this;a.editor=c;c.addCommand("mceVisualChars",a._toggleVisualChars,a);c.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"});c.onBeforeGetContent.add(function(){if(a.state){a.state=true;a._toggleVisualChars()}})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",
version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(){var c=this.editor,a,b,f=c.getDoc();b=c.getBody();var d;this.state=!this.state;c.controlManager.setActive("visualchars",this.state);if(this.state){a=[];tinymce.walk(b,function(e){e.nodeType==3&&e.nodeValue&&e.nodeValue.indexOf("\u00a0")!=-1&&a.push(e)},"childNodes");for(b=0;b<a.length;b++){d=a[b].nodeValue;d=d.replace(/(\u00a0+)/g,'<span class="mceItemHidden mceVisualNbsp">$1</span>');d=d.replace(/\u00a0/g,"\u00b7");
c.dom.setOuterHTML(a[b],d,f)}}else{a=tinymce.grep(c.dom.select("span",b),function(e){return c.dom.hasClass(e,"mceVisualNbsp")});for(b=0;b<a.length;b++)c.dom.setOuterHTML(a[b],a[b].innerHTML.replace(/(&middot;|\u00b7)/g,"&nbsp;"),f)}}});tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)})();
