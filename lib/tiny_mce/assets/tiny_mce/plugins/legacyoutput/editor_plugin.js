(function(b){b.onAddEditor.addToTop(function(d,g){g.settings.inline_styles=false});b.create("tinymce.plugins.LegacyOutput",{init:function(d){d.onInit.add(function(){var g=b.explode(d.settings.font_size_style_values),e=d.serializer;d.formatter.register({alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"left"}},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"center"}},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",
attributes:{align:"right"}},alignfull:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",attributes:{align:"full"}},bold:{inline:"b"},italic:{inline:"i"},underline:{inline:"u"},strikethrough:{inline:"strike"},fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(a){return b.inArray(g,a.value)+1}}},forecolor:{inline:"font",styles:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});e._setup();b.each("b,i,u,strike".split(","),
function(a){e.rules[a]||e.addRules(a)});e.rules.font||e.addRules("font[face|size|color|style]");b.each("p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img".split(","),function(a){a=e.rules[a];var f;if(a){b.each(a.attribs,function(c,h){if(h.name=="align"){f=true;return false}});f||a.attribs.push({name:"align"})}});d.onNodeChange.add(function(a,f){var c,h,j;if(c=a.dom.getParent(a.selection.getNode(),"font")){h=c.face;j=c.size}if(c=f.get("fontselect"))c.select(function(i){return i==h});if(c=f.get("fontsizeselect"))c.select(function(i){return b.inArray(g,
i.fontSize)+1==j})})})},getInfo:function(){return{longname:"LegacyOutput",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/legacyoutput",version:b.majorVersion+"."+b.minorVersion}}});b.PluginManager.add("legacyoutput",b.plugins.LegacyOutput)})(tinymce);
