(function(l){var o=/^\s*|\s*$/g,q={majorVersion:"3",minorVersion:"3.6",releaseDate:"2010-05-20",_init:function(){function g(v){if(v.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(v.src)){if(/_(src|dev)\.js/g.test(v.src))k.suffix="_src";if((r=v.src.indexOf("?"))!=-1)k.query=v.src.substring(r+1);k.baseURL=v.src.substring(0,v.src.lastIndexOf("/"));if(n&&k.baseURL.indexOf("://")==-1&&k.baseURL.indexOf("/")!==0)k.baseURL=n+k.baseURL;return k.baseURL}return null}var k=this,b=document,h=
navigator,e=h.userAgent,n,r,u;k.isOpera=l.opera&&opera.buildNumber;k.isWebKit=/WebKit/.test(e);k.isIE=!k.isWebKit&&!k.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(h.appName);k.isIE6=k.isIE&&/MSIE [56]/.test(e);k.isGecko=!k.isWebKit&&/Gecko/.test(e);k.isMac=e.indexOf("Mac")!=-1;k.isAir=/adobeair/i.test(e);k.isIDevice=/(iPad|iPhone)/.test(e);if(l.tinyMCEPreInit){k.suffix=tinyMCEPreInit.suffix;k.baseURL=tinyMCEPreInit.base;k.query=tinyMCEPreInit.query}else{k.suffix="";e=b.getElementsByTagName("base");
for(h=0;h<e.length;h++)if(u=e[h].href){if(/^https?:\/\/[^\/]+$/.test(u))u+="/";n=u?u.match(/.*\//)[0]:""}e=b.getElementsByTagName("script");for(h=0;h<e.length;h++)if(g(e[h]))return;if(b=b.getElementsByTagName("head")[0]){e=b.getElementsByTagName("script");for(h=0;h<e.length;h++)if(g(e[h]))break}}},is:function(g,k){if(!k)return g!==void 0;if(k=="array"&&g.hasOwnProperty&&g instanceof Array)return true;return typeof g==k},each:function(g,k,b){var h,e;if(!g)return 0;b=b||g;if(g.length!==void 0){h=0;
for(e=g.length;h<e;h++)if(k.call(b,g[h],h,g)===false)return 0}else for(h in g)if(g.hasOwnProperty(h))if(k.call(b,g[h],h,g)===false)return 0;return 1},map:function(g,k){var b=[];q.each(g,function(h){b.push(k(h))});return b},grep:function(g,k){var b=[];q.each(g,function(h){if(!k||k(h))b.push(h)});return b},inArray:function(g,k){var b,h;if(g){b=0;for(h=g.length;b<h;b++)if(g[b]===k)return b}return-1},extend:function(g,k){var b,h,e=arguments;b=1;for(h=e.length;b<h;b++){k=e[b];q.each(k,function(n,r){if(n!==
void 0)g[r]=n})}return g},trim:function(g){return(g?""+g:"").replace(o,"")},create:function(g,k){var b,h,e,n,r,u=0;g=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(g);e=g[3].match(/(^|\.)(\w+)$/i)[2];h=this.createNS(g[3].replace(/\.\w+$/,""));if(!h[e])if(g[2]=="static"){h[e]=k;this.onCreate&&this.onCreate(g[2],g[3],h[e])}else{if(!k[e]){k[e]=function(){};u=1}h[e]=k[e];this.extend(h[e].prototype,k);if(g[5]){b=this.resolve(g[5]).prototype;n=g[5].match(/\.(\w+)$/i)[1];r=h[e];h[e]=u?function(){return b[n].apply(this,
arguments)}:function(){this.parent=b[n];return r.apply(this,arguments)};h[e].prototype[e]=h[e];this.each(b,function(v,f){h[e].prototype[f]=b[f]});this.each(k,function(v,f){if(b[f])h[e].prototype[f]=function(){this.parent=b[f];return v.apply(this,arguments)};else if(f!=e)h[e].prototype[f]=v})}this.each(k["static"],function(v,f){h[e][f]=v});this.onCreate&&this.onCreate(g[2],g[3],h[e].prototype)}},walk:function(g,k,b,h){h=h||this;if(g){if(b)g=g[b];q.each(g,function(e,n){if(k.call(h,e,n,b)===false)return false;
q.walk(e,k,b,h)})}},createNS:function(g,k){var b,h;k=k||l;g=g.split(".");for(b=0;b<g.length;b++){h=g[b];k[h]||(k[h]={});k=k[h]}return k},resolve:function(g,k){var b,h;k=k||l;g=g.split(".");b=0;for(h=g.length;b<h;b++){k=k[g[b]];if(!k)break}return k},addUnload:function(g,k){var b=this;g={func:g,scope:k||this};if(b.unloads)b.unloads.push(g);else{var h=function(){var n=b.unloads,r,u;if(n){for(u in n)(r=n[u])&&r.func&&r.func.call(r.scope,1);if(l.detachEvent){l.detachEvent("onbeforeunload",e);l.detachEvent("onunload",
h)}else l.removeEventListener&&l.removeEventListener("unload",h,false);b.unloads=w=h=0;l.CollectGarbage&&CollectGarbage()}},e=function(){var n=document;if(n.readyState=="interactive"){var r=function(){n.detachEvent("onstop",r);h&&h();n=0};n&&n.attachEvent("onstop",r);l.setTimeout(function(){n&&n.detachEvent("onstop",r)},0)}};if(l.attachEvent){l.attachEvent("onunload",h);l.attachEvent("onbeforeunload",e)}else l.addEventListener&&l.addEventListener("unload",h,false);b.unloads=[g]}return g},removeUnload:function(g){var k=
this.unloads,b=null;q.each(k,function(h,e){if(h&&h.func==g){k.splice(e,1);b=g;return false}});return b},explode:function(g,k){return g?q.map(g.split(k||","),q.trim):g},_addVer:function(g){var k;if(!this.query)return g;k=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1)return g+k;return g.replace("#",k+"#")}};q._init();l.tinymce=l.tinyMCE=q})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(l){this.scope=l||this;this.listeners=[]},add:function(l,o){this.listeners.push({cb:l,scope:o||this.scope});return l},addToTop:function(l,o){this.listeners.unshift({cb:l,scope:o||this.scope});return l},remove:function(l){var o=this.listeners,q=null;tinymce.each(o,function(g,k){if(l==g.cb){q=l;o.splice(k,1);return false}});return q},dispatch:function(){var l,o=arguments,q,g=this.listeners;for(q=0;q<g.length;q++){l=
g[q];l=l.cb.apply(l.scope,o);if(l===false)break}return l}});
(function(){var l=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(o,q){var g=this,k;o=tinymce.trim(o);q=g.settings=q||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(o)||/^\s*#/.test(o))g.source=o;else{if(o.indexOf("/")===0&&o.indexOf("//")!==0)o=(q.base_uri?q.base_uri.protocol||"http":"http")+"://mce_host"+o;/^\w*:?\/\//.test(o)||(o=(q.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(q.base_uri.path,o));o=o.replace(/@@/g,"(mce_at)");o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);
l(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,h){var e=o[h];if(e)e=e.replace(/\(mce_at\)/g,"@@");g[b]=e});if(k=q.base_uri){if(!g.protocol)g.protocol=k.protocol;if(!g.userInfo)g.userInfo=k.userInfo;if(!g.port&&g.host=="mce_host")g.port=k.port;if(!g.host||g.host=="mce_host")g.host=k.host;g.source=""}}},setPath:function(o){o=/^(.*?)\/?(\w+)?$/.exec(o);this.path=o[0];this.directory=o[1];this.file=o[2];this.source=
"";this.getURI()},toRelative:function(o){var q;if(o==="./")return o;o=new tinymce.util.URI(o,{base_uri:this});if(o.host!="mce_host"&&this.host!=o.host&&o.host||this.port!=o.port||this.protocol!=o.protocol)return o.getURI();q=this.toRelPath(this.path,o.path);if(o.query)q+="?"+o.query;if(o.anchor)q+="#"+o.anchor;return q},toAbsolute:function(o,q){o=new tinymce.util.URI(o,{base_uri:this});return o.getURI(this.host==o.host&&this.protocol==o.protocol?q:0)},toRelPath:function(o,q){var g,k=0,b="",h,e;o=
o.substring(0,o.lastIndexOf("/"));o=o.split("/");g=q.split("/");if(o.length>=g.length){h=0;for(e=o.length;h<e;h++)if(h>=g.length||o[h]!=g[h]){k=h+1;break}}if(o.length<g.length){h=0;for(e=g.length;h<e;h++)if(h>=o.length||o[h]!=g[h]){k=h+1;break}}if(k==1)return q;h=0;for(e=o.length-(k-1);h<e;h++)b+="../";h=k-1;for(e=g.length;h<e;h++)b+=h!=k-1?"/"+g[h]:g[h];return b},toAbsPath:function(o,q){var g,k=0,b=[],h;h=/\/$/.test(q)?"/":"";o=o.split("/");q=q.split("/");l(o,function(e){e&&b.push(e)});o=b;g=q.length-
1;for(b=[];g>=0;g--)if(!(q[g].length==0||q[g]=="."))if(q[g]=="..")k++;else if(k>0)k--;else b.push(q[g]);g=o.length-k;g=g<=0?b.reverse().join("/"):o.slice(0,g).join("/")+"/"+b.reverse().join("/");if(g.indexOf("/")!==0)g="/"+g;if(h&&g.lastIndexOf("/")!==g.length-1)g+=h;return g},getURI:function(o){var q;if(!this.source||o){q="";if(!o){if(this.protocol)q+=this.protocol+"://";if(this.userInfo)q+=this.userInfo+"@";if(this.host)q+=this.host;if(this.port)q+=":"+this.port}if(this.path)q+=this.path;if(this.query)q+=
"?"+this.query;if(this.anchor)q+="#"+this.anchor;this.source=q}return this.source}})})();
(function(){var l=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(o){o=this.get(o);var q;o&&l(o.split("&"),function(g){g=g.split("=");q=q||{};q[unescape(g[0])]=unescape(g[1])});return q},setHash:function(o,q,g,k,b,h){var e="";l(q,function(n,r){e+=(!e?"":"&")+escape(r)+"="+escape(n)});this.set(o,e,g,k,b,h)},get:function(o){var q=document.cookie,g=o+"=",k;if(q){k=q.indexOf("; "+g);if(k==-1){k=q.indexOf(g);if(k!=0)return null}else k+=2;o=q.indexOf(";",k);if(o==-1)o=q.length;
return unescape(q.substring(k+g.length,o))}},set:function(o,q,g,k,b,h){document.cookie=o+"="+escape(q)+(g?"; expires="+g.toGMTString():"")+(k?"; path="+escape(k):"")+(b?"; domain="+b:"")+(h?"; secure":"")},remove:function(o,q){var g=new Date;g.setTime(g.getTime()-1E3);this.set(o,"",g,q,g)}})})();
tinymce.create("static tinymce.util.JSON",{serialize:function(l){var o,q,g=tinymce.util.JSON.serialize,k;if(l==null)return"null";k=typeof l;if(k=="string"){q="\u0008b\tt\nn\u000cf\rr\"\"''\\\\";return'"'+l.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(b,h){o=q.indexOf(h);if(o+1)return"\\"+q.charAt(o+1);b=h.charCodeAt().toString(16);return"\\u"+"0000".substring(b.length)+b})+'"'}if(k=="object"){if(l.hasOwnProperty&&l instanceof Array){o=0;for(q="[";o<l.length;o++)q+=(o>0?",":"")+g(l[o]);return q+
"]"}q="{";for(o in l)q+=typeof l[o]!="function"?(q.length>1?',"':'"')+o+'":'+g(l[o]):"";return q+"}"}return""+l},parse:function(l){try{return eval("("+l+")")}catch(o){}}});
tinymce.create("static tinymce.util.XHR",{send:function(l){function o(h){q=0;try{q=new ActiveXObject(h)}catch(e){}return q}var q,g=window,k=0;l.scope=l.scope||this;l.success_scope=l.success_scope||l.scope;l.error_scope=l.error_scope||l.scope;l.async=l.async===false?false:true;l.data=l.data||"";if(q=g.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP")){q.overrideMimeType&&q.overrideMimeType(l.content_type);q.open(l.type||(l.data?"POST":"GET"),l.url,l.async);l.content_type&&
q.setRequestHeader("Content-Type",l.content_type);q.setRequestHeader("X-Requested-With","XMLHttpRequest");q.send(l.data);var b=function(){if(!l.async||q.readyState==4||k++>1E4){if(l.success&&k<1E4&&q.status==200)l.success.call(l.success_scope,""+q.responseText,q,l);else if(l.error)l.error.call(l.error_scope,k>1E4?"TIMED_OUT":"GENERAL",q,l);q=null}else g.setTimeout(b,10)};if(!l.async)return b();g.setTimeout(b,10)}}});
(function(){var l=tinymce.extend,o=tinymce.util.JSON,q=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(g){this.settings=l({},g);this.count=0},send:function(g){var k=g.error,b=g.success;g=l(this.settings,g);g.success=function(h,e){h=o.parse(h);if(typeof h=="undefined")h={error:"JSON Parse error."};h.error?k.call(g.error_scope||g.scope,h.error,e):b.call(g.success_scope||g.scope,h.result)};g.error=function(h,e){k.call(g.error_scope||g.scope,h,e)};g.data=o.serialize({id:g.id||
"c"+this.count++,method:g.method,params:g.params});g.content_type="application/json";q.send(g)},"static":{sendRPC:function(g){return(new tinymce.util.JSONRequest).send(g)}}})})();
(function(l){function o(c){var j={},a;c=c.split(",");for(a=c.length;a>=0;a--)j[c[a]]=1;return j}var q=l.each,g=l.is,k=l.isWebKit,b=l.isIE,h=/^(H[1-6R]|P|DIV|ADDRESS|PRE|FORM|T(ABLE|BODY|HEAD|FOOT|H|R|D)|LI|OL|UL|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|MENU|ISINDEX|SAMP)$/,e=o("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),n=o("src,href,style,coords,shape"),r={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},u=/[<>&\"]/g,v=
/^([a-z0-9],?)+$/i,f=/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)(\s*\/?)>/g,d=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;l.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",
type:"type"},DOMUtils:function(c,j){var a=this;a.doc=c;a.win=window;a.files={};a.cssFlicker=false;a.counter=0;a.boxModel=!l.isIE||c.compatMode=="CSS1Compat";a.stdMode=c.documentMode===8;a.settings=j=l.extend({keep_values:false,hex_colors:1,process_html:1},j);if(l.isIE6)try{c.execCommand("BackgroundImageCache",false,true)}catch(i){a.cssFlicker=true}if(j.valid_styles){a._styles={};q(j.valid_styles,function(m,p){a._styles[p]=l.explode(m)})}l.addUnload(a.destroy,a)},getRoot:function(){var c=this.settings;
return c&&this.get(c.root_element)||this.doc.body},getViewPort:function(c){var j;c=!c?this.win:c;j=c.document;j=this.boxModel?j.documentElement:j.body;return{x:c.pageXOffset||j.scrollLeft,y:c.pageYOffset||j.scrollTop,w:c.innerWidth||j.clientWidth,h:c.innerHeight||j.clientHeight}},getRect:function(c){var j;c=this.get(c);j=this.getPos(c);c=this.getSize(c);return{x:j.x,y:j.y,w:c.w,h:c.h}},getSize:function(c){var j,a;c=this.get(c);j=this.getStyle(c,"width");a=this.getStyle(c,"height");if(j.indexOf("px")===
-1)j=0;if(a.indexOf("px")===-1)a=0;return{w:parseInt(j)||c.offsetWidth||c.clientWidth,h:parseInt(a)||c.offsetHeight||c.clientHeight}},getParent:function(c,j,a){return this.getParents(c,j,a,false)},getParents:function(c,j,a,i){var m=this,p,t=m.settings,s=[];c=m.get(c);i=i===undefined;if(t.strict_root)a=a||m.getRoot();if(g(j,"string")){p=j;j=j==="*"?function(x){return x.nodeType==1}:function(x){return m.is(x,p)}}for(;c;){if(c==a||!c.nodeType||c.nodeType===9)break;if(!j||j(c))if(i)s.push(c);else return c;
c=c.parentNode}return i?s:null},get:function(c){var j;if(c&&this.doc&&typeof c=="string"){j=c;if((c=this.doc.getElementById(c))&&c.id!==j)return this.doc.getElementsByName(j)[1]}return c},getNext:function(c,j){return this._findSib(c,j,"nextSibling")},getPrev:function(c,j){return this._findSib(c,j,"previousSibling")},select:function(c,j){return l.dom.Sizzle(c,this.get(j)||this.get(this.settings.root_element)||this.doc,[])},is:function(c,j){var a;if(c.length===undefined){if(j==="*")return c.nodeType==
1;if(v.test(j)){j=j.toLowerCase().split(/,/);c=c.nodeName.toLowerCase();for(a=j.length-1;a>=0;a--)if(j[a]==c)return true;return false}}return l.dom.Sizzle.matches(j,c.nodeType?[c]:c).length>0},add:function(c,j,a,i,m){var p=this;return this.run(c,function(t){var s;s=g(j,"string")?p.doc.createElement(j):j;p.setAttribs(s,a);if(i)i.nodeType?s.appendChild(i):p.setHTML(s,i);return!m?t.appendChild(s):s})},create:function(c,j,a){return this.add(this.doc.createElement(c),c,j,a,1)},createHTML:function(c,j,
a){var i="",m;i+="<"+c;for(m in j)if(j.hasOwnProperty(m))i+=" "+m+'="'+this.encode(j[m])+'"';if(l.is(a))return i+">"+a+"</"+c+">";return i+" />"},remove:function(c,j){return this.run(c,function(a){var i,m;i=a.parentNode;if(!i)return null;if(j)for(;m=a.firstChild;)!l.isIE||m.nodeType!==3||m.nodeValue?i.insertBefore(m,a):a.removeChild(m);return i.removeChild(a)})},setStyle:function(c,j,a){var i=this;return i.run(c,function(m){var p;p=m.style;j=j.replace(/-(\D)/g,function(t,s){return s.toUpperCase()});
if(i.pixelStyles.test(j)&&(l.is(a,"number")||/^[\-0-9\.]+$/.test(a)))a+="px";switch(j){case "opacity":if(b){p.filter=a===""?"":"alpha(opacity="+a*100+")";if(!c.currentStyle||!c.currentStyle.hasLayout)p.display="inline-block"}p[j]=p["-moz-opacity"]=p["-khtml-opacity"]=a||"";break;case "float":b?p.styleFloat=a:p.cssFloat=a;break;default:p[j]=a||""}i.settings.update_styles&&i.setAttrib(m,"_mce_style")})},getStyle:function(c,j,a){c=this.get(c);if(!c)return false;if(this.doc.defaultView&&a){j=j.replace(/[A-Z]/g,
function(m){return"-"+m});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(j)}catch(i){return null}}j=j.replace(/-(\D)/g,function(m,p){return p.toUpperCase()});if(j=="float")j=b?"styleFloat":"cssFloat";if(c.currentStyle&&a)return c.currentStyle[j];return c.style[j]},setStyles:function(c,j){var a=this,i=a.settings,m;m=i.update_styles;i.update_styles=0;q(j,function(p,t){a.setStyle(c,t,p)});i.update_styles=m;i.update_styles&&a.setAttrib(c,i.cssText)},setAttrib:function(c,j,a){var i=
this;if(c&&j){if(i.settings.strict)j=j.toLowerCase();return this.run(c,function(m){var p=i.settings;switch(j){case "style":if(!g(a,"string")){q(a,function(t,s){i.setStyle(m,s,t)});return}if(p.keep_values)a&&!i._isRes(a)?m.setAttribute("_mce_style",a,2):m.removeAttribute("_mce_style",2);m.style.cssText=a;break;case "class":m.className=a||"";break;case "src":case "href":if(p.keep_values){if(p.url_converter)a=p.url_converter.call(p.url_converter_scope||i,a,j,m);i.setAttrib(m,"_mce_"+j,a,2)}break;case "shape":m.setAttribute("_mce_style",
a)}g(a)&&a!==null&&a.length!==0?m.setAttribute(j,""+a,2):m.removeAttribute(j,2)})}},setAttribs:function(c,j){var a=this;return this.run(c,function(i){q(j,function(m,p){a.setAttrib(i,p,m)})})},getAttrib:function(c,j,a){var i;c=this.get(c);if(!c||c.nodeType!==1)return false;g(a)||(a="");if(/^(src|href|style|coords|shape)$/.test(j))if(i=c.getAttribute("_mce_"+j))return i;if(b&&this.props[j])i=(i=c[this.props[j]])&&i.nodeValue?i.nodeValue:i;i||(i=c.getAttribute(j,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(j)){if(c[this.props[j]]===
true&&i==="")return j;return i?j:""}if(c.nodeName==="FORM"&&c.getAttributeNode(j))return c.getAttributeNode(j).nodeValue;if(j==="style")if(i=i||c.style.cssText){i=this.serializeStyle(this.parseStyle(i),c.nodeName);this.settings.keep_values&&!this._isRes(i)&&c.setAttribute("_mce_style",i)}if(k&&j==="class"&&i)i=i.replace(/(apple|webkit)\-[a-z\-]+/gi,"");if(b)switch(j){case "rowspan":case "colspan":if(i===1)i="";break;case "size":if(i==="+0"||i===20||i===0)i="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":if(i===
0)i="";break;case "hspace":if(i===-1)i="";break;case "maxlength":case "tabindex":if(i===32768||i===2147483647||i==="32768")i="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(i===65535)return j;return a;case "shape":i=i.toLowerCase();break;default:if(j.indexOf("on")===0&&i)i=(""+i).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}return i!==undefined&&i!==null&&i!==""?""+i:a},getPos:function(c,j){var a=0,i=0,m=this.doc;c=this.get(c);j=j||m.body;if(c){if(b&&!this.stdMode){c=
c.getBoundingClientRect();i=this.boxModel?m.documentElement:m.body;a=this.getStyle(this.select("html")[0],"borderWidth");a=(a=="medium"||this.boxModel&&!this.isIE6)&&2||a;c.top+=this.win.self!=this.win.top?2:0;return{x:c.left+i.scrollLeft-a,y:c.top+i.scrollTop-a}}for(m=c;m&&m!=j&&m.nodeType;){a+=m.offsetLeft||0;i+=m.offsetTop||0;m=m.offsetParent}for(m=c.parentNode;m&&m!=j&&m.nodeType;){a-=m.scrollLeft||0;i-=m.scrollTop||0;m=m.parentNode}}return{x:a,y:i}},parseStyle:function(c){function j(p,t,s){var x,
F;if(x=m[p+"-top"+t]){F=m[p+"-right"+t];if(x==F){x=m[p+"-bottom"+t];if(F==x){F=m[p+"-left"+t];if(x==F){m[s]=F;delete m[p+"-top"+t];delete m[p+"-right"+t];delete m[p+"-bottom"+t];delete m[p+"-left"+t]}}}}}var a=this,i=a.settings,m={};if(!c)return m;c=c.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");q(c.split(";"),function(p){var t,s=[];if(p){p=p.replace(/_MCE_SEMI_/g,";");p=p.replace(/url\([^\)]+\)/g,function(x){s.push(x);return"url("+s.length+")"});p=p.split(":");t=l.trim(p[1]);t=t.replace(/url\(([^\)]+)\)/g,
function(x,F){return s[parseInt(F)-1]});t=t.replace(/rgb\([^\)]+\)/g,function(x){return a.toHex(x)});if(i.url_converter)t=t.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(x,F){return"url("+i.url_converter.call(i.url_converter_scope||a,a.decode(F),"style",null)+")"});m[l.trim(p[0]).toLowerCase()]=t}});j("border","","border");j("border","-width","border-width");j("border","-color","border-color");j("border","-style","border-style");j("padding","","padding");j("margin","","margin");(function(p,
t,s,x){var F;if(F=m[t])if(F=m[s])if(F=m[x]){m[p]=m[t]+" "+m[s]+" "+m[x];delete m[t];delete m[s];delete m[x]}})("border","border-width","border-style","border-color");if(b)if(m.border=="medium none")m.border="";return m},serializeStyle:function(c,j){function a(m,p){if(p&&m)if(p.indexOf("-")!==0){switch(p){case "font-weight":if(m==700)m="bold";break;case "color":case "background-color":m=m.toLowerCase()}i+=(i?" ":"")+p+": "+m+";"}}var i="";if(j&&this._styles){q(this._styles["*"],function(m){a(c[m],
m)});q(this._styles[j.toLowerCase()],function(m){a(c[m],m)})}else q(c,a);return i},loadCSS:function(c){var j=this,a=j.doc,i;c||(c="");i=j.select("head")[0];q(c.split(","),function(m){var p;if(!j.files[m]){j.files[m]=true;p=j.create("link",{rel:"stylesheet",href:l._addVer(m)});if(b&&a.documentMode)p.onload=function(){a.recalc();p.onload=null};i.appendChild(p)}})},addClass:function(c,j){return this.run(c,function(a){var i;if(!j)return 0;if(this.hasClass(a,j))return a.className;i=this.removeClass(a,
j);return a.className=(i!=""?i+" ":"")+j})},removeClass:function(c,j){var a=this,i;return a.run(c,function(m){var p;if(a.hasClass(m,j)){i||(i=RegExp("(^|\\s+)"+j+"(\\s+|$)","g"));p=m.className.replace(i," ");p=l.trim(p!=" "?p:"");m.className=p;if(!p){m.removeAttribute("class");m.removeAttribute("className")}return p}return m.className})},hasClass:function(c,j){c=this.get(c);if(!c||!j)return false;return(" "+c.className+" ").indexOf(" "+j+" ")!==-1},show:function(c){return this.setStyle(c,"display",
"block")},hide:function(c){return this.setStyle(c,"display","none")},isHidden:function(c){c=this.get(c);return!c||c.style.display=="none"||this.getStyle(c,"display")=="none"},uniqueId:function(c){return(!c?"mce_":c)+this.counter++},setHTML:function(c,j){var a=this;return this.run(c,function(i){var m,p,t,s,x;j=a.processHTML(j);if(b){var F=function(){for(;i.firstChild;)i.firstChild.removeNode();try{i.innerHTML="<br />"+j;i.removeChild(i.firstChild)}catch(y){m=a.create("div");m.innerHTML="<br />"+j;
q(m.childNodes,function(z,M){M&&i.appendChild(z)})}};if(a.settings.fix_ie_paragraphs)j=j.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 _mce_keep="true">&nbsp;</p>');F();if(a.settings.fix_ie_paragraphs){t=i.getElementsByTagName("p");p=t.length-1;for(m=0;p>=0;p--){s=t[p];if(!s.hasChildNodes()){if(!s._mce_keep){m=1;break}s.removeAttribute("_mce_keep")}}}if(m){j=j.replace(/<p ([^>]+)>|<p>/ig,'<div $1 _mce_tmp="1">');j=j.replace(/<\/p>/gi,"</div>");F();if(a.settings.fix_ie_paragraphs){t=i.getElementsByTagName("DIV");
for(p=t.length-1;p>=0;p--){s=t[p];if(s._mce_tmp){x=a.doc.createElement("p");s.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(y,z){var M;if(z!=="_mce_tmp"){M=s.getAttribute(z);if(!M&&z==="class")M=s.className;x.setAttribute(z,M)}});for(m=0;m<s.childNodes.length;m++)x.appendChild(s.childNodes[m].cloneNode(true));s.swapNode(x)}}}}}else i.innerHTML=j;return j})},processHTML:function(c){var j=this,a=j.settings,i=[];if(!a.process_html)return c;if(b){c=c.replace(/&apos;/g,"&#39;");c=c.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,
"")}c=c.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(a.keep_values){if(/<script|noscript|style/i.test(c)){var m=function(p){p=p.replace(/(<!--\[CDATA\[|\]\]--\>)/g,"\n");p=p.replace(/^[\r\n]*|[\r\n]*$/g,"");p=p.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");return p=p.replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,"")};c=c.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(p,t,s){t||(t=' type="text/javascript"');t=t.replace(/src=\"([^\"]+)\"?/i,
function(x,F){if(a.url_converter)F=j.encode(a.url_converter.call(a.url_converter_scope||j,j.decode(F),"src","script"));return'_mce_src="'+F+'"'});if(l.trim(s)){i.push(m(s));s="<!--\nMCE_SCRIPT:"+(i.length-1)+"\n// --\>"}return"<mce:script"+t+">"+s+"</mce:script>"});c=c.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(p,t,s){if(s){i.push(m(s));s="<!--\nMCE_SCRIPT:"+(i.length-1)+"\n--\>"}return"<mce:style"+t+">"+s+"</mce:style><style "+t+' _mce_bogus="1">'+s+"</style>"});c=c.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,
function(p,t,s){return"<mce:noscript"+t+"><!--"+j.encode(s).replace(/--/g,"&#45;&#45;")+"--\></mce:noscript>"})}c=c.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]--\>");c=function(p){return p.replace(f,function(t,s,x,F){return"<"+s+x.replace(d,function(y,z,M,X,C){z=z.toLowerCase();M=M||X||C||"";if(e[z]){if(M==="false"||M==="0")return;return z+'="'+z+'"'}if(n[z]&&x.indexOf("_mce_"+z)==-1){y=j.decode(M);if(a.url_converter&&(z=="src"||z=="href"))y=a.url_converter.call(a.url_converter_scope||j,
y,z,s);if(z=="style")y=j.serializeStyle(j.parseStyle(y),z);return z+'="'+M+'" _mce_'+z+'="'+j.encode(y)+'"'}return y})+F+">"})}(c);c=c.replace(/MCE_SCRIPT:([0-9]+)/g,function(p,t){return i[t]})}return c},getOuterHTML:function(c){var j;c=this.get(c);if(!c)return null;if(c.outerHTML!==undefined)return c.outerHTML;j=(c.ownerDocument||this.doc).createElement("body");j.appendChild(c.cloneNode(true));return j.innerHTML},setOuterHTML:function(c,j,a){function i(p,t,s){s=s.createElement("body");s.innerHTML=
t;for(t=s.lastChild;t;){m.insertAfter(t.cloneNode(true),p);t=t.previousSibling}m.remove(p)}var m=this;return this.run(c,function(p){p=m.get(p);if(p.nodeType==1){a=a||p.ownerDocument||m.doc;if(b)try{if(b&&p.nodeType==1)p.outerHTML=j;else i(p,j,a)}catch(t){i(p,j,a)}else i(p,j,a)}})},decode:function(c){var j,a;if(/&[\w#]+;/.test(c)){j=this.doc.createElement("div");j.innerHTML=c;j=j.firstChild;a="";if(j){do a+=j.nodeValue;while(j=j.nextSibling)}return a||c}return c},encode:function(c){return(""+c).replace(u,
function(j){return r[j]})},insertAfter:function(c,j){j=this.get(j);return this.run(c,function(a){var i,m;i=j.parentNode;(m=j.nextSibling)?i.insertBefore(a,m):i.appendChild(a);return a})},isBlock:function(c){if(c.nodeType&&c.nodeType!==1)return false;c=c.nodeName||c;return h.test(c)},replace:function(c,j,a){if(g(j,"array"))c=c.cloneNode(true);return this.run(j,function(i){a&&q(l.grep(i.childNodes),function(m){c.appendChild(m)});return i.parentNode.replaceChild(c,i)})},rename:function(c,j){var a=this,
i;if(c.nodeName!=j.toUpperCase()){i=a.create(j);q(a.getAttribs(c),function(m){a.setAttrib(i,m.nodeName,a.getAttrib(c,m.nodeName))});a.replace(i,c,1)}return i||c},findCommonAncestor:function(c,j){for(var a=c,i;a;){for(i=j;i&&a!=i;)i=i.parentNode;if(a==i)break;a=a.parentNode}if(!a&&c.ownerDocument)return c.ownerDocument.documentElement;return a},toHex:function(c){function j(i){i=parseInt(i).toString(16);return i.length>1?i:"0"+i}var a=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);
if(a)return c="#"+j(a[1])+j(a[2])+j(a[3]);return c},getClasses:function(){function c(t){q(t.imports,function(s){c(s)});q(t.cssRules||t.rules,function(s){switch(s.type||1){case 1:s.selectorText&&q(s.selectorText.split(","),function(x){x=x.replace(/^\s*|\s*$|^\s\./g,"");if(!(/\.mce/.test(x)||!/\.[\w\-]+$/.test(x))){m=x;x=x.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(!(i&&!(x=i(x,m))))if(!a[x]){j.push({"class":x});a[x]=1}}});break;case 3:c(s.styleSheet)}})}var j=[],a={},i=this.settings.class_filter,m;if(this.classes)return this.classes;
try{q(this.doc.styleSheets,c)}catch(p){}if(j.length>0)this.classes=j;return j},run:function(c,j,a){var i=this,m;if(i.doc&&typeof c==="string")c=i.get(c);if(!c)return false;a=a||this;if(!c.nodeType&&(c.length||c.length===0)){m=[];q(c,function(p,t){if(p){if(typeof p=="string")p=i.doc.getElementById(p);m.push(j.call(a,p,t))}});return m}return j.call(a,c)},getAttribs:function(c){var j;c=this.get(c);if(!c)return[];if(b){j=[];if(c.nodeName=="OBJECT")return c.attributes;c.nodeName==="OPTION"&&this.getAttrib(c,
"selected")&&j.push({specified:1,nodeName:"selected"});c.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){j.push({specified:1,nodeName:a})});return j}return c.attributes},destroy:function(c){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;c||l.removeUnload(this.destroy)},createRng:function(){var c=this.doc;return c.createRange?c.createRange():new l.dom.Range(this)},nodeIndex:function(c,j){var a=
0,i,m;if(c){i=c.nodeType;for(c=c.previousSibling;c;c=c.previousSibling){m=c.nodeType;if(j&&m==3)if(m==i||!c.nodeValue.length)continue;a++;i=m}}return a},split:function(c,j,a){function i(x){var F,y=x.childNodes;if(!(x.nodeType==1&&x.getAttribute("_mce_type")=="bookmark")){for(F=y.length-1;F>=0;F--)i(y[F]);if(x.nodeType!=9){if(x.nodeType==3&&x.nodeValue.length>0)return;if(x.nodeType==1){y=x.childNodes;y.length==1&&y[0]&&y[0].nodeType==1&&y[0].getAttribute("_mce_type")=="bookmark"&&x.parentNode.insertBefore(y[0],
x);if(y.length||/^(br|hr|input|img)$/i.test(x.nodeName))return}m.remove(x)}return x}}var m=this,p=m.createRng(),t,s;if(c&&j){p.setStart(c.parentNode,m.nodeIndex(c));p.setEnd(j.parentNode,m.nodeIndex(j));t=p.extractContents();p=m.createRng();p.setStart(j.parentNode,m.nodeIndex(j)+1);p.setEnd(c.parentNode,m.nodeIndex(c)+1);p=p.extractContents();s=c.parentNode;s.insertBefore(i(t),c);a?s.replaceChild(a,j):s.insertBefore(j,c);s.insertBefore(i(p),c);m.remove(c);return a||j}},bind:function(c,j,a,i){if(!this.events)this.events=
new l.dom.EventUtils;return this.events.add(c,j,a,i||this)},unbind:function(c,j,a){if(!this.events)this.events=new l.dom.EventUtils;return this.events.remove(c,j,a)},_findSib:function(c,j,a){var i=this,m=j;if(c){if(g(m,"string"))m=function(p){return i.is(p,j)};for(c=c[a];c;c=c[a])if(m(c))return c}return null},_isRes:function(c){return/^(top|left|bottom|right|width|height)/i.test(c)||/;\s*(top|left|bottom|right|width|height)/i.test(c)}});l.DOM=new l.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(l){function o(q){function g(C,D){r(t,C,D)}function k(C,D){r(s,C,D)}function b(C){g(C.parentNode,X(C))}function h(C){k(C.parentNode,X(C)+1)}function e(C,D){var B;if(C.nodeType==3)return C;if(D<0)return C;for(B=C.firstChild;B&&D>0;){--D;B=B.nextSibling}if(B)return B;return C}function n(C,D,B,K){var H,W;if(C==B){if(D==K)return 0;if(D<K)return-1;return 1}for(H=B;H&&H.parentNode!=C;)H=H.parentNode;if(H){W=0;for(B=C.firstChild;B!=H&&W<D;){W++;B=B.nextSibling}if(D<=W)return-1;return 1}for(H=C;H&&
H.parentNode!=B;)H=H.parentNode;if(H){W=0;for(B=B.firstChild;B!=H&&W<K;){W++;B=B.nextSibling}if(W<K)return-1;return 1}D=q.findCommonAncestor(C,B);for(C=C;C&&C.parentNode!=D;)C=C.parentNode;C||(C=D);for(K=B;K&&K.parentNode!=D;)K=K.parentNode;K||(K=D);if(C==K)return 0;for(B=D.firstChild;B;){if(B==C)return-1;if(B==K)return 1;B=B.nextSibling}}function r(C,D,B){if(C){a[F]=D;a[x]=B}else{a[y]=D;a[z]=B}for(D=a[y];D.parentNode;)D=D.parentNode;for(B=a[F];B.parentNode;)B=B.parentNode;if(B==D)n(a[F],a[x],a[y],
a[z])>0&&a.collapse(C);else a.collapse(C);a.collapsed=a[F]==a[y]&&a[x]==a[z];a.commonAncestorContainer=q.findCommonAncestor(a[F],a[y])}function u(C){var D,B=0,K=0,H;if(a[F]==a[y])return v(C);D=a[y];for(H=D.parentNode;H;D=H,H=H.parentNode){if(H==a[F]){var W=D;C=C;D=void 0;H=void 0;B=void 0;K=void 0;H=void 0;if(C!=p)D=i.createDocumentFragment();H=f(W,C);D&&D.appendChild(H);B=X(W)-a[x];if(!(B<=0))for(H=W.previousSibling;B>0;){K=H.previousSibling;H=j(H,C);D&&D.insertBefore(H,D.firstChild);--B;H=K}if(C!=
m){a.setEndBefore(W);a.collapse(s)}C=D;return C}++B}D=a[F];for(H=D.parentNode;H;D=H,H=H.parentNode){if(H==a[y]){W=D;C=C;D=void 0;B=void 0;H=void 0;B=void 0;K=void 0;H=void 0;if(C!=p)D=i.createDocumentFragment();H=d(W,C);D&&D.appendChild(H);B=X(W);++B;B=a[z]-B;for(H=W.nextSibling;B>0;){K=H.nextSibling;H=j(H,C);D&&D.appendChild(H);--B;H=K}if(C!=m){a.setStartAfter(W);a.collapse(t)}return D}++K}K=K-B;for(D=a[F];K>0;){D=D.parentNode;K--}for(B=a[y];K<0;){B=B.parentNode;K++}K=D.parentNode;for(H=B.parentNode;K!=
H;K=K.parentNode,H=H.parentNode){D=K;B=H}D=D;B=B;var V;if(C!=p)W=i.createDocumentFragment();V=d(D,C);W&&W.appendChild(V);K=X(D);H=X(B);++K;K=H-K;for(V=D.nextSibling;K>0;){H=V.nextSibling;V=j(V,C);W&&W.appendChild(V);V=H;--K}V=f(B,C);W&&W.appendChild(V);if(C!=m){a.setStartAfter(D);a.collapse(t)}return W}function v(C){var D,B,K,H;if(C!=p)D=i.createDocumentFragment();if(a[x]==a[z])return D;if(a[F].nodeType==3){B=a[F].nodeValue;B=B.substring(a[x],a[z]);if(C!=m){a[F].deleteData(a[x],a[z]-a[x]);a.collapse(t)}if(C==
p)return;D.appendChild(i.createTextNode(B));return D}K=e(a[F],a[x]);for(B=a[z]-a[x];B>0;){H=K.nextSibling;K=j(K,C);D&&D.appendChild(K);--B;K=H}C!=m&&a.collapse(t);return D}function f(C,D){var B=e(a[y],a[z]-1),K,H,W,V=B!=a[y];if(B==C)return c(B,V,s,D);K=B.parentNode;for(H=c(K,s,s,D);K;){for(;B;){W=B.previousSibling;B=c(B,V,s,D);D!=p&&H.insertBefore(B,H.firstChild);V=t;B=W}if(K==C)return H;B=K.previousSibling;K=K.parentNode;W=c(K,s,s,D);D!=p&&W.appendChild(H);H=W}}function d(C,D){var B=e(a[F],a[x]),
K=B!=a[F],H,W,V;if(B==C)return c(B,K,t,D);H=B.parentNode;for(W=c(H,s,t,D);H;){for(;B;){V=B.nextSibling;B=c(B,K,t,D);D!=p&&W.appendChild(B);K=t;B=V}if(H==C)return W;B=H.nextSibling;H=H.parentNode;V=c(H,s,t,D);D!=p&&V.appendChild(W);W=V}}function c(C,D,B,K){var H;if(D)return j(C,K);if(C.nodeType==3){D=C.nodeValue;if(B){H=a[x];B=D.substring(H);D=D.substring(0,H)}else{H=a[z];B=D.substring(0,H);D=D.substring(H)}if(K!=m)C.nodeValue=D;if(K==p)return;C=C.cloneNode(s);C.nodeValue=B;return C}if(K!=p)return C.cloneNode(s)}
function j(C,D){if(D!=p)return D==m?C.cloneNode(t):C;C.parentNode.removeChild(C)}var a=this,i=q.doc,m=1,p=2,t=true,s=false,x="startOffset",F="startContainer",y="endContainer",z="endOffset",M=tinymce.extend,X=q.nodeIndex;M(a,{startContainer:i,startOffset:0,endContainer:i,endOffset:0,collapsed:t,commonAncestorContainer:i,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:g,setEnd:k,setStartBefore:b,setStartAfter:function(C){g(C.parentNode,X(C)+1)},setEndBefore:function(C){k(C.parentNode,
X(C))},setEndAfter:h,collapse:function(C){if(C){a[y]=a[F];a[z]=a[x]}else{a[F]=a[y];a[x]=a[z]}a.collapsed=t},selectNode:function(C){b(C);h(C)},selectNodeContents:function(C){g(C,0);k(C,C.nodeType===1?C.childNodes.length:C.nodeValue.length)},compareBoundaryPoints:function(C){var D=a[F],B=a[x],K=a[y],H=a[z];if(C===0)return n(D,B,D,B);if(C===1)return n(D,B,K,H);if(C===2)return n(K,H,K,H);if(C===3)return n(K,H,D,B)},deleteContents:function(){u(p)},extractContents:function(){return u(0)},cloneContents:function(){return u(m)},
insertNode:function(C){var D=this[F],B=this[x],K;if((D.nodeType===3||D.nodeType===4)&&D.nodeValue)if(B)if(B>=D.nodeValue.length)q.insertAfter(C,D);else{B=D.splitText(B);D.parentNode.insertBefore(C,B)}else D.parentNode.insertBefore(C,D);else{if(D.childNodes.length>0)K=D.childNodes[B];K?D.insertBefore(C,K):D.appendChild(C)}},surroundContents:function(C){var D=a.extractContents();a.insertNode(C);C.appendChild(D);a.selectNode(C)},cloneRange:function(){return M(new o(q),{startContainer:a[F],startOffset:a[x],
endContainer:a[y],endOffset:a[z],collapsed:a.collapsed,commonAncestorContainer:a.commonAncestorContainer})}})}l.Range=o})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(l){function o(){function b(r){var u,v,f,d=0,c,j,a,i;f=h.duplicate();f.collapse(r);u=k.create("a");a=f.parentElement();a.appendChild(u);f.moveToElementText(u);i=h.compareEndPoints(r?"StartToStart":"EndToEnd",f);if(i>0){e[r?"setStartAfter":"setEndAfter"](a);k.remove(u)}else{v=tinymce.grep(a.childNodes);for(c=v.length-1;d<=c;){j=Math.floor((d+c)/2);a.insertBefore(u,v[j]);f.moveToElementText(u);i=h.compareEndPoints(r?"StartToStart":"EndToEnd",f);if(i>
0)d=j+1;else if(i<0)c=j-1;else{found=true;break}}v=i>0||j==0?u.nextSibling:u.previousSibling;if(v.nodeType==1){k.remove(u);f=k.nodeIndex(v);v=v.parentNode;if(!r||j>0)f++}else{if(i>0||j==0){f.setEndPoint(r?"StartToStart":"EndToEnd",h);f=f.text.length}else{f.setEndPoint(r?"StartToStart":"EndToEnd",h);f=v.nodeValue.length-f.text.length}k.remove(u)}e[r?"setStart":"setEnd"](v,f)}}var h=l.getRng(),e=k.createRng(),n;n=h.item?h.item(0):h.parentElement();if(n.ownerDocument!=k.doc)return e;if(h.item||!n.hasChildNodes()){e.setStart(n.parentNode,
k.nodeIndex(n));e.setEnd(e.startContainer,e.startOffset+1);return e}n=l.isCollapsed();b(true);n||b();return e}var q,g,k=l.dom;this.addRange=function(b){var h,e,n=l.dom.doc;e=n.body;var r,u,v,f,d,c;this.destroy();r=b.startContainer;u=b.startOffset;v=b.endContainer;f=b.endOffset;e.createTextRange();if(r==n||v==n){h=e.createTextRange();h.collapse();h.select()}else{if(r.nodeType==1&&r.hasChildNodes()){h=r.childNodes.length-1;if(u>h){d=1;r=r.childNodes[h]}else r=r.childNodes[u];if(r.nodeType==3)u=0}if(v.nodeType==
1&&v.hasChildNodes()){h=v.childNodes.length-1;if(f==0){c=1;v=v.childNodes[0]}else{v=v.childNodes[Math.min(h,f-1)];if(v.nodeType==3)f=v.nodeValue.length}}if(r==v&&r.nodeType==1){if(/^(IMG|TABLE)$/.test(r.nodeName)&&u!=f){h=e.createControlRange();h.addElement(r)}else{h=e.createTextRange();if(!r.hasChildNodes()&&r.canHaveHTML)r.innerHTML="\ufeff";h.moveToElementText(r);if(r.innerHTML=="\ufeff"){h.collapse(true);r.removeChild(r.firstChild)}}u==f&&h.collapse(f<=b.endContainer.childNodes.length-1);h.select();
h.scrollIntoView()}else{h=e.createTextRange();b=n.createElement("span");b.innerHTML=" ";if(r.nodeType==3){d?k.insertAfter(b,r):r.parentNode.insertBefore(b,r);h.moveToElementText(b);b.parentNode.removeChild(b);h.move("character",u)}else{h.moveToElementText(r);d&&h.collapse(false)}if(r==v&&r.nodeType==3)try{h.moveEnd("character",f-u);h.select();h.scrollIntoView()}catch(j){}else{e=e.createTextRange();if(v.nodeType==3){v.parentNode.insertBefore(b,v);e.moveToElementText(b);b.parentNode.removeChild(b);
e.move("character",f);h.setEndPoint("EndToStart",e)}else{e.moveToElementText(v);e.collapse(!!c);h.setEndPoint("EndToEnd",e)}h.select();h.scrollIntoView()}}}};this.getRangeAt=function(){if(!q||!tinymce.dom.RangeUtils.compareRanges(g,l.getRng())){q=o();g=l.getRng()}return q};this.destroy=function(){g=q=null};l.dom.boxModel&&function(){function b(f,d){var c=r.createTextRange();try{c.moveToPoint(f,d)}catch(j){c=null}return c}function h(f){if(f.button){if(f=b(f.x,f.y)){f.compareEndPoints("StartToStart",
v)>0?f.setEndPoint("StartToStart",v):f.setEndPoint("EndToEnd",v);f.select()}}else e()}function e(){k.unbind(n,"mouseup",e);k.unbind(n,"mousemove",h);u=0}var n=k.doc,r=n.body,u,v;n.documentElement.unselectable=true;k.bind(n,"mousedown",function(f){if(f.target.nodeName==="HTML"){u&&e();u=1;if(v=b(f.x,f.y)){k.bind(n,"mouseup",e);k.bind(n,"mousemove",h);v.select()}}})}()}})();
(function(){function l(a,i,m,p,t,s){t=a=="previousSibling"&&!s;for(var x=0,F=p.length;x<F;x++){var y=p[x];if(y){if(t&&y.nodeType===1){y.sizcache=m;y.sizset=x}y=y[a];for(var z=false;y;){if(y.sizcache===m){z=p[y.sizset];break}if(y.nodeType===1&&!s){y.sizcache=m;y.sizset=x}if(y.nodeName===i){z=y;break}y=y[a]}p[x]=z}}}function o(a,i,m,p,t,s){t=a=="previousSibling"&&!s;for(var x=0,F=p.length;x<F;x++){var y=p[x];if(y){if(t&&y.nodeType===1){y.sizcache=m;y.sizset=x}y=y[a];for(var z=false;y;){if(y.sizcache===
m){z=p[y.sizset];break}if(y.nodeType===1){if(!s){y.sizcache=m;y.sizset=x}if(typeof i!=="string"){if(y===i){z=true;break}}else if(h.filter(i,[y]).length>0){z=y;break}}y=y[a]}p[x]=z}}}var q=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,g=0,k=Object.prototype.toString,b=false,h=function(a,i,m,p){m=m||[];var t=i=i||document;if(i.nodeType!==1&&i.nodeType!==9)return[];if(!a||typeof a!=="string")return m;var s=[],x,F,y,z,M=true,X=c(i);
for(q.lastIndex=0;(x=q.exec(a))!==null;){s.push(x[1]);if(x[2]){z=RegExp.rightContext;break}}if(s.length>1&&n.exec(a))if(s.length===2&&e.relative[s[0]])F=j(s[0]+s[1],i);else for(F=e.relative[s[0]]?[i]:h(s.shift(),i);s.length;){a=s.shift();if(e.relative[a])a+=s.shift();F=j(a,F)}else{if(!p&&s.length>1&&i.nodeType===9&&!X&&e.match.ID.test(s[0])&&!e.match.ID.test(s[s.length-1])){x=h.find(s.shift(),i,X);i=x.expr?h.filter(x.expr,x.set)[0]:x.set[0]}if(i){x=p?{expr:s.pop(),set:u(p)}:h.find(s.pop(),s.length===
1&&(s[0]==="~"||s[0]==="+")&&i.parentNode?i.parentNode:i,X);F=x.expr?h.filter(x.expr,x.set):x.set;if(s.length>0)y=u(F);else M=false;for(;s.length;){var C=s.pop();x=C;if(e.relative[C])x=s.pop();else C="";if(x==null)x=i;e.relative[C](y,x,X)}}else y=[]}y||(y=F);if(!y)throw"Syntax error, unrecognized expression: "+(C||a);if(k.call(y)==="[object Array]")if(M)if(i&&i.nodeType===1)for(a=0;y[a]!=null;a++){if(y[a]&&(y[a]===true||y[a].nodeType===1&&d(i,y[a])))m.push(F[a])}else for(a=0;y[a]!=null;a++)y[a]&&
y[a].nodeType===1&&m.push(F[a]);else m.push.apply(m,y);else u(y,m);if(z){h(z,t,m,p);h.uniqueSort(m)}return m};h.uniqueSort=function(a){if(f){b=false;a.sort(f);if(b)for(var i=1;i<a.length;i++)a[i]===a[i-1]&&a.splice(i--,1)}};h.matches=function(a,i){return h(a,null,null,i)};h.find=function(a,i,m){var p,t;if(!a)return[];for(var s=0,x=e.order.length;s<x;s++){var F=e.order[s];if(t=e.match[F].exec(a)){var y=RegExp.leftContext;if(y.substr(y.length-1)!=="\\"){t[1]=(t[1]||"").replace(/\\/g,"");p=e.find[F](t,
i,m);if(p!=null){a=a.replace(e.match[F],"");break}}}}p||(p=i.getElementsByTagName("*"));return{set:p,expr:a}};h.filter=function(a,i,m,p){for(var t=a,s=[],x=i,F,y,z=i&&i[0]&&c(i[0]);a&&i.length;){for(var M in e.filter)if((F=e.match[M].exec(a))!=null){var X=e.filter[M],C,D;y=false;if(x==s)s=[];if(e.preFilter[M])if(F=e.preFilter[M](F,x,m,s,p,z)){if(F===true)continue}else y=C=true;if(F)for(var B=0;(D=x[B])!=null;B++)if(D){C=X(D,F,B,x);var K=p^!!C;if(m&&C!=null)if(K)y=true;else x[B]=false;else if(K){s.push(D);
y=true}}if(C!==undefined){m||(x=s);a=a.replace(e.match[M],"");if(!y)return[];break}}if(a==t)if(y==null)throw"Syntax error, unrecognized expression: "+a;else break;t=a}return x};var e=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,i,m){var p=typeof i==="string",t=p&&!/\W/.test(i);p=p&&!t;if(t&&!m)i=i.toUpperCase();m=0;t=a.length;for(var s;m<t;m++)if(s=a[m]){for(;(s=s.previousSibling)&&s.nodeType!==1;);a[m]=p||s&&s.nodeName===i?s||false:s===i}p&&
h.filter(i,a,true)},">":function(a,i,m){var p=typeof i==="string";if(p&&!/\W/.test(i)){i=m?i:i.toUpperCase();m=0;for(var t=a.length;m<t;m++){var s=a[m];if(s){p=s.parentNode;a[m]=p.nodeName===i?p:false}}}else{m=0;for(t=a.length;m<t;m++)if(s=a[m])a[m]=p?s.parentNode:s.parentNode===i;p&&h.filter(i,a,true)}},"":function(a,i,m){var p=g++,t=o;if(!i.match(/\W/)){var s=i=m?i:i.toUpperCase();t=l}t("parentNode",i,p,a,s,m)},"~":function(a,i,m){var p=g++,t=o;if(typeof i==="string"&&!i.match(/\W/)){var s=i=m?
i:i.toUpperCase();t=l}t("previousSibling",i,p,a,s,m)}},find:{ID:function(a,i,m){if(typeof i.getElementById!=="undefined"&&!m)return(a=i.getElementById(a[1]))?[a]:[]},NAME:function(a,i){if(typeof i.getElementsByName!=="undefined"){for(var m=[],p=i.getElementsByName(a[1]),t=0,s=p.length;t<s;t++)p[t].getAttribute("name")===a[1]&&m.push(p[t]);return m.length===0?null:m}},TAG:function(a,i){return i.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,i,m,p,t,s){a=" "+a[1].replace(/\\/g,"")+" ";if(s)return a;
s=0;for(var x;(x=i[s])!=null;s++)if(x)if(t^(x.className&&(" "+x.className+" ").indexOf(a)>=0))m||p.push(x);else if(m)i[s]=false;return false},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,i){for(var m=0;i[m]===false;m++);return i[m]&&c(i[m])?a[1]:a[1].toUpperCase()},CHILD:function(a){if(a[1]=="nth"){var i=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]=="even"&&"2n"||a[2]=="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=i[1]+(i[2]||1)-0;a[3]=i[3]-0}a[0]=g++;return a},ATTR:function(a,i,
m,p,t,s){i=a[1].replace(/\\/g,"");if(!s&&e.attrMap[i])a[1]=e.attrMap[i];if(a[2]==="~=")a[4]=" "+a[4]+" ";return a},PSEUDO:function(a,i,m,p,t){if(a[1]==="not")if(a[3].match(q).length>1||/^\w/.test(a[3]))a[3]=h(a[3],null,null,i);else{a=h.filter(a[3],i,m,true^t);m||p.push.apply(p,a);return false}else if(e.match.POS.test(a[0])||e.match.CHILD.test(a[0]))return true;return a},POS:function(a){a.unshift(true);return a}},filters:{enabled:function(a){return a.disabled===false&&a.type!=="hidden"},disabled:function(a){return a.disabled===
true},checked:function(a){return a.checked===true},selected:function(a){return a.selected===true},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,i,m){return!!h(m[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===
a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toUpperCase()==="BUTTON"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,i){return i===0},last:function(a,i,m,p){return i===p.length-1},even:function(a,i){return i%2===0},odd:function(a,i){return i%2===1},lt:function(a,i,m){return i<m[3]-0},gt:function(a,i,m){return i>m[3]-0},nth:function(a,i,m){return m[3]-
0==i},eq:function(a,i,m){return m[3]-0==i}},filter:{PSEUDO:function(a,i,m,p){var t=i[1],s=e.filters[t];if(s)return s(a,m,i,p);else if(t==="contains")return(a.textContent||a.innerText||"").indexOf(i[3])>=0;else if(t==="not"){i=i[3];m=0;for(p=i.length;m<p;m++)if(i[m]===a)return false;return true}},CHILD:function(a,i){var m=i[1],p=a;switch(m){case "only":case "first":for(;p=p.previousSibling;)if(p.nodeType===1)return false;if(m=="first")return true;p=a;case "last":for(;p=p.nextSibling;)if(p.nodeType===
1)return false;return true;case "nth":m=i[2];var t=i[3];if(m==1&&t==0)return true;var s=i[0],x=a.parentNode;if(x&&(x.sizcache!==s||!a.nodeIndex)){var F=0;for(p=x.firstChild;p;p=p.nextSibling)if(p.nodeType===1)p.nodeIndex=++F;x.sizcache=s}p=a.nodeIndex-t;return m==0?p==0:p%m==0&&p/m>=0}},ID:function(a,i){return a.nodeType===1&&a.getAttribute("id")===i},TAG:function(a,i){return i==="*"&&a.nodeType===1||a.nodeName===i},CLASS:function(a,i){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(i)>
-1},ATTR:function(a,i){var m=i[1];m=e.attrHandle[m]?e.attrHandle[m](a):a[m]!=null?a[m]:a.getAttribute(m);var p=m+"",t=i[2],s=i[4];return m==null?t==="!=":t==="="?p===s:t==="*="?p.indexOf(s)>=0:t==="~="?(" "+p+" ").indexOf(s)>=0:!s?p&&m!==false:t==="!="?p!=s:t==="^="?p.indexOf(s)===0:t==="$="?p.substr(p.length-s.length)===s:t==="|="?p===s||p.substr(0,s.length+1)===s+"-":false},POS:function(a,i,m,p){var t=e.setFilters[i[2]];if(t)return t(a,m,i,p)}}},n=e.match.POS,r;for(r in e.match)e.match[r]=RegExp(e.match[r].source+
/(?![^\[]*\])(?![^\(]*\))/.source);var u=function(a,i){a=Array.prototype.slice.call(a);if(i){i.push.apply(i,a);return i}return a};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(v){u=function(a,i){var m=i||[];if(k.call(a)==="[object Array]")Array.prototype.push.apply(m,a);else if(typeof a.length==="number")for(var p=0,t=a.length;p<t;p++)m.push(a[p]);else for(p=0;a[p];p++)m.push(a[p]);return m}}var f;if(document.documentElement.compareDocumentPosition)f=function(a,i){var m=
a.compareDocumentPosition(i)&4?-1:a===i?0:1;if(m===0)b=true;return m};else if("sourceIndex"in document.documentElement)f=function(a,i){var m=a.sourceIndex-i.sourceIndex;if(m===0)b=true;return m};else if(document.createRange)f=function(a,i){var m=a.ownerDocument.createRange(),p=i.ownerDocument.createRange();m.setStart(a,0);m.setEnd(a,0);p.setStart(i,0);p.setEnd(i,0);m=m.compareBoundaryPoints(Range.START_TO_END,p);if(m===0)b=true;return m};(function(){var a=document.createElement("div"),i="script"+
(new Date).getTime();a.innerHTML="<a name='"+i+"'/>";var m=document.documentElement;m.insertBefore(a,m.firstChild);if(document.getElementById(i)){e.find.ID=function(p,t,s){if(typeof t.getElementById!=="undefined"&&!s)return(t=t.getElementById(p[1]))?t.id===p[1]||typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id").nodeValue===p[1]?[t]:undefined:[]};e.filter.ID=function(p,t){var s=typeof p.getAttributeNode!=="undefined"&&p.getAttributeNode("id");return p.nodeType===1&&s&&s.nodeValue===
t}}m.removeChild(a)})();(function(){var a=document.createElement("div");a.appendChild(document.createComment(""));if(a.getElementsByTagName("*").length>0)e.find.TAG=function(i,m){var p=m.getElementsByTagName(i[1]);if(i[1]==="*"){for(var t=[],s=0;p[s];s++)p[s].nodeType===1&&t.push(p[s]);p=t}return p};a.innerHTML="<a href='#'></a>";if(a.firstChild&&typeof a.firstChild.getAttribute!=="undefined"&&a.firstChild.getAttribute("href")!=="#")e.attrHandle.href=function(i){return i.getAttribute("href",2)}})();
document.querySelectorAll&&function(){var a=h,i=document.createElement("div");i.innerHTML="<p class='TEST'></p>";if(!(i.querySelectorAll&&i.querySelectorAll(".TEST").length===0)){h=function(p,t,s,x){t=t||document;if(!x&&t.nodeType===9&&!c(t))try{return u(t.querySelectorAll(p),s)}catch(F){}return a(p,t,s,x)};for(var m in a)h[m]=a[m]}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";
if(a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length!==1){e.order.splice(1,0,"CLASS");e.find.CLASS=function(i,m,p){if(typeof m.getElementsByClassName!=="undefined"&&!p)return m.getElementsByClassName(i[1])}}}}();var d=document.compareDocumentPosition?function(a,i){return a.compareDocumentPosition(i)&16}:function(a,i){return a!==i&&(a.contains?a.contains(i):true)},c=function(a){return a.nodeType===9&&a.documentElement.nodeName!=="HTML"||!!a.ownerDocument&&
a.ownerDocument.documentElement.nodeName!=="HTML"},j=function(a,i){for(var m=[],p="",t,s=i.nodeType?[i]:i;t=e.match.PSEUDO.exec(a);){p+=t[0];a=a.replace(e.match.PSEUDO,"")}a=e.relative[a]?a+"*":a;t=0;for(var x=s.length;t<x;t++)h(a,s[t],m);return h.filter(p,m)};window.tinymce.dom.Sizzle=h})();
(function(l){var o=l.each,q=l.DOM,g=l.isIE,k;l.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(b,h,e,n){var r,u=this,v=u.events,f;if(h instanceof Array){f=[];o(h,function(d){f.push(u.add(b,d,e,n))});return f}if(b&&b.hasOwnProperty&&b instanceof Array){f=[];o(b,function(d){d=q.get(d);f.push(u.add(d,h,e,n))});return f}if(b=q.get(b)){r=function(d){if(!u.disabled){if((d=d||window.event)&&g){if(!d.target)d.target=d.srcElement;l.extend(d,u._stoppers)}if(!n)return e(d);
return e.call(n,d)}};if(h=="unload"){l.unloads.unshift({func:r});return r}if(h=="init"){u.domLoaded?r():u.inits.push(r);return r}v.push({obj:b,name:h,func:e,cfunc:r,scope:n});u._add(b,h,r);return e}},remove:function(b,h,e){var n=this,r=n.events,u=false,v;if(b&&b.hasOwnProperty&&b instanceof Array){v=[];o(b,function(f){f=q.get(f);v.push(n.remove(f,h,e))});return v}b=q.get(b);o(r,function(f,d){if(f.obj==b&&f.name==h&&(!e||f.func==e||f.cfunc==e)){r.splice(d,1);n._remove(b,h,f.cfunc);u=true;return false}});
return u},clear:function(b){var h=this.events,e,n;if(b){b=q.get(b);for(e=h.length-1;e>=0;e--){n=h[e];if(n.obj===b){this._remove(n.obj,n.name,n.cfunc);n.obj=n.cfunc=null;h.splice(e,1)}}}},cancel:function(b){if(!b)return false;this.stop(b);return this.prevent(b)},stop:function(b){if(b.stopPropagation)b.stopPropagation();else b.cancelBubble=true;return false},prevent:function(b){if(b.preventDefault)b.preventDefault();else b.returnValue=false;return false},destroy:function(){var b=this;o(b.events,function(h){b._remove(h.obj,
h.name,h.cfunc);h.obj=h.cfunc=null});b.events=[];b=null},_add:function(b,h,e){if(b.attachEvent)b.attachEvent("on"+h,e);else if(b.addEventListener)b.addEventListener(h,e,false);else b["on"+h]=e},_remove:function(b,h,e){if(b)try{if(b.detachEvent)b.detachEvent("on"+h,e);else if(b.removeEventListener)b.removeEventListener(h,e,false);else b["on"+h]=null}catch(n){}},_pageInit:function(){if(!this.domLoaded){this.domLoaded=true;o(this.inits,function(b){b()});this.inits=[]}},_wait:function(b){var h=this,e=
b.document;if(b.tinyMCE_GZ&&tinyMCE_GZ.loaded)h.domLoaded=1;else{if(e.attachEvent){e.attachEvent("onreadystatechange",function(){if(e.readyState==="complete"){e.detachEvent("onreadystatechange",arguments.callee);h._pageInit(b)}});e.documentElement.doScroll&&b==b.top&&function(){if(!h.domLoaded){try{e.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}h._pageInit(b)}}()}else e.addEventListener&&h._add(b,"DOMContentLoaded",function(){h._pageInit(b)});h._add(b,"load",function(){h._pageInit(b)})}},
_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});k=l.dom.Event=new l.dom.EventUtils;k._wait(window);l.addUnload(function(){k.destroy()})})(tinymce);
(function(l){l.dom.Element=function(o,q){var g=this,k;g.settings=q=q||{};g.id=o;g.dom=k=q.dom||l.DOM;l.isIE||k.get(g.id);l.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(b){g[b]=function(){var h=[o],e;for(e=0;e<arguments.length;e++)h.push(arguments[e]);h=k[b].apply(k,h);g.update(b);return h}});l.extend(g,{on:function(b,h,e){return l.dom.Event.add(g.id,
b,h,e)},getXY:function(){return{x:parseInt(g.getStyle("left")),y:parseInt(g.getStyle("top"))}},getSize:function(){var b=k.get(g.id);return{w:parseInt(g.getStyle("width")||b.clientWidth),h:parseInt(g.getStyle("height")||b.clientHeight)}},moveTo:function(b,h){g.setStyles({left:b,top:h})},moveBy:function(b,h){var e=g.getXY();g.moveTo(e.x+b,e.y+h)},resizeTo:function(b,h){g.setStyles({width:b,height:h})},resizeBy:function(b,h){var e=g.getSize();g.resizeTo(e.w+b,e.h+h)},update:function(b){if(l.isIE6&&q.blocker){b=
b||"";if(!(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0))if(b=="remove")k.remove(g.blocker);else{if(g.blocker)b=k.get(g.blocker);else{g.blocker=k.uniqueId();b=k.add(q.container||k.getRoot(),"iframe",{id:g.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});k.setStyle(b,"opacity",0)}k.setStyles(b,{left:g.getStyle("left",1),top:g.getStyle("top",1),width:g.getStyle("width",1),height:g.getStyle("height",1),display:g.getStyle("display",1),zIndex:parseInt(g.getStyle("zIndex",
1)||0)-1})}}}})}})(tinymce);
(function(l){var o=l.is,q=l.each;l.create("tinymce.dom.Selection",{Selection:function(g,k,b){var h=this;h.dom=g;h.win=k;h.serializer=b;q(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){h[e]=new l.util.Dispatcher(h)});if(!h.win.getSelection)h.tridentSel=new l.dom.TridentSelection(h);l.addUnload(h.destroy,h)},getContent:function(g){var k=this.getRng(),b=this.dom.create("body"),h=this.getSel(),e,n;g=g||{};e=n="";g.get=true;g.format=g.format||"html";this.onBeforeGetContent.dispatch(this,
g);if(g.format=="text")return this.isCollapsed()?"":k.text||(h.toString?h.toString():"");if(k.cloneContents)(k=k.cloneContents())&&b.appendChild(k);else b.innerHTML=o(k.item)||o(k.htmlText)?k.item?k.item(0).outerHTML:k.htmlText:k.toString();if(/^\s/.test(b.innerHTML))e=" ";if(/\s+$/.test(b.innerHTML))n=" ";g.getInner=true;g.content=this.isCollapsed()?"":e+this.serializer.serialize(b,g)+n;this.onGetContent.dispatch(this,g);return g.content},setContent:function(g,k){var b=this.getRng(),h,e=this.win.document;
k=k||{format:"html"};k.set=true;k.content=this.dom.processHTML(g);this.onBeforeSetContent.dispatch(this,k);g=k.content;if(b.insertNode){g+='<span id="__caret">_</span>';if(b.startContainer==e&&b.endContainer==e)e.body.innerHTML=g;else{b.deleteContents();if(e.body.childNodes.length==0)e.body.innerHTML=g;else b.insertNode(b.createContextualFragment(g))}h=this.dom.get("__caret");b=e.createRange();b.setStartBefore(h);b.setEndBefore(h);this.setRng(b);this.dom.remove("__caret")}else{if(b.item){e.execCommand("Delete",
false,null);b=this.getRng()}b.pasteHTML(g)}this.onSetContent.dispatch(this,k)},getStart:function(){var g=this.getRng(),k;if(g.duplicate||g.item){if(g.item)return g.item(0);g=g.duplicate();g.collapse(1);if((k=g.parentElement())&&k.nodeName=="BODY")return k.firstChild||k}else{k=g.startContainer;if(k.nodeType==1&&k.hasChildNodes())k=k.childNodes[Math.min(k.childNodes.length-1,g.startOffset)];if(k&&k.nodeType==3)return k.parentNode}return k},getEnd:function(){var g=this.getRng(),k;if(g.duplicate||g.item){if(g.item)return g.item(0);
g=g.duplicate();g.collapse(0);if((k=g.parentElement())&&k.nodeName=="BODY")return k.lastChild||k}else{k=g.endContainer;g=g.endOffset;if(k.nodeType==1&&k.hasChildNodes())k=k.childNodes[g>0?g-1:g];if(k&&k.nodeType==3)return k.parentNode}return k},getBookmark:function(g,k){function b(d,c){var j=0;q(e.select(d),function(a,i){if(a==c)j=i});return j}var h=this,e=h.dom,n,r,u,v,f;if(g==2)return function(){function d(i,m){var p=i[m?"startContainer":"endContainer"],t=i[m?"startOffset":"endOffset"],s=[],x,F=
0;if(p.nodeType==3){if(k)for(x=p.previousSibling;x&&x.nodeType==3;x=x.previousSibling)t+=x.nodeValue.length;s.push(t)}else{x=p.childNodes;if(t>=x.length&&x.length){F=1;t=Math.max(0,x.length-1)}s.push(h.dom.nodeIndex(x[t],k)+F)}for(;p&&p!=j;p=p.parentNode)s.push(h.dom.nodeIndex(p,k));return s}var c=h.getRng(true),j=e.getRoot(),a={};a.start=d(c,true);if(!h.isCollapsed())a.end=d(c);return a}();if(g)return{rng:h.getRng()};n=h.getRng();u=e.uniqueId();v=tinyMCE.activeEditor.selection.isCollapsed();if(n.duplicate||
n.item)if(n.item){f=n.item(0);r=f.nodeName;return{name:r,index:b(r,f)}}else{r=n.duplicate();n.collapse();n.pasteHTML('<span _mce_type="bookmark" id="'+u+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>');if(!v){r.collapse(false);r.pasteHTML('<span _mce_type="bookmark" id="'+u+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>')}}else{f=h.getNode();r=f.nodeName;if(r=="IMG")return{name:r,index:b(r,f)};r=n.cloneRange();if(!v){r.collapse(false);r.insertNode(e.create("span",{_mce_type:"bookmark",
id:u+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff"))}n.collapse(true);n.insertNode(e.create("span",{_mce_type:"bookmark",id:u+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}h.moveToBookmark({id:u,keep:1});return{id:u}},moveToBookmark:function(g){var k=this.dom,b,h,e,n,r,u;this.tridentSel&&this.tridentSel.destroy();if(g)if(g.start){b=k.createRng();h=k.getRoot();var v=function(f){var d=g[f?"start":"end"],c,j;if(d){j=h;for(c=d.length-1;c>=1;c--)j=j.childNodes[d[c]];f?b.setStart(j,
d[0]):b.setEnd(j,d[0])}};v(true);v();this.setRng(b)}else if(g.id){v=function(f){var d=k.get(g.id+"_"+f),c,j,a;a=g.keep;if(d){c=d.parentNode;if(f=="start"){if(a){c=d;j=1}else j=k.nodeIndex(d);e=n=c;r=u=j}else{if(a){c=d;j=1}else j=k.nodeIndex(d);n=c;u=j}if(!a){a=d.previousSibling;c=d.nextSibling;for(q(l.grep(d.childNodes),function(i){if(i.nodeType==3)i.nodeValue=i.nodeValue.replace(/\uFEFF/g,"")});d=k.get(g.id+"_"+f);)k.remove(d,1);if(a&&c&&a.nodeType==c.nodeType&&a.nodeType==3){j=a.nodeValue.length;
a.appendData(c.nodeValue);k.remove(c);if(f=="start"){e=n=a;r=u=j}else{n=a;u=j}}}}};v("start");v("end");b=k.createRng();b.setStart(e,r);b.setEnd(n,u);this.setRng(b)}else if(g.name)this.select(k.select(g.name)[g.index]);else g.rng&&this.setRng(g.rng)},select:function(g,k){var b=this.dom,h=b.createRng();b=b.nodeIndex(g);h.setStart(g.parentNode,b);h.setEnd(g.parentNode,b+1);if(k){b=function(e,n){var r=new l.dom.TreeWalker(e,e);do{if(e.nodeType==3&&l.trim(e.nodeValue).length!=0){n?h.setStart(e,0):h.setEnd(e,
e.nodeValue.length);break}if(e.nodeName=="BR"){n?h.setStartBefore(e):h.setEndBefore(e);break}}while(e=n?r.next():r.prev())};b(g,1);b(g)}this.setRng(h);return g},isCollapsed:function(){var g=this.getRng(),k=this.getSel();if(!g||g.item)return false;if(g.compareEndPoints)return g.compareEndPoints("StartToEnd",g)===0;return!k||g.collapsed},collapse:function(g){var k=this.getRng(),b;if(k.item){b=k.item(0);k=this.win.document.body.createTextRange();k.moveToElementText(b)}k.collapse(!!g);this.setRng(k)},
getSel:function(){var g=this.win;return g.getSelection?g.getSelection():g.document.selection},getRng:function(g){var k,b;if(g&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(k=this.getSel())b=k.rangeCount>0?k.getRangeAt(0):k.createRange?k.createRange():this.win.document.createRange()}catch(h){}b||(b=this.win.document.createRange?this.win.document.createRange():this.win.document.body.createTextRange());if(this.selectedRange&&this.explicitRange)if(b.compareBoundaryPoints(b.START_TO_START,
this.selectedRange)===0&&b.compareBoundaryPoints(b.END_TO_END,this.selectedRange)===0)b=this.explicitRange;else this.explicitRange=this.selectedRange=null;return b},setRng:function(g){var k;if(this.tridentSel)if(g.cloneRange)this.tridentSel.addRange(g);else try{g.select()}catch(b){}else if(k=this.getSel()){this.explicitRange=g;k.removeAllRanges();k.addRange(g);this.selectedRange=k.getRangeAt(0)}},setNode:function(g){this.setContent(this.dom.getOuterHTML(g));return g},getNode:function(){var g=this.getRng(),
k=this.getSel(),b;if(g.setStart){if(!g)return this.dom.getRoot();b=g.commonAncestorContainer;if(!g.collapsed){if(g.startContainer==g.endContainer)if(g.startOffset-g.endOffset<2)if(g.startContainer.hasChildNodes())b=g.startContainer.childNodes[g.startOffset];if(l.isWebKit&&k.anchorNode&&k.anchorNode.nodeType==1)return k.anchorNode.childNodes[k.anchorOffset]}if(b&&b.nodeType==3)return b.parentNode;return b}return g.item?g.item(0):g.parentElement()},getSelectedBlocks:function(g,k){var b=this.dom,h,e,
n,r=[];h=b.getParent(g||this.getStart(),b.isBlock);e=b.getParent(k||this.getEnd(),b.isBlock);h&&r.push(h);if(h&&e&&h!=e)for(n=h;(n=n.nextSibling)&&n!=e;)b.isBlock(n)&&r.push(n);e&&h!=e&&r.push(e);return r},destroy:function(g){this.win=null;this.tridentSel&&this.tridentSel.destroy();g||l.removeUnload(this.destroy)}})})(tinymce);
(function(l){l.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){this.doc=function(){var o=document.implementation;if(!o||!o.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(q){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(g){}}else return o.createDocument("","",null)}();this.valid=l.isOpera||l.isWebKit;this.reset()},reset:function(){var o=this.doc;o.firstChild&&o.removeChild(o.firstChild);this.node=o.appendChild(o.createElement("html"))},writeStartElement:function(o){this.node=
this.node.appendChild(this.doc.createElement(o))},writeAttribute:function(o,q){if(this.valid)q=q.replace(/>/g,"%MCGT%");this.node.setAttribute(o,q)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var o=this.node;o.appendChild(this.doc.createTextNode(""));this.node=o.parentNode},writeText:function(o){if(this.valid)o=o.replace(/>/g,"%MCGT%");this.node.appendChild(this.doc.createTextNode(o))},writeCDATA:function(o){this.node.appendChild(this.doc.createCDATASection(o))},
writeComment:function(o){if(l.isIE)o=o.replace(/^\-|\-$/g," ");this.node.appendChild(this.doc.createComment(o.replace(/\-\-/g," ")))},getContent:function(){var o;o=this.doc.xml||(new XMLSerializer).serializeToString(this.doc);o=o.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");o=o.replace(/ ?\/>/g," />");if(this.valid)o=o.replace(/\%MCGT%/g,"&gt;");return o}})})(tinymce);
(function(l){l.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(o){this.settings=l.extend({indent_char:" ",indentation:0},o);this.reset()},reset:function(){this.str=this.indent="";this.tags=[];this.count=0},writeStartElement:function(o){this._writeAttributesEnd();this.writeRaw("<"+o);this.tags.push(o);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(o,q){this.writeRaw(" "+this.encode(o)+'="'+this.encode(q)+
'"')},writeEndElement:function(){var o;if(this.tags.length>0){o=this.tags.pop();this._writeAttributesEnd(1)&&this.writeRaw("</"+o+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeText:function(o){this._writeAttributesEnd();this.writeRaw(this.encode(o));this.count++},writeCDATA:function(o){this._writeAttributesEnd();
this.writeRaw("<![CDATA["+o+"]]\>");this.count++},writeComment:function(o){this._writeAttributesEnd();this.writeRaw("<!-- "+o+"--\>");this.count++},writeRaw:function(o){this.str+=o},encode:function(o){return o.replace(/[<>&"]/g,function(q){switch(q){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case '"':return"&quot;"}return q})},getContent:function(){return this.str},_writeAttributesEnd:function(o){if(this.inAttr){this.inAttr=false;if(o&&this.elementCount==this.count){this.writeRaw(" />");
return false}this.writeRaw(">");return true}}})})(tinymce);
(function(l){function o(e){return e.replace(/([?+*])/g,".$1")}var q=l.extend,g=l.each,k=l.util.Dispatcher,b=l.isIE,h=l.isGecko;l.create("tinymce.dom.Serializer",{Serializer:function(e){var n=this;n.key=0;n.onPreProcess=new k(n);n.onPostProcess=new k(n);try{n.writer=new l.dom.XMLWriter}catch(r){n.writer=new l.dom.StringWriter}n.settings=e=q({dom:l.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(_mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",
entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",
valid_elements:"*[*]",extended_valid_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},e);n.dom=e.dom;n.schema=e.schema;if(e.entity_encoding=="named"&&!e.entities)e.entity_encoding="raw";e.remove_redundant_brs&&n.onPostProcess.add(function(u,v){v.content=
v.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,function(f,d,c){if(/^<br \/>\s*<\//.test(f))return"</"+c+">";return f})});e.element_format=="html"&&n.onPostProcess.add(function(u,v){v.content=v.content.replace(/<([^>]+) \/>/g,"<$1>")});e.fix_list_elements&&n.onPreProcess.add(function(u,v){function f(s,x){for(var F=x.split(","),y;(s=s.previousSibling)!=null;)for(y=0;y<F.length;y++)if(s.nodeName==F[y])return s;return null}var d,c,j=["ol","ul"],a,i,m,p=/^(OL|UL)$/,t;for(c=0;c<j.length;c++){d=
n.dom.select(j[c],v.node);for(a=0;a<d.length;a++){i=d[a];m=i.parentNode;if(p.test(m.nodeName))if(t=f(i,"LI"))t.appendChild(i);else{t=n.dom.create("li");t.innerHTML="&nbsp;";t.appendChild(i);m.insertBefore(t,m.firstChild)}}}});e.fix_table_elements&&n.onPreProcess.add(function(u,v){if(!l.isOpera||opera.buildNumber()>=1767)g(n.dom.select("p table",v.node).reverse(),function(f){var d=n.dom.getParent(f.parentNode,"table,p");if(d.nodeName!="TABLE")try{n.dom.split(d,f)}catch(c){}})})},setEntities:function(e){var n,
r={},u;if(!this.entityLookup){e=e.split(",");for(n=0;n<e.length;n+=2){u=e[n];if(!(u==34||u==38||u==60||u==62)){r[String.fromCharCode(e[n])]=e[n+1];parseInt(e[n]).toString(16)}}this.entityLookup=r}},setRules:function(e){this._setup();this.rules={};this.wildRules=[];this.validElements={};return this.addRules(e)},addRules:function(e){var n=this,r;if(e){n._setup();g(e.split(","),function(u){u=u.split(/\[|\]/);var v=u[0].split("/"),f,d,c,j=[];if(r)d=l.extend([],r.attribs);u.length>1&&g(u[1].split("|"),
function(a){var i={},m;d=d||[];a=a.replace(/::/g,"~");a=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(a);a[2]=a[2].replace(/~/g,":");if(a[1]=="!"){f=f||[];f.push(a[2])}if(a[1]=="-")for(m=0;m<d.length;m++)if(d[m].name==a[2]){d.splice(m,1);return}switch(a[3]){case "=":i.defaultVal=a[4]||"";break;case ":":i.forcedVal=a[4];break;case "<":i.validVals=a[4].split("?")}if(/[*.?]/.test(a[2])){c=c||[];i.nameRE=RegExp("^"+o(a[2])+"$");c.push(i)}else{i.name=a[2];d.push(i)}j.push(a[2])});g(v,function(a,i){var m=
a.charAt(0),p=1,t={};if(r){if(r.noEmpty)t.noEmpty=r.noEmpty;if(r.fullEnd)t.fullEnd=r.fullEnd;if(r.padd)t.padd=r.padd}switch(m){case "-":t.noEmpty=true;break;case "+":t.fullEnd=true;break;case "#":t.padd=true;break;default:p=0}v[i]=a=a.substring(p);n.validElements[a]=1;if(/[*.?]/.test(v[0])){t.nameRE=RegExp("^"+o(v[0])+"$");n.wildRules=n.wildRules||{};n.wildRules.push(t)}else{t.name=v[0];if(v[0]=="@")r=t;n.rules[a]=t}t.attribs=d;if(f)t.requiredAttribs=f;if(c){a="";g(j,function(s){if(a)a+="|";a+="("+
o(s)+")"});t.validAttribsRE=RegExp("^"+a.toLowerCase()+"$");t.wildAttribs=c}})});e="";g(n.validElements,function(u,v){if(e)e+="|";if(v!="@")e+=v});n.validElementsRE=RegExp("^("+o(e.toLowerCase())+")$")}},findRule:function(e){var n=this.rules,r;this._setup();if(n=n[e])return n;n=this.wildRules;for(r=0;r<n.length;r++)if(n[r].nameRE.test(e))return n[r];return null},findAttribRule:function(e,n){var r,u=e.wildAttribs;for(r=0;r<u.length;r++)if(u[r].nameRE.test(n))return u[r];return null},serialize:function(e,
n){var r=this,u,v,f,d;r._setup();n=n||{};n.format=n.format||"html";r.processObj=n;if(b){d=[];g(e.getElementsByTagName("option"),function(c){c=r.dom.getAttrib(c,"selected");d.push(c?c:null)})}e=e.cloneNode(true);b&&g(e.getElementsByTagName("option"),function(c,j){r.dom.setAttrib(c,"selected",d[j])});f=e.ownerDocument.implementation;if(f.createHTMLDocument&&l.isOpera&&opera.buildNumber()>=1767){u=f.createHTMLDocument("");g(e.nodeName=="BODY"?e.childNodes:[e],function(c){u.body.appendChild(u.importNode(c,
true))});e=e.nodeName!="BODY"?u.body.firstChild:u.body;v=r.dom.doc;r.dom.doc=u}r.key=""+(parseInt(r.key)+1);if(!n.no_events){n.node=e;r.onPreProcess.dispatch(r,n)}r.writer.reset();r._info=n;r._serializeNode(e,n.getInner);n.content=r.writer.getContent();if(v)r.dom.doc=v;n.no_events||r.onPostProcess.dispatch(r,n);r._postProcess(n);n.node=null;return l.trim(n.content)},_postProcess:function(e){var n=this,r=n.settings,u=e.content,v;if(e.format=="html"){v=n._protect({content:u,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},
{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]--\>)/g}]});u=v.content;if(r.entity_encoding!=="raw")u=n._encode(u);if(!e.set){u=u.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,r.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(r.remove_linebreaks){u=u.replace(/\r?\n|\r/g," ");u=u.replace(/(<[^>]+>)\s+/g,"$1 ");u=u.replace(/\s+(<\/[^>]+>)/g," $1");u=u.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,
"<$1 $2>");u=u.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");u=u.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(r.apply_source_formatting&&r.indent_mode=="simple"){u=u.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");u=u.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,
"\n<$1$2>");u=u.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");u=u.replace(/\n\n/g,"\n")}}u=n._unprotect(u,v);u=u.replace(/<!--\[CDATA\[([\s\S]+)\]\]--\>/g,"<![CDATA[$1]]\>");if(r.entity_encoding=="raw")u=u.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>");u=u.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(f,d,c){return"<noscript"+d+">"+n.dom.decode(c.replace(/<!--|--\>/g,""))+"</noscript>"})}e.content=u},_serializeNode:function(e,
n){var r=this.settings,u=this.writer,v,f,d,c,j,a,i,m,p,t,s,x,F;if(!r.node_filter||r.node_filter(e))switch(e.nodeType){case 1:if(e.hasAttribute?e.hasAttribute("_mce_bogus"):e.getAttribute("_mce_bogus"))return;t=x=false;v=e.hasChildNodes();m=e.getAttribute("_mce_name")||e.nodeName.toLowerCase();if(F=e.getAttribute("_mce_type"))if(this._info.cleanup)x=1;else return;if(b)if(e.scopeName!=="HTML"&&e.scopeName!=="html")m=e.scopeName+":"+m;if(m.indexOf("mce:")===0)m=m.substring(4);if(!x)if(!this.validElementsRE||
!this.validElementsRE.test(m)||this.invalidElementsRE&&this.invalidElementsRE.test(m)||n){t=true;break}if(b){if(r.fix_content_duplication){if(e._mce_serialized==this.key)return;e._mce_serialized=this.key}if(m.charAt(0)=="/")m=m.substring(1)}else if(h)if(e.nodeName==="BR"&&e.getAttribute("type")=="_moz")return;if(r.validate_children){if(this.elementName&&!this.schema.isValid(this.elementName,m)){t=true;break}this.elementName=m}p=this.findRule(m);if(!p){t=true;break}m=p.name||m;s=r.closed.test(m);if(!v&&
p.noEmpty||b&&!m){t=true;break}if(p.requiredAttribs){j=p.requiredAttribs;for(d=j.length-1;d>=0;d--)if(this.dom.getAttrib(e,j[d])!=="")break;if(d==-1){t=true;break}}u.writeStartElement(m);if(p.attribs){d=0;a=p.attribs;for(c=a.length;d<c;d++){j=a[d];i=this._getAttrib(e,j);i!==null&&u.writeAttribute(j.name,i)}}if(p.validAttribsRE){a=this.dom.getAttribs(e);for(d=a.length-1;d>-1;d--){j=a[d];if(j.specified){j=j.nodeName.toLowerCase();if(!(r.invalid_attrs.test(j)||!p.validAttribsRE.test(j))){c=this.findAttribRule(p,
j);i=this._getAttrib(e,c,j);i!==null&&u.writeAttribute(j,i)}}}}F&&x&&u.writeAttribute("_mce_type",F);if(m==="script"&&l.trim(e.innerHTML)){u.writeText("// ");u.writeCDATA(e.innerHTML.replace(/<!--|--\>|<\[CDATA\[|\]\]>/g,""));v=false;break}if(p.padd)if(v&&(f=e.firstChild)&&f.nodeType===1&&e.childNodes.length===1){if(f.hasAttribute?f.hasAttribute("_mce_bogus"):f.getAttribute("_mce_bogus"))u.writeText("\u00a0")}else v||u.writeText("\u00a0");break;case 3:if(r.validate_children&&this.elementName&&!this.schema.isValid(this.elementName,
"#text"))return;return u.writeText(e.nodeValue);case 4:return u.writeCDATA(e.nodeValue);case 8:return u.writeComment(e.nodeValue)}else if(e.nodeType==1)v=e.hasChildNodes();if(v&&!s)for(f=e.firstChild;f;){this._serializeNode(f);this.elementName=m;f=f.nextSibling}t||(s?u.writeEndElement():u.writeFullEndElement())},_protect:function(e){function n(v){return v.replace(/[\r\n\\]/g,function(f){if(f==="\n")return"\\n";else if(f==="\\")return"\\\\";return"\\r"})}function r(v){return v.replace(/\\[\\rn]/g,
function(f){if(f==="\\n")return"\n";else if(f==="\\\\")return"\\";return"\r"})}var u=this;e.items=e.items||[];g(e.patterns,function(v){e.content=r(n(e.content).replace(v.pattern,function(f,d,c,j){c=r(c);if(v.encode)c=u._encode(c);e.items.push(c);return d+"<!--mce:"+(e.items.length-1)+"--\>"+j}))});return e},_unprotect:function(e,n){e=e.replace(/\<!--mce:([0-9]+)--\>/g,function(r,u){return n.items[parseInt(u)]});n.items=[];return e},_encode:function(e){var n=this.settings,r;if(n.entity_encoding!==
"raw"){if(n.entity_encoding.indexOf("named")!=-1){this.setEntities(n.entities);r=this.entityLookup;e=e.replace(/[\u007E-\uFFFF]/g,function(u){var v;if(v=r[u])u="&"+v+";";return u})}if(n.entity_encoding.indexOf("numeric")!=-1)e=e.replace(/[\u007E-\uFFFF]/g,function(u){return"&#"+u.charCodeAt(0)+";"})}return e},_setup:function(){var e=this.settings;if(!this.done){this.done=1;this.setRules(e.valid_elements);this.addRules(e.extended_valid_elements);if(e.invalid_elements)this.invalidElementsRE=RegExp("^("+
o(e.invalid_elements.replace(/,/g,"|").toLowerCase())+")$");if(e.attrib_value_filter)this.attribValueFilter=e.attribValueFilter}},_getAttrib:function(e,n,r){var u;r=r||n.name;if(n.forcedVal&&(u=n.forcedVal)){if(u==="{$uid}")return this.dom.uniqueId();return u}u=this.dom.getAttrib(e,r);switch(r){case "rowspan":case "colspan":if(u=="1")u=""}if(this.attribValueFilter)u=this.attribValueFilter(r,u,e);if(n.validVals){for(e=n.validVals.length-1;e>=0;e--)if(u==n.validVals[e])break;if(e==-1)return null}if(u===
""&&typeof n.defaultVal!="undefined"){u=n.defaultVal;if(u==="{$uid}")return this.dom.uniqueId();return u}else if(r=="class"&&this.processObj.get)u=u.replace(/\s?mceItem\w+\s?/g,"");if(u==="")return null;return u}})})(tinymce);
(function(l){l.dom.ScriptLoader=function(){function o(e,n){function r(){u.remove(c);if(v)v.onreadystatechange=v.onload=v=null;n()}var u=l.DOM,v,f,d,c;c=u.uniqueId();if(l.isIE6){f=new l.util.URI(e);d=location;if(f.host==d.hostname&&f.port==d.port&&f.protocol+":"==d.protocol){l.util.XHR.send({url:l._addVer(f.getURI()),success:function(j){var a=u.create("script",{type:"text/javascript"});a.text=j;document.getElementsByTagName("head")[0].appendChild(a);u.remove(a);r()}});return}}v=u.create("script",{id:c,
type:"text/javascript",src:l._addVer(e)});v.onload=r;v.onreadystatechange=function(){var j=v.readyState;if(j=="complete"||j=="loaded")r()};(document.getElementsByTagName("head")[0]||document.body).appendChild(v)}var q={},g=[],k={},b=[],h=0;this.isDone=function(e){return q[e]==2};this.markDone=function(e){q[e]=2};this.add=this.load=function(e,n,r){if(q[e]==void 0){g.push(e);q[e]=0}if(n){k[e]||(k[e]=[]);k[e].push({func:n,scope:r||this})}};this.loadQueue=function(e,n){this.loadScripts(g,e,n)};this.loadScripts=
function(e,n,r){function u(f){l.each(k[f],function(d){d.func.call(d.scope)});k[f]=void 0}var v;b.push({func:n,scope:r||this});v=function(){var f=l.grep(e);e.length=0;l.each(f,function(d){if(q[d]==2)u(d);else if(q[d]!=1){q[d]=1;h++;o(d,function(){q[d]=2;h--;u(d);v()})}});if(!h){l.each(b,function(d){d.func.call(d.scope)});b.length=0}};v()}};l.ScriptLoader=new l.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(l,o){function q(k,b,h,e){if(k){if(!e&&k[b])return k[b];if(k!=o){if(b=k[h])return b;for(k=k.parentNode;k&&k!=o;k=k.parentNode)if(b=k[h])return b}}}var g=l;this.current=function(){return g};this.next=function(k){return g=q(g,"firstChild","nextSibling",k)};this.prev=function(k){return g=q(g,"lastChild","lastSibling",k)}};
(function(){var l={};(function(o,q){function g(b){return b.replace(/[A-Z]+/g,function(h){return g(o[h])})}for(var k in o)if(o.hasOwnProperty(k))o[k]=g(o[k]);g(q).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]/g,function(b,h,e){var n={};e=e.split(/\|/);for(b=e.length-1;b>=0;b--)n[e[b]]=1;l[h]=n})})({Z:"#|H|K|N|O|P",Y:"#|X|form|R|Q",X:"p|T|div|U|W|isindex|fieldset|table",W:"pre|hr|blockquote|address|center|noframes",U:"ul|ol|dl|menu|dir",ZC:"#|p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",
T:"h1|h2|h3|h4|h5|h6",ZB:"#|X|S|Q",S:"R|P",ZA:"#|a|G|J|M|O|P",R:"#|a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe"},"script[]style[]object[#|param|X|form|a|H|K|N|O|Q]param[]p[S]a[Z]br[]span[S]bdo[S]applet[#|param|X|form|a|H|K|N|O|Q]h1[S]img[]map[X|form|Q|area]h2[S]iframe[#|X|form|a|H|K|N|O|Q]h3[S]tt[S]i[S]b[S]u[S]s[S]strike[S]big[S]small[S]font[S]basefont[]em[S]strong[S]dfn[S]code[S]q[S]samp[S]kbd[S]var[S]cite[S]abbr[S]acronym[S]sub[S]sup[S]input[]select[optgroup|option]optgroup[option]option[]textarea[]label[S]button[#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[S]ins[#|X|form|a|H|K|N|O|Q]h5[S]del[#|X|form|a|H|K|N|O|Q]h6[S]div[#|X|form|a|H|K|N|O|Q]ul[li]li[#|X|form|a|H|K|N|O|Q]ol[li]dl[dt|dd]dt[S]dd[#|X|form|a|H|K|N|O|Q]menu[li]dir[li]pre[ZA]hr[]blockquote[#|X|form|a|H|K|N|O|Q]address[S|p]center[#|X|form|a|H|K|N|O|Q]noframes[#|X|form|a|H|K|N|O|Q]isindex[]fieldset[#|legend|X|form|a|H|K|N|O|Q]legend[S]table[caption|col|colgroup|thead|tfoot|tbody|tr]caption[S]col[]colgroup[col]thead[tr]tr[th|td]th[#|X|form|a|H|K|N|O|Q]form[#|X|a|H|K|N|O|Q]noscript[#|X|form|a|H|K|N|O|Q]td[#|X|form|a|H|K|N|O|Q]tfoot[tr]tbody[tr]area[]base[]body[#|X|form|a|H|K|N|O|Q]");
tinymce.dom.Schema=function(){this.isValid=function(o,q){var g=l[o];return!!(g&&(!q||g[q]))}}})();
(function(l){l.dom.RangeUtils=function(o){this.walk=function(q,g){function k(j,a,i){for(var m=[];j&&j!=i;j=j[a])m.push(j);return m}function b(j,a){do{if(j.parentNode==a)return j;j=j.parentNode}while(j)}function h(j,a,i){var m=i?"nextSibling":"previousSibling";v=j;for(f=v.parentNode;v&&v!=a;v=f){f=v.parentNode;d=k(v==j?v:v[m],m);if(d.length){i||d.reverse();g(d)}}}var e=q.startContainer,n=q.startOffset,r=q.endContainer,u=q.endOffset,v,f,d,c;c=o.select("td.mceSelected,th.mceSelected");if(c.length>0)l.each(c,
function(j){g([j])});else{if(e.nodeType==1&&e.hasChildNodes())e=e.childNodes[n];if(r.nodeType==1&&r.hasChildNodes())r=r.childNodes[Math.min(n==u?u:u-1,r.childNodes.length-1)];u=o.findCommonAncestor(e,r);if(e==r)return g([e]);for(v=e;v;v=v.parentNode){if(v==r)return h(e,u,true);if(v==u)break}for(v=r;v;v=v.parentNode){if(v==e)return h(r,u);if(v==u)break}n=b(e,u)||e;u=b(r,u)||r;h(e,n,true);d=k(n==e?n:n.nextSibling,"nextSibling",u==r?u.nextSibling:u);d.length&&g(d);h(r,u)}}};l.dom.RangeUtils.compareRanges=
function(o,q){if(o&&q)if(o.item||o.duplicate){if(o.item&&q.item&&o.item(0)===q.item(0))return true;if(o.isEqual&&q.isEqual&&q.isEqual(o))return true}else return o.startContainer==q.startContainer&&o.startOffset==q.startOffset;return false}})(tinymce);
(function(l){var o=l.DOM,q=l.is;l.create("tinymce.ui.Control",{Control:function(g,k){this.id=g;this.settings=k=k||{};this.rendered=false;this.onRender=new l.util.Dispatcher(this);this.classPrefix="";this.scope=k.scope||this;this.active=this.disabled=0},setDisabled:function(g){var k;if(g!=this.disabled){if((k=o.get(this.id))&&this.settings.unavailable_prefix)if(g){this.prevTitle=k.title;k.title=this.settings.unavailable_prefix+": "+k.title}else k.title=this.prevTitle;this.setState("Disabled",g);this.setState("Enabled",
!g);this.disabled=g}},isDisabled:function(){return this.disabled},setActive:function(g){if(g!=this.active){this.setState("Active",g);this.active=g}},isActive:function(){return this.active},setState:function(g,k){var b=o.get(this.id);g=this.classPrefix+g;k?o.addClass(b,g):o.removeClass(b,g)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(g){o.setHTML(g,this.renderHTML())},postRender:function(){var g;if(q(this.disabled)){g=this.disabled;this.disabled=-1;this.setDisabled(g)}if(q(this.active)){g=
this.active;this.active=-1;this.setActive(g)}},remove:function(){o.remove(this.id);this.destroy()},destroy:function(){l.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(l,o){this.parent(l,o);this.controls=[];this.lookup={}},add:function(l){this.lookup[l.id]=l;this.controls.push(l);return l},get:function(l){return this.lookup[l]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(l,o){this.parent(l,o);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});
(function(l){var o=l.is;l.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(q,g){this.parent(q,g);this.classPrefix="mceMenuItem"},setSelected:function(q){this.setState("Selected",q);this.selected=q},isSelected:function(){return this.selected},postRender:function(){this.parent();o(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(l){var o=l.DOM,q=l.walk;l.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(g,k){this.parent(g,k);this.items={};this.collapsed=false;this.menuCount=0;this.onAddItem=new l.util.Dispatcher(this)},expand:function(g){g&&q(this,function(k){k.expand&&k.expand()},"items",this);this.collapsed=false},collapse:function(g){g&&q(this,function(k){k.collapse&&k.collapse()},"items",this);this.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(g){g.settings||(g=new l.ui.MenuItem(g.id||
o.uniqueId(),g));this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:true})},addMenu:function(g){g.collapse||(g=this.createMenu(g));this.menuCount++;return this.add(g)},hasMenus:function(){return this.menuCount!==0},remove:function(g){delete this.items[g.id]},removeAll:function(){q(this,function(g){g.removeAll?g.removeAll():g.remove();g.destroy()},"items",this);this.items={}},createMenu:function(g){g=new l.ui.Menu(g.id||o.uniqueId(),g);g.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return g}})})(tinymce);
(function(l){var o=l.is,q=l.DOM,g=l.each,k=l.dom.Event,b=l.dom.Element;l.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,e){e=e||{};e.container=e.container||q.doc.body;e.offset_x=e.offset_x||0;e.offset_y=e.offset_y||0;e.vp_offset_x=e.vp_offset_x||0;e.vp_offset_y=e.vp_offset_y||0;if(o(e.icons)&&!e.icons)e["class"]+=" mceNoIcons";this.parent(h,e);this.onShowMenu=new l.util.Dispatcher(this);this.onHideMenu=new l.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(h){var e=
this.settings;h.container=h.container||e.container;h.parent=this;h.constrain=h.constrain||e.constrain;h["class"]=h["class"]||e["class"];h.vp_offset_x=h.vp_offset_x||e.vp_offset_x;h.vp_offset_y=h.vp_offset_y||e.vp_offset_y;h=new l.ui.DropMenu(h.id||q.uniqueId(),h);h.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return h},update:function(){var h=this.settings,e=q.get("menu_"+this.id+"_tbl"),n=q.get("menu_"+this.id+"_co"),r,u;r=h.max_width?Math.min(e.clientWidth,h.max_width):e.clientWidth;u=
h.max_height?Math.min(e.clientHeight,h.max_height):e.clientHeight;q.boxModel?this.element.setStyles({width:r,height:u}):this.element.setStyles({width:r+2,height:u+2});h.max_width&&q.setStyle(n,"width",r);if(h.max_height){q.setStyle(n,"height",u);e.clientHeight<h.max_height&&q.setStyle(n,"overflow","hidden")}},showMenu:function(h,e,n){var r=this,u=r.settings,v,f=q.getViewPort(),d,c,j,a,i=r.classPrefix;r.collapse(1);if(!r.isMenuVisible){if(r.rendered)v=q.get("menu_"+r.id);else{v=q.add(r.settings.container,
r.renderNode());g(r.items,function(m){m.postRender()});r.element=new b("menu_"+r.id,{blocker:1,container:u.container})}l.isOpera||q.setStyles(v,{left:-65535,top:-65535});q.show(v);r.update();h+=u.offset_x||0;e+=u.offset_y||0;f.w-=4;f.h-=4;if(u.constrain){d=v.clientWidth-2;c=v.clientHeight-2;j=f.x+f.w;f=f.y+f.h;if(h+u.vp_offset_x+d>j)h=n?n-d:Math.max(0,j-u.vp_offset_x-d);if(e+u.vp_offset_y+c>f)e=Math.max(0,f-u.vp_offset_y-c)}q.setStyles(v,{left:h,top:e});r.element.update();r.isMenuVisible=1;r.mouseClickFunc=
k.add(v,"click",function(m){var p;if((m=m.target)&&(m=q.getParent(m,"tr"))&&!q.hasClass(m,i+"ItemSub")){p=r.items[m.id];if(!p.isDisabled()){for(a=r;a;){a.hideMenu&&a.hideMenu();a=a.settings.parent}p.settings.onclick&&p.settings.onclick(m);return k.cancel(m)}}});if(r.hasMenus())r.mouseOverFunc=k.add(v,"mouseover",function(m){var p;if((m=m.target)&&(m=q.getParent(m,"tr"))){p=r.items[m.id];r.lastMenu&&r.lastMenu.collapse(1);if(!p.isDisabled())if(m&&q.hasClass(m,i+"ItemSub")){m=q.getRect(m);p.showMenu(m.x+
m.w-2,m.y-2,m.x);r.lastMenu=p;q.addClass(q.get(p.id).firstChild,i+"ItemActive")}}});r.onShowMenu.dispatch(r);if(u.keyboard_focus){k.add(v,"keydown",r._keyHandler,r);q.select("a","menu_"+r.id)[0].focus();r._focusIdx=0}}},hideMenu:function(h){var e=q.get("menu_"+this.id);if(this.isMenuVisible){k.remove(e,"mouseover",this.mouseOverFunc);k.remove(e,"click",this.mouseClickFunc);k.remove(e,"keydown",this._keyHandler);q.hide(e);this.isMenuVisible=0;h||this.collapse(1);this.element&&this.element.hide();if(h=
q.get(this.id))q.removeClass(h.firstChild,this.classPrefix+"ItemActive");this.onHideMenu.dispatch(this)}},add:function(h){var e;h=this.parent(h);if(this.isRendered&&(e=q.get("menu_"+this.id)))this._add(q.select("tbody",e)[0],h);return h},collapse:function(h){this.parent(h);this.hideMenu(1)},remove:function(h){q.remove(h.id);this.destroy();return this.parent(h)},destroy:function(){var h=q.get("menu_"+this.id);k.remove(h,"mouseover",this.mouseOverFunc);k.remove(h,"click",this.mouseClickFunc);this.element&&
this.element.remove();q.remove(h)},renderNode:function(){var h=this,e=h.settings,n,r,u;u=q.create("div",{id:"menu_"+h.id,"class":e["class"],style:"position:absolute;left:0;top:0;z-index:200000"});r=q.add(u,"div",{id:"menu_"+h.id+"_co","class":h.classPrefix+(e["class"]?" "+e["class"]:"")});h.element=new b("menu_"+h.id,{blocker:1,container:e.container});e.menu_line&&q.add(r,"span",{"class":h.classPrefix+"Line"});e=q.add(r,"table",{id:"menu_"+h.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});n=q.add(e,
"tbody");g(h.items,function(v){h._add(n,v)});h.rendered=true;return u},_keyHandler:function(h){function e(r){r=n._focusIdx+r;var u=q.select("a","menu_"+n.id)[r];if(u){n._focusIdx=r;u.focus()}}var n=this;switch(h.keyCode){case 38:e(-1);break;case 40:e(1);break;case 27:return this.hideMenu()}},_add:function(h,e){var n,r=e.settings,u,v,f=this.classPrefix;if(r.separator){u=q.add(h,"tr",{id:e.id,"class":f+"ItemSeparator"});q.add(u,"td",{"class":f+"ItemSeparator"});if(n=u.previousSibling)q.addClass(n,"mceLast")}else{n=
u=q.add(h,"tr",{id:e.id,"class":f+"Item "+f+"ItemEnabled"});n=v=q.add(n,"td");n=q.add(n,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});q.addClass(v,r["class"]);v=q.add(n,"span",{"class":"mceIcon"+(r.icon?" mce_"+r.icon:"")});r.icon_src&&q.add(v,"img",{src:r.icon_src});n=q.add(n,r.element||"span",{"class":"mceText",title:e.settings.title},e.settings.title);e.settings.style&&q.setAttrib(n,"style",e.settings.style);h.childNodes.length==1&&q.addClass(u,"mceFirst");if((n=
u.previousSibling)&&q.hasClass(n,f+"ItemSeparator"))q.addClass(u,"mceFirst");e.collapse&&q.addClass(u,f+"ItemSub");if(n=u.previousSibling)q.removeClass(n,"mceLast");q.addClass(u,"mceLast")}}})})(tinymce);
(function(l){var o=l.DOM;l.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(q,g){this.parent(q,g);this.classPrefix="mceButton"},renderHTML:function(){var q=this.classPrefix,g=this.settings,k,b;b=o.encode(g.label||"");k='<a id="'+this.id+'" href="javascript:;" class="'+q+" "+q+"Enabled "+g["class"]+(b?" "+q+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+o.encode(g.title)+'">';k+=g.image?'<img class="mceIcon" src="'+g.image+'" />'+b+"</a>":'<span class="mceIcon '+
g["class"]+'"></span>'+(b?'<span class="'+q+'Label">'+b+"</span>":"")+"</a>";return k},postRender:function(){var q=this,g=q.settings;l.dom.Event.add(q.id,"click",function(k){if(!q.isDisabled())return g.onclick.call(g.scope,k)})}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event,g=l.each,k=l.util.Dispatcher;l.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,h){this.parent(b,h);this.items=[];this.onChange=new k(this);this.onPostRender=new k(this);this.onAdd=new k(this);this.onRenderMenu=new l.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(b){var h=this,e,n;if(b==undefined)return h.selectByIndex(-1);n=b&&b.call?b:function(r){return r==b};if(b!=h.selectedValue){g(h.items,function(r,u){if(n(r.value)){e=
1;h.selectByIndex(u);return false}});e||h.selectByIndex(-1)}},selectByIndex:function(b){var h,e;if(b!=this.selectedIndex){h=o.get(this.id+"_text");if(e=this.items[b]){this.selectedValue=e.value;this.selectedIndex=b;o.setHTML(h,o.encode(e.title));o.removeClass(h,"mceTitle")}else{o.setHTML(h,o.encode(this.settings.title));o.addClass(h,"mceTitle");this.selectedValue=this.selectedIndex=null}}},add:function(b,h,e){e=e||{};e=l.extend(e,{title:b,value:h});this.items.push(e);this.onAdd.dispatch(this,e)},
getLength:function(){return this.items.length},renderHTML:function(){var b="";b=this.settings;var h=this.classPrefix;b='<table id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+h+" "+h+"Enabled"+(b["class"]?" "+b["class"]:"")+'"><tbody><tr>';b+="<td>"+o.createHTML("a",{id:this.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},o.encode(this.settings.title))+"</td>";b+="<td>"+o.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;",
"class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";b+="</tr></tbody></table>";return b},showMenu:function(){var b=this,h,e=o.get(this.id),n;if(!(b.isDisabled()||b.items.length==0)){if(b.menu&&b.menu.isMenuVisible)return b.hideMenu();if(!b.isMenuRendered){b.renderMenu();b.isMenuRendered=true}o.getPos(this.settings.menu_container);h=o.getPos(e);n=b.menu;n.settings.offset_x=h.x;n.settings.offset_y=h.y;n.settings.keyboard_focus=!l.isOpera;b.oldID&&n.items[b.oldID].setSelected(0);
g(b.items,function(r){if(r.value===b.selectedValue){n.items[r.id].setSelected(1);b.oldID=r.id}});n.showMenu(0,e.clientHeight);q.add(o.doc,"mousedown",b.hideMenu,b);o.addClass(b.id,b.classPrefix+"Selected")}},hideMenu:function(b){if(this.menu&&this.menu.isMenuVisible)if(!(b&&b.type=="mousedown"&&(b.target.id==this.id+"_text"||b.target.id==this.id+"_open")))if(!b||!o.getParent(b.target,".mceMenu")){o.removeClass(this.id,this.classPrefix+"Selected");q.remove(o.doc,"mousedown",this.hideMenu,this);this.menu.hideMenu()}},
renderMenu:function(){var b=this,h;h=b.settings.control_manager.createDropMenu(b.id+"_menu",{menu_line:1,"class":b.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});h.onHideMenu.add(b.hideMenu,b);h.add({title:b.settings.title,"class":"mceMenuItemTitle",onclick:function(){b.settings.onselect("")!==false&&b.select("")}});g(b.items,function(e){if(e.value===undefined)h.add({title:e.title,"class":"mceMenuItemTitle",onclick:function(){b.settings.onselect("")!==false&&b.select("")}});else{e.id=
o.uniqueId();e.onclick=function(){b.settings.onselect(e.value)!==false&&b.select(e.value)};h.add(e)}});b.onRenderMenu.dispatch(b,h);b.menu=h},postRender:function(){var b=this,h=b.classPrefix;q.add(b.id,"click",b.showMenu,b);q.add(b.id+"_text","focus",function(){if(!b._focused)b.keyDownHandler=q.add(b.id+"_text","keydown",function(e){var n=-1,r,u=e.keyCode;g(b.items,function(v,f){if(b.selectedValue==v.value)n=f});if(u==38)r=b.items[n-1];else if(u==40)r=b.items[n+1];else if(u==13){r=b.selectedValue;
b.selectedValue=null;b.settings.onselect(r);return q.cancel(e)}if(r){b.hideMenu();b.select(r.value)}});b._focused=1});q.add(b.id+"_text","blur",function(){q.remove(b.id+"_text","keydown",b.keyDownHandler);b._focused=0});if(l.isIE6||!o.boxModel){q.add(b.id,"mouseover",function(){o.hasClass(b.id,h+"Disabled")||o.addClass(b.id,h+"Hover")});q.add(b.id,"mouseout",function(){o.hasClass(b.id,h+"Disabled")||o.removeClass(b.id,h+"Hover")})}b.onPostRender.dispatch(b,o.get(b.id))},destroy:function(){this.parent();
q.clear(this.id+"_text");q.clear(this.id+"_open")}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event,g=l.each;l.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(k,b){this.parent(k,b);this.classPrefix="mceNativeListBox"},setDisabled:function(k){o.get(this.id).disabled=k},isDisabled:function(){return o.get(this.id).disabled},select:function(k){var b=this,h,e;if(k==undefined)return b.selectByIndex(-1);e=k&&k.call?k:function(n){return n==k};if(k!=b.selectedValue){g(b.items,function(n,r){if(e(n.value)){h=1;b.selectByIndex(r);return false}});
h||b.selectByIndex(-1)}},selectByIndex:function(k){o.get(this.id).selectedIndex=k+1;this.selectedValue=this.items[k]?this.items[k].value:null},add:function(k,b,h){h=h||{};h.value=b;this.isRendered()&&o.add(o.get(this.id),"option",h,k);k={title:k,value:b,attribs:h};this.items.push(k);this.onAdd.dispatch(this,k)},getLength:function(){return this.items.length},renderHTML:function(){var k;k=o.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(b){k+=o.createHTML("option",
{value:b.value},b.title)});return k=o.createHTML("select",{id:this.id,"class":"mceNativeListBox"},k)},postRender:function(){function k(h){if((h=b.items[h.target.selectedIndex-1])&&(h=h.value)){b.onChange.dispatch(b,h);b.settings.onselect&&b.settings.onselect(h)}}var b=this;b.rendered=true;q.add(b.id,"change",k);q.add(b.id,"keydown",function(h){var e;q.remove(b.id,"change",void 0);e=q.add(b.id,"blur",function(){q.add(b.id,"change",k);q.remove(b.id,"blur",e)});if(h.keyCode==13||h.keyCode==32){k(h);
return q.cancel(h)}});b.onPostRender.dispatch(b,o.get(b.id))}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event;l.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,k){this.parent(g,k);this.onRenderMenu=new l.util.Dispatcher(this);k.menu_container=k.menu_container||o.doc.body},showMenu:function(){var g,k=o.get(this.id),b;if(!this.isDisabled()){if(!this.isMenuRendered){this.renderMenu();this.isMenuRendered=true}if(this.isMenuVisible)return this.hideMenu();o.getPos(this.settings.menu_container);g=o.getPos(k);b=this.menu;b.settings.offset_x=g.x;b.settings.offset_y=
g.y;b.settings.vp_offset_x=g.x;b.settings.vp_offset_y=g.y;b.settings.keyboard_focus=this._focused;b.showMenu(0,k.clientHeight);q.add(o.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var g;g=this.settings.control_manager.createDropMenu(this.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:this.settings.icons});g.onHideMenu.add(this.hideMenu,this);this.onRenderMenu.dispatch(this,g);this.menu=g},hideMenu:function(g){var k=this;
if(!(g&&g.type=="mousedown"&&o.getParent(g.target,function(b){return b.id===k.id||b.id===k.id+"_open"}))){if(!g||!o.getParent(g.target,".mceMenu")){k.setState("Selected",0);q.remove(o.doc,"mousedown",k.hideMenu,k);k.menu&&k.menu.hideMenu()}k.isMenuVisible=0}},postRender:function(){var g=this,k=g.settings;q.add(g.id,"click",function(){if(!g.isDisabled()){k.onclick&&k.onclick(g.value);g.showMenu()}})}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event;l.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,k){this.parent(g,k);this.classPrefix="mceSplitButton"},renderHTML:function(){var g,k=this.settings,b;g="<tbody><tr>";b=k.image?o.createHTML("img ",{src:k.image,"class":"mceAction "+k["class"]}):o.createHTML("span",{"class":"mceAction "+k["class"]},"");g+="<td>"+o.createHTML("a",{id:this.id+"_action",href:"javascript:;","class":"mceAction "+k["class"],onclick:"return false;",onmousedown:"return false;",
title:k.title},b)+"</td>";b=o.createHTML("span",{"class":"mceOpen "+k["class"]});g+="<td>"+o.createHTML("a",{id:this.id+"_open",href:"javascript:;","class":"mceOpen "+k["class"],onclick:"return false;",onmousedown:"return false;",title:k.title},b)+"</td>";g+="</tr></tbody>";return o.createHTML("table",{id:this.id,"class":"mceSplitButton mceSplitButtonEnabled "+k["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:k.title},g)},postRender:function(){var g=this,k=g.settings;k.onclick&&
q.add(g.id+"_action","click",function(){g.isDisabled()||k.onclick(g.value)});q.add(g.id+"_open","click",g.showMenu,g);q.add(g.id+"_open","focus",function(){g._focused=1});q.add(g.id+"_open","blur",function(){g._focused=0});if(l.isIE6||!o.boxModel){q.add(g.id,"mouseover",function(){o.hasClass(g.id,"mceSplitButtonDisabled")||o.addClass(g.id,"mceSplitButtonHover")});q.add(g.id,"mouseout",function(){o.hasClass(g.id,"mceSplitButtonDisabled")||o.removeClass(g.id,"mceSplitButtonHover")})}},destroy:function(){this.parent();
q.clear(this.id+"_action");q.clear(this.id+"_open")}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event,g=l.is,k=l.each;l.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,h){this.parent(b,h);this.settings=h=l.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new l.util.Dispatcher(this);this.onHideMenu=new l.util.Dispatcher(this);this.value=h.default_color},showMenu:function(){var b=this,h,e;if(!b.isDisabled()){if(!b.isMenuRendered){b.renderMenu();b.isMenuRendered=true}if(b.isMenuVisible)return b.hideMenu();h=o.get(b.id);o.show(b.id+"_menu");o.addClass(h,"mceSplitButtonSelected");e=o.getPos(h);o.setStyles(b.id+"_menu",{left:e.x,top:e.y+h.clientHeight,zIndex:2E5});h=0;q.add(o.doc,"mousedown",b.hideMenu,b);b.onShowMenu.dispatch(b);
if(b._focused){b._keyHandler=q.add(b.id+"_menu","keydown",function(n){n.keyCode==27&&b.hideMenu()});o.select("a",b.id+"_menu")[0].focus()}b.isMenuVisible=1}},hideMenu:function(b){var h=this;if(!(b&&b.type=="mousedown"&&o.getParent(b.target,function(e){return e.id===h.id+"_open"}))){if(!b||!o.getParent(b.target,".mceSplitButtonMenu")){o.removeClass(h.id,"mceSplitButtonSelected");q.remove(o.doc,"mousedown",h.hideMenu,h);q.remove(h.id+"_menu","keydown",h._keyHandler);o.hide(h.id+"_menu")}h.onHideMenu.dispatch(h);
h.isMenuVisible=0}},renderMenu:function(){var b=this,h,e=0,n=b.settings,r,u,v,f;f=o.add(n.menu_container,"div",{id:b.id+"_menu","class":n.menu_class+" "+n["class"],style:"position:absolute;left:0;top:-1000px;"});h=o.add(f,"div",{"class":n["class"]+" mceSplitButtonMenu"});o.add(h,"span",{"class":"mceMenuLine"});r=o.add(h,"table",{"class":"mceColorSplitMenu"});u=o.add(r,"tbody");e=0;k(g(n.colors,"array")?n.colors:n.colors.split(","),function(d){d=d.replace(/^#/,"");if(!e--){v=o.add(u,"tr");e=n.grid_width-
1}r=o.add(v,"td");r=o.add(r,"a",{href:"javascript:;",style:{backgroundColor:"#"+d},_mce_color:"#"+d})});if(n.more_colors_func){r=o.add(u,"tr");r=o.add(r,"td",{colspan:n.grid_width,"class":"mceMoreColors"});r=o.add(r,"a",{id:b.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},n.more_colors_title);q.add(r,"click",function(d){n.more_colors_func.call(n.more_colors_scope||this);return q.cancel(d)})}o.addClass(h,"mceColorSplitMenu");q.add(b.id+"_menu","click",function(d){var c;
d=d.target;if(d.nodeName=="A"&&(c=d.getAttribute("_mce_color")))b.setColor(c);return q.cancel(d)});return f},setColor:function(b){o.setStyle(this.id+"_preview","backgroundColor",b);this.value=b;this.hideMenu();this.settings.onselect(b)},postRender:function(){var b=this.id;this.parent();o.add(b+"_action","div",{id:b+"_preview","class":"mceColorPreview"});o.setStyle(this.id+"_preview","backgroundColor",this.value)},destroy:function(){this.parent();q.clear(this.id+"_menu");q.clear(this.id+"_more");o.remove(this.id+
"_menu")}})})(tinymce);
tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var l="",o,q,g=tinymce.DOM,k=this.settings,b,h,e,n;n=this.controls;for(b=0;b<n.length;b++){q=n[b];h=n[b-1];e=n[b+1];if(b===0){o="mceToolbarStart";if(q.Button)o+=" mceToolbarStartButton";else if(q.SplitButton)o+=" mceToolbarStartSplitButton";else if(q.ListBox)o+=" mceToolbarStartListBox";l+=g.createHTML("td",{"class":o},g.createHTML("span",null,"<!-- IE --\>"))}if(h&&q.ListBox)if(h.Button||h.SplitButton)l+=g.createHTML("td",
{"class":"mceToolbarEnd"},g.createHTML("span",null,"<!-- IE --\>"));l+=g.stdMode?'<td style="position: relative">'+q.renderHTML()+"</td>":"<td>"+q.renderHTML()+"</td>";if(e&&q.ListBox)if(e.Button||e.SplitButton)l+=g.createHTML("td",{"class":"mceToolbarStart"},g.createHTML("span",null,"<!-- IE --\>"))}o="mceToolbarEnd";if(q.Button)o+=" mceToolbarEndButton";else if(q.SplitButton)o+=" mceToolbarEndSplitButton";else if(q.ListBox)o+=" mceToolbarEndListBox";l+=g.createHTML("td",{"class":o},g.createHTML("span",
null,"<!-- IE --\>"));return g.createHTML("table",{id:this.id,"class":"mceToolbar"+(k["class"]?" "+k["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||""},"<tbody><tr>"+l+"</tr></tbody>")}});
(function(l){l.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new l.util.Dispatcher(this),get:function(o){return this.lookup[o]},requireLangPack:function(o){var q=l.settings;q&&q.language&&l.ScriptLoader.add(this.urls[o]+"/langs/"+q.language+".js")},add:function(o,q){this.items.push(q);this.lookup[o]=q;this.onAdd.dispatch(this,o,q);return q},load:function(o,q,g,k){if(!this.urls[o]){if(q.indexOf("/")!=0&&q.indexOf("://")==-1)q=l.baseURL+"/"+q;this.urls[o]=q.substring(0,q.lastIndexOf("/"));
l.ScriptLoader.add(q,g,k)}}});l.PluginManager=new l.AddOnManager;l.ThemeManager=new l.AddOnManager})(tinymce);
(function(l){var o=l.each,q=l.extend,g=l.DOM,k=l.dom.Event,b=l.explode,h=l.util.Dispatcher,e=0;l.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(l.documentBaseURL)||(l.documentBaseURL+="/");l.baseURL=(new l.util.URI(l.documentBaseURL)).toAbsolute(l.baseURL);l.baseURI=new l.util.URI(l.baseURL);l.onBeforeUnload=new h(l);k.add(window,"beforeunload",function(n){l.onBeforeUnload.dispatch(l,n)});l.onAddEditor=new h(l);l.onRemoveEditor=new h(l);l.EditorManager=
q(l,{editors:[],i18n:{},activeEditor:null,init:function(n){function r(c,j,a){var i=c[j];if(i){if(l.is(i,"string")){a=(a=i.replace(/\.\w+$/,""))?l.resolve(a):0;i=l.resolve(i)}return i.apply(a||this,Array.prototype.slice.call(arguments,2))}}var u=this,v,f=[],d;n=q({theme:"simple",language:"en"},n);u.settings=n;k.add(document,"init",function(){var c,j;r(n,"onpageload");switch(n.mode){case "exact":c=n.elements||"";c.length>0&&o(b(c),function(a){if(g.get(a)){d=new l.Editor(a,n);f.push(d);d.render(1)}else o(document.forms,
function(i){o(i.elements,function(m){if(m.name===a){a="mce_editor_"+e++;g.setAttrib(m,"id",a);d=new l.Editor(a,n);f.push(d);d.render(1)}})})});break;case "textareas":case "specific_textareas":o(g.select("textarea"),function(a){if(!(n.editor_deselector&&(n.editor_deselector.constructor===RegExp?n.editor_deselector.test(a.className):g.hasClass(a,n.editor_deselector))))if(!n.editor_selector||(n.editor_selector.constructor===RegExp?n.editor_selector.test(a.className):g.hasClass(a,n.editor_selector))){v=
g.get(a.name);if(!a.id&&!v)a.id=a.name;if(!a.id||u.get(a.id))a.id=g.uniqueId();d=new l.Editor(a.id,n);f.push(d);d.render(1)}})}if(n.oninit){c=j=0;o(f,function(a){j++;if(a.initialized)c++;else a.onInit.add(function(){c++;c==j&&r(n,"oninit")});c==j&&r(n,"oninit")})}})},get:function(n){if(n===void 0)return this.editors;return this.editors[n]},getInstanceById:function(n){return this.get(n)},add:function(n){var r=this.editors;r[n.id]=n;r.push(n);this._setActive(n);this.onAddEditor.dispatch(this,n);return n},
remove:function(n){var r,u=this.editors;if(!u[n.id])return null;delete u[n.id];for(r=0;r<u.length;r++)if(u[r]==n){u.splice(r,1);break}this.activeEditor==n&&this._setActive(u[0]);n.destroy();this.onRemoveEditor.dispatch(this,n);return n},execCommand:function(n,r,u){var v=this.get(u),f;switch(n){case "mceFocus":v.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(u)||(new l.Editor(u,this.settings)).render();return true;case "mceAddFrameControl":f=u.window;f.tinyMCE=tinyMCE;f.tinymce=
l;l.DOM.doc=f.document;l.DOM.win=f;v=new l.Editor(u.element_id,u);v.render();if(l.isIE){var d=function(){v.destroy();f.detachEvent("onunload",d);f=f.tinyMCE=f.tinymce=null};f.attachEvent("onunload",d)}u.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":v&&v.remove();return true;case "mceToggleEditor":if(!v){this.execCommand("mceAddControl",0,u);return true}v.isHidden()?v.show():v.hide();return true}if(this.activeEditor)return this.activeEditor.execCommand(n,r,u);return false},
execInstanceCommand:function(n,r,u,v){if(n=this.get(n))return n.execCommand(r,u,v);return false},triggerSave:function(){o(this.editors,function(n){n.save()})},addI18n:function(n,r){var u=this.i18n;l.is(n,"string")?o(r,function(v,f){u[n+"."+f]=v}):o(n,function(v,f){o(v,function(d,c){o(d,function(j,a){if(c==="common")u[f+"."+a]=j;else u[f+"."+c+"."+a]=j})})})},_setActive:function(n){this.selectedInstance=this.activeEditor=n}})})(tinymce);
(function(l){var o=l.DOM,q=l.dom.Event,g=l.extend,k=l.util.Dispatcher,b=l.each,h=l.isGecko,e=l.isIE,n=l.is,r=l.ThemeManager,u=l.PluginManager,v=l.explode;l.create("tinymce.Editor",{Editor:function(f,d){var c=this;c.id=c.editorId=f;c.execCommands={};c.queryStateCommands={};c.queryValueCommands={};c.isNotDirty=false;c.plugins={};b(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp",
"onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(j){c[j]=new k(c)});c.settings=d=g({id:f,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:l.documentBaseURL,
add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:l.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",
apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",
hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true},d);c.documentBaseURI=new l.util.URI(d.document_base_url||l.documentBaseURL,{base_uri:tinyMCE.baseURI});c.baseURI=l.baseURI;c.execCallback("setup",c)},render:function(){var f=this,d=f.settings,c=f.id,j=l.ScriptLoader;if(q.domLoaded){tinyMCE.settings=d;if(f.getElement())if(!l.isIDevice){!/TEXTAREA|INPUT/i.test(f.getElement().nodeName)&&
d.hidden_input&&o.getParent(c,"form")&&o.insertAfter(o.create("input",{type:"hidden",name:c}),c);if(l.WindowManager)f.windowManager=new l.WindowManager(f);d.encoding=="xml"&&f.onGetContent.add(function(a,i){if(i.save)i.content=o.encode(i.content)});d.add_form_submit_trigger&&f.onSubmit.addToTop(function(){if(f.initialized){f.save();f.isNotDirty=1}});if(d.add_unload_trigger)f._beforeUnload=tinyMCE.onBeforeUnload.add(function(){f.initialized&&!f.destroyed&&!f.isHidden()&&f.save({format:"raw",no_events:true})});
l.addUnload(f.destroy,f);d.submit_patch&&f.onBeforeRenderUI.add(function(){var a=f.getElement().form;if(a)if(!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length){f.formElement=a;a._mceOldSubmit=a.submit;a.submit=function(){l.triggerSave();f.isNotDirty=1;return f.formElement._mceOldSubmit(f.formElement)}}a=null}});(function(){d.language&&j.add(l.baseURL+"/langs/"+d.language+".js");d.theme&&d.theme.charAt(0)!="-"&&!r.urls[d.theme]&&r.load(d.theme,"themes/"+d.theme+"/editor_template"+l.suffix+
".js");b(v(d.plugins),function(a){a&&a.charAt(0)!="-"&&!u.urls[a]&&a!="safari"&&u.load(a,"plugins/"+a+"/editor_plugin"+l.suffix+".js")});j.loadQueue(function(){f.removed||f.init()})})()}}else q.add(document,"init",function(){f.render()})},init:function(){var f=this,d=f.settings,c,j,a=f.getElement(),i,m,p;l.add(f);if(d.theme){d.theme=d.theme.replace(/-/,"");i=r.get(d.theme);f.theme=new i;if(f.theme.init&&d.init_theme)f.theme.init(f,r.urls[d.theme]||l.documentBaseURL.replace(/\/$/,""))}b(v(d.plugins.replace(/\-/g,
"")),function(t){var s=u.get(t),x=u.urls[t]||l.documentBaseURL.replace(/\/$/,"");if(s){s=new s(f,x);f.plugins[t]=s;s.init&&s.init(f,x)}});if(d.popup_css!==false)d.popup_css=d.popup_css?f.documentBaseURI.toAbsolute(d.popup_css):f.baseURI.toAbsolute("themes/"+d.theme+"/skins/"+d.skin+"/dialog.css");if(d.popup_css_add)d.popup_css+=","+f.documentBaseURI.toAbsolute(d.popup_css_add);f.controlManager=new l.ControlManager(f);if(d.custom_undo_redo){f.onBeforeExecCommand.add(function(t,s,x,F,y){if(s!="Undo"&&
s!="Redo"&&s!="mceRepaint"&&(!y||!y.skip_undo))f.undoManager.hasUndo()||f.undoManager.add()});f.onExecCommand.add(function(t,s,x,F,y){if(s!="Undo"&&s!="Redo"&&s!="mceRepaint"&&(!y||!y.skip_undo))f.undoManager.add()})}f.onExecCommand.add(function(t,s){/^(FontName|FontSize)$/.test(s)||f.nodeChanged()});if(h){p=function(t,s){if(!s||!s.initial)f.execCommand("mceRepaint")};f.onUndo.add(p);f.onRedo.add(p);f.onSetContent.add(p)}f.onBeforeRenderUI.dispatch(f,f.controlManager);if(d.render_ui){c=d.width||a.style.width||
a.offsetWidth;j=d.height||a.style.height||a.offsetHeight;f.orgDisplay=a.style.display;p=/^[0-9\.]+(|px)$/i;if(p.test(""+c))c=Math.max(parseInt(c)+(i.deltaWidth||0),100);if(p.test(""+j))j=Math.max(parseInt(j)+(i.deltaHeight||0),100);i=f.theme.renderUI({targetNode:a,width:c,height:j,deltaWidth:d.delta_width,deltaHeight:d.delta_height});f.editorContainer=i.editorContainer}if(document.domain&&location.hostname!=document.domain)l.relaxedDomain=document.domain;o.setStyles(i.sizeContainer||i.editorContainer,
{width:c,height:j});j=(i.iframeHeight||j)+(typeof j=="number"?i.deltaHeight||0:"");if(j<100)j=100;f.iframeHTML=d.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(d.document_base_url!=l.documentBaseURL)f.iframeHTML+='<base href="'+f.documentBaseURI.getURI()+'" />';f.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(l.relaxedDomain)f.iframeHTML+='<script type="text/javascript">document.domain = "'+
l.relaxedDomain+'";<\/script>';c=d.body_id||"tinymce";if(c.indexOf("=")!=-1){c=f.getParam("body_id","","hash");c=c[f.id]||c}d=d.body_class||"";if(d.indexOf("=")!=-1){d=f.getParam("body_class","","hash");d=d[f.id]||""}f.iframeHTML+='</head><body id="'+c+'" class="mceContentBody '+d+'"></body></html>';if(l.relaxedDomain)if(e||l.isOpera&&parseFloat(opera.version())>=9.5)m='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';
else if(l.isOpera)m='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()';o.add(i.iframeContainer,"iframe",{id:f.id+"_ifr",src:m||'javascript:""',frameBorder:"0",style:{width:"100%",height:j}});f.contentAreaContainer=i.iframeContainer;o.get(i.editorContainer).style.display=f.orgDisplay;o.get(f.id).style.display="none";if(!e||!l.relaxedDomain)f.setupIframe();a=i=null},setupIframe:function(){var f=this,d=f.settings;o.get(f.id);var c=f.getDoc(),
j;if(!e||!l.relaxedDomain){c.open();c.write(f.iframeHTML);c.close()}if(!e)try{if(!d.readonly)c.designMode="On"}catch(a){}if(e){j=f.getBody();o.hide(j);if(!d.readonly)j.contentEditable=true;o.show(j)}f.dom=new l.dom.DOMUtils(f.getDoc(),{keep_values:true,url_converter:f.convertURL,url_converter_scope:f,hex_colors:d.force_hex_style_colors,class_filter:d.class_filter,update_styles:1,fix_ie_paragraphs:1,valid_styles:d.valid_styles});f.schema=new l.dom.Schema;f.serializer=new l.dom.Serializer(g(d,{valid_elements:d.verify_html===
false?"*[*]":d.valid_elements,dom:f.dom,schema:f.schema}));f.selection=new l.dom.Selection(f.dom,f.getWin(),f.serializer);f.formatter=new l.Formatter(this);f.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",
styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b"}],italic:[{inline:"em"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i"}],underline:[{inline:"span",styles:{textDecoration:"underline"},
exact:true},{inline:"u"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"u"}],forecolor:{inline:"span",styles:{color:"%value"}},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"}},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",
remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});b("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){f.formatter.register(t,{block:t,remove:"all"})});f.formatter.register(f.settings.formats);f.undoManager=new l.UndoManager(f);f.undoManager.onAdd.add(function(t,s){if(!s.initial)return f.onChange.dispatch(f,
s,t)});f.undoManager.onUndo.add(function(t,s){return f.onUndo.dispatch(f,s,t)});f.undoManager.onRedo.add(function(t,s){return f.onRedo.dispatch(f,s,t)});f.forceBlocks=new l.ForceBlocks(f,{forced_root_block:d.forced_root_block});f.editorCommands=new l.EditorCommands(f);f.serializer.onPreProcess.add(function(t,s){return f.onPreProcess.dispatch(f,s,t)});f.serializer.onPostProcess.add(function(t,s){return f.onPostProcess.dispatch(f,s,t)});f.onPreInit.dispatch(f);if(!d.gecko_spellcheck)f.getBody().spellcheck=
0;d.readonly||f._addEvents();f.controlManager.onPostRender.dispatch(f,f.controlManager);f.onPostRender.dispatch(f);if(d.directionality)f.getBody().dir=d.directionality;if(d.nowrap)f.getBody().style.whiteSpace="nowrap";if(d.custom_elements){var i=function(t,s){b(v(d.custom_elements),function(x){var F;if(x.indexOf("~")===0){x=x.substring(1);F="span"}else F="div";s.content=s.content.replace(RegExp("<("+x+")([^>]*)>","g"),"<"+F+' _mce_name="$1"$2>');s.content=s.content.replace(RegExp("</("+x+")>","g"),
"</"+F+">")})};f.onBeforeSetContent.add(i);f.onPostProcess.add(function(t,s){s.set&&i(t,s)})}d.handle_node_change_callback&&f.onNodeChange.add(function(t,s,x){f.execCallback("handle_node_change_callback",f.id,x,-1,-1,true,f.selection.isCollapsed())});d.save_callback&&f.onSaveContent.add(function(t,s){var x=f.execCallback("save_callback",f.id,s.content,f.getBody());if(x)s.content=x});d.onchange_callback&&f.onChange.add(function(t,s){f.execCallback("onchange_callback",f,s)});d.convert_newlines_to_brs&&
f.onBeforeSetContent.add(function(t,s){if(s.initial)s.content=s.content.replace(/\r?\n/g,"<br />")});d.fix_nesting&&e&&f.onBeforeSetContent.add(function(t,s){s.content=f._fixNesting(s.content)});d.preformatted&&f.onPostProcess.add(function(t,s){s.content=s.content.replace(/^\s*<pre.*?>/,"");s.content=s.content.replace(/<\/pre>\s*$/,"");if(s.set)s.content='<pre class="mceItemHidden">'+s.content+"</pre>"});if(d.verify_css_classes)f.serializer.attribValueFilter=function(t,s){var x,F;if(t=="class"){if(!f.classesRE){F=
f.dom.getClasses();if(F.length>0){x="";b(F,function(y){x+=(x?"|":"")+y["class"]});f.classesRE=RegExp("("+x+")","gi")}}return!f.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(s)||f.classesRE.test(s)?s:""}return s};if(d.cleanup_callback){f.onBeforeSetContent.add(function(t,s){s.content=f.execCallback("cleanup_callback","insert_to_editor",s.content,s)});f.onPreProcess.add(function(t,s){s.set&&f.execCallback("cleanup_callback","insert_to_editor_dom",s.node,s);s.get&&f.execCallback("cleanup_callback",
"get_from_editor_dom",s.node,s)});f.onPostProcess.add(function(t,s){if(s.set)s.content=f.execCallback("cleanup_callback","insert_to_editor",s.content,s);if(s.get)s.content=f.execCallback("cleanup_callback","get_from_editor",s.content,s)})}d.save_callback&&f.onGetContent.add(function(t,s){if(s.save)s.content=f.execCallback("save_callback",f.id,s.content,f.getBody())});d.handle_event_callback&&f.onEvent.add(function(t,s,x){f.execCallback("handle_event_callback",s,t,x)===false&&q.cancel(s)});f.onSetContent.add(function(){f.addVisual(f.getBody())});
d.padd_empty_editor&&f.onPostProcess.add(function(t,s){s.content=s.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(h){var m=function(t){b(t.dom.select("a"),function(s){var x=s.parentNode;t.dom.isBlock(x)&&x.lastChild===s&&t.dom.add(x,"br",{_mce_bogus:1})})};f.onExecCommand.add(function(t,s){s==="CreateLink"&&m(t)});f.onSetContent.add(f.selection.onSetContent.add(m));if(!d.readonly)try{c.designMode="Off";c.designMode="On"}catch(p){}}setTimeout(function(){if(!f.removed){f.load({initial:true,
format:d.cleanup_on_startup?"html":"raw"});f.startContent=f.getContent({format:"raw"});f.initialized=true;f.onInit.dispatch(f);f.execCallback("setupcontent_callback",f.id,f.getBody(),f.getDoc());f.execCallback("init_instance_callback",f);f.focus(true);f.nodeChanged({initial:1});d.content_css&&l.each(v(d.content_css),function(t){f.dom.loadCSS(f.documentBaseURI.toAbsolute(t))});d.auto_focus&&setTimeout(function(){var t=l.get(d.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getWin().focus()},
100)}},1)},focus:function(f){var d;d=this.settings.content_editable;var c,j=this.getDoc();if(!f){f=this.selection.getRng();if(f.item)c=f.item(0);d||this.getWin().focus();if(c&&c.ownerDocument==j){f=j.body.createControlRange();f.addElement(c);f.select()}}if(l.activeEditor!=this){if((d=l.activeEditor)!=null)d.onDeactivate.dispatch(d,this);this.onActivate.dispatch(this,d)}l._setActive(this)},execCallback:function(f){var d=this.settings[f],c;if(d){if(this.callbackLookup&&(c=this.callbackLookup[f])){d=
c.func;c=c.scope}if(n(d,"string")){c=(c=d.replace(/\.\w+$/,""))?l.resolve(c):0;d=l.resolve(d);this.callbackLookup=this.callbackLookup||{};this.callbackLookup[f]={func:d,scope:c}}return d.apply(c||this,Array.prototype.slice.call(arguments,1))}},translate:function(f){var d=this.settings.language||"en",c=l.i18n;if(!f)return"";return c[d+"."+f]||f.replace(/{\#([^}]+)\}/g,function(j,a){return c[d+"."+a]||"{#"+a+"}"})},getLang:function(f,d){return l.i18n[(this.settings.language||"en")+"."+f]||(n(d)?d:"{#"+
f+"}")},getParam:function(f,d,c){var j=l.trim;f=n(this.settings[f])?this.settings[f]:d;var a;if(c==="hash"){a={};if(n(f,"string"))b(f.indexOf("=")>0?f.split(/[;,](?![^=;,]*(?:[;,]|$))/):f.split(","),function(i){i=i.split("=");if(i.length>1)a[j(i[0])]=j(i[1]);else a[j(i[0])]=j(i)});else a=f;return a}return f},nodeChanged:function(f){var d=this.selection,c=(e?d.getNode():d.getStart())||this.getBody();if(this.initialized){f=f||{};c=e&&c.ownerDocument!=this.getDoc()?this.getBody():c;f.parents=[];this.dom.getParent(c,
function(j){if(j.nodeName=="BODY")return true;f.parents.push(j)});this.onNodeChange.dispatch(this,f?f.controlManager||this.controlManager:this.controlManager,c,d.isCollapsed(),f)}},addButton:function(f,d){this.buttons=this.buttons||{};this.buttons[f]=d},addCommand:function(f,d,c){this.execCommands[f]={func:d,scope:c||this}},addQueryStateHandler:function(f,d,c){this.queryStateCommands[f]={func:d,scope:c||this}},addQueryValueHandler:function(f,d,c){this.queryValueCommands[f]={func:d,scope:c||this}},
addShortcut:function(f,d,c,j){var a=this,i;if(!a.settings.custom_shortcuts)return false;a.shortcuts=a.shortcuts||{};if(n(c,"string")){i=c;c=function(){a.execCommand(i,false,null)}}if(n(c,"object")){i=c;c=function(){a.execCommand(i[0],i[1],i[2])}}b(v(f),function(m){var p={func:c,scope:j||this,desc:d,alt:false,ctrl:false,shift:false};b(v(m,"+"),function(t){switch(t){case "alt":case "ctrl":case "shift":p[t]=true;break;default:p.charCode=t.charCodeAt(0);p.keyCode=t.toUpperCase().charCodeAt(0)}});a.shortcuts[(p.ctrl?
"ctrl":"")+","+(p.alt?"alt":"")+","+(p.shift?"shift":"")+","+p.keyCode]=p});return true},execCommand:function(f,d,c,j){var a=this,i=0,m;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(f)&&(!j||!j.skip_focus))a.focus();m={};a.onBeforeExecCommand.dispatch(a,f,d,c,m);if(m.terminate)return false;if(a.execCallback("execcommand_callback",a.id,a.selection.getNode(),f,d,c)){a.onExecCommand.dispatch(a,f,d,c,j);return true}if(m=a.execCommands[f]){m=m.func.call(m.scope,
d,c);if(m!==true){a.onExecCommand.dispatch(a,f,d,c,j);return m}}b(a.plugins,function(p){if(p.execCommand&&p.execCommand(f,d,c)){a.onExecCommand.dispatch(a,f,d,c,j);i=1;return false}});if(i)return true;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(f,d,c)){a.onExecCommand.dispatch(a,f,d,c,j);return true}if(l.GlobalCommands.execCommand(a,f,d,c)){a.onExecCommand.dispatch(a,f,d,c,j);return true}if(a.editorCommands.execCommand(f,d,c)){a.onExecCommand.dispatch(a,f,d,c,j);return true}a.getDoc().execCommand(f,
d,c);a.onExecCommand.dispatch(a,f,d,c,j)},queryCommandState:function(f){var d;if(!this._isHidden()){if(d=this.queryStateCommands[f]){d=d.func.call(d.scope);if(d!==true)return d}d=this.editorCommands.queryCommandState(f);if(d!==-1)return d;try{return this.getDoc().queryCommandState(f)}catch(c){}}},queryCommandValue:function(f){var d;if(!this._isHidden()){if(d=this.queryValueCommands[f]){d=d.func.call(d.scope);if(d!==true)return d}d=this.editorCommands.queryCommandValue(f);if(n(d))return d;try{return this.getDoc().queryCommandValue(f)}catch(c){}}},
show:function(){o.show(this.getContainer());o.hide(this.id);this.load()},hide:function(){var f=this.getDoc();e&&f&&f.execCommand("SelectAll");this.save();o.hide(this.getContainer());o.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!o.isHidden(this.id)},setProgressState:function(f,d,c){this.onSetProgressState.dispatch(this,f,d,c);return f},load:function(f){var d=this.getElement(),c;if(d){f=f||{};f.load=true;c=this.setContent(n(d.value)?d.value:d.innerHTML,f);f.element=d;f.no_events||
this.onLoadContent.dispatch(this,f);f.element=null;return c}},save:function(f){var d=this,c=d.getElement(),j;if(c&&d.initialized){f=f||{};f.save=true;if(!f.no_events){d.undoManager.typing=0;d.undoManager.add()}f.element=c;j=f.content=d.getContent(f);f.no_events||d.onSaveContent.dispatch(d,f);j=f.content;if(/TEXTAREA|INPUT/i.test(c.nodeName))c.value=j;else{c.innerHTML=j;if(c=o.getParent(d.id,"form"))b(c.elements,function(a){if(a.name==d.id){a.value=j;return false}})}f.element=c=null;return j}},setContent:function(f,
d){d=d||{};d.format=d.format||"html";d.set=true;d.content=f;d.no_events||this.onBeforeSetContent.dispatch(this,d);if(!l.isIE&&(f.length===0||/^\s+$/.test(f))){d.content=this.dom.setHTML(this.getBody(),'<br _mce_bogus="1" />');d.format="raw"}d.content=this.dom.setHTML(this.getBody(),l.trim(d.content));if(d.format!="raw"&&this.settings.cleanup){d.getInner=true;d.content=this.dom.setHTML(this.getBody(),this.serializer.serialize(this.getBody(),d))}d.no_events||this.onSetContent.dispatch(this,d);return d.content},
getContent:function(f){var d;f=f||{};f.format=f.format||"html";f.get=true;f.no_events||this.onBeforeGetContent.dispatch(this,f);if(f.format!="raw"&&this.settings.cleanup){f.getInner=true;d=this.serializer.serialize(this.getBody(),f)}else d=this.getBody().innerHTML;d=d.replace(/^\s*|\s*$/g,"");f.content=d;f.no_events||this.onGetContent.dispatch(this,f);return f.content},isDirty:function(){return l.trim(this.startContent)!=l.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){if(!this.container)this.container=
o.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var f;if(!this.contentWindow)if(f=o.get(this.id+"_ifr"))this.contentWindow=f.contentWindow;return this.contentWindow},getDoc:function(){var f;if(!this.contentDocument)if(f=this.getWin())this.contentDocument=f.document;return this.contentDocument},getBody:function(){return this.bodyElement||
this.getDoc().body},convertURL:function(f,d,c){var j=this.settings;if(j.urlconverter_callback)return this.execCallback("urlconverter_callback",f,c,true,d);if(!j.convert_urls||c&&c.nodeName=="LINK"||f.indexOf("file:")===0)return f;if(j.relative_urls)return this.documentBaseURI.toRelative(f);return f=this.documentBaseURI.toAbsolute(f,j.remove_script_host)},addVisual:function(f){var d=this,c=d.settings;f=f||d.getBody();if(!n(d.hasVisual))d.hasVisual=c.visual;b(d.dom.select("table,a",f),function(j){var a;
switch(j.nodeName){case "TABLE":a=d.dom.getAttrib(j,"border");if(!a||a=="0")d.hasVisual?d.dom.addClass(j,c.visual_table_class):d.dom.removeClass(j,c.visual_table_class);break;case "A":if(a=d.dom.getAttrib(j,"name"))d.hasVisual?d.dom.addClass(j,"mceItemAnchor"):d.dom.removeClass(j,"mceItemAnchor")}});d.onVisualAid.dispatch(d,f,d.hasVisual)},remove:function(){var f=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=
[];l.remove(this);o.remove(f)},destroy:function(f){if(!this.destroyed){if(!f){l.removeUnload(this.destroy);tinyMCE.onBeforeUnload.remove(this._beforeUnload);this.theme&&this.theme.destroy&&this.theme.destroy();this.controlManager.destroy();this.selection.destroy();this.dom.destroy();if(!this.settings.content_editable){q.clear(this.getWin());q.clear(this.getDoc())}q.clear(this.getBody());q.clear(this.formElement)}if(this.formElement){this.formElement.submit=this.formElement._mceOldSubmit;this.formElement._mceOldSubmit=
null}this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function f(p,t){if(!d.removed)if(d.onEvent.dispatch(d,p,t)!==false)d[a[p.fakeType||p.type]].dispatch(d,p,t)}var d=this,c,j=d.settings,a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",
keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};b(a,function(p,t){switch(t){case "contextmenu":l.isOpera?d.dom.bind(d.getBody(),"mousedown",function(s){if(s.ctrlKey){s.fakeType="contextmenu";f(s)}}):d.dom.bind(d.getBody(),t,f);break;case "paste":d.dom.bind(d.getBody(),t,function(s){f(s)});break;case "submit":case "reset":d.dom.bind(d.getElement().form||o.getParent(d.id,"form"),t,f);break;default:d.dom.bind(j.content_editable?
d.getBody():d.getDoc(),t,f)}});d.dom.bind(j.content_editable?d.getBody():h?d.getDoc():d.getWin(),"focus",function(){d.focus(true)});l.isGecko&&d.dom.bind(d.getDoc(),"DOMNodeInserted",function(p){var t;p=p.target;if(p.nodeType===1&&p.nodeName==="IMG"&&(t=p.getAttribute("_mce_src")))p.src=d.documentBaseURI.toAbsolute(t)});if(h){c=function(){var p=this.getDoc(),t=this.settings;if(h&&!t.readonly){if(this._isHidden())try{if(!t.content_editable)p.designMode="On"}catch(s){}try{p.execCommand("styleWithCSS",
0,false)}catch(x){if(!this._isHidden())try{p.execCommand("useCSS",0,true)}catch(F){}}if(!t.table_inline_editing)try{p.execCommand("enableInlineTableEditing",false,false)}catch(y){}if(!t.object_resizing)try{p.execCommand("enableObjectResizing",false,false)}catch(z){}}};d.onBeforeExecCommand.add(c);d.onMouseDown.add(c)}l.isWebKit&&d.onClick.add(function(p,t){t=t.target;if(t.nodeName=="IMG"||t.nodeName=="A"&&d.dom.hasClass(t,"mceItemAnchor"))d.selection.getSel().setBaseAndExtent(t,0,t,1)});d.onMouseUp.add(d.nodeChanged);
d.onClick.add(d.nodeChanged);d.onKeyUp.add(function(p,t){var s=t.keyCode;if(s>=33&&s<=36||s>=37&&s<=40||s==13||s==45||s==46||s==8||l.isMac&&(s==91||s==93)||t.ctrlKey)d.nodeChanged()});d.onReset.add(function(){d.setContent(d.startContent,{format:"raw"})});if(j.custom_shortcuts){if(j.custom_undo_redo_keyboard_shortcuts){d.addShortcut("ctrl+z",d.getLang("undo_desc"),"Undo");d.addShortcut("ctrl+y",d.getLang("redo_desc"),"Redo")}d.addShortcut("ctrl+b",d.getLang("bold_desc"),"Bold");d.addShortcut("ctrl+i",
d.getLang("italic_desc"),"Italic");d.addShortcut("ctrl+u",d.getLang("underline_desc"),"Underline");for(c=1;c<=6;c++)d.addShortcut("ctrl+"+c,"",["FormatBlock",false,"h"+c]);d.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);d.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);d.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);var i=function(p){var t=null;if(!p.altKey&&!p.ctrlKey&&!p.metaKey)return t;b(d.shortcuts,function(s){if(!(l.isMac&&s.ctrl!=p.metaKey))if(!(!l.isMac&&s.ctrl!=
p.ctrlKey))if(s.alt==p.altKey)if(s.shift==p.shiftKey)if(p.keyCode==s.keyCode||p.charCode&&p.charCode==s.charCode){t=s;return false}});return t};d.onKeyUp.add(function(p,t){if(i(t))return q.cancel(t)});d.onKeyPress.add(function(p,t){if(i(t))return q.cancel(t)});d.onKeyDown.add(function(p,t){var s=i(t);if(s){s.func.call(s.scope);return q.cancel(t)}})}if(l.isIE){d.dom.bind(d.getDoc(),"controlselect",function(p){var t=d.resizeInfo;p=p.target;if(p.nodeName==="IMG"){t&&d.dom.unbind(t.node,t.ev,t.cb);if(d.dom.hasClass(p,
"mceItemNoResize")){ev="resizestart";t=d.dom.bind(p,"resizestart",q.cancel,q)}else{ev="resizeend";t=d.dom.bind(p,ev,function(s){var x;s=s.target;if(x=d.dom.getStyle(s,"width")){d.dom.setAttrib(s,"width",x.replace(/[^0-9%]+/g,""));d.dom.setStyle(s,"width","")}if(x=d.dom.getStyle(s,"height")){d.dom.setAttrib(s,"height",x.replace(/[^0-9%]+/g,""));d.dom.setStyle(s,"height","")}})}t=d.resizeInfo={node:p,ev:ev,cb:t}}});d.onKeyDown.add(function(p,t){switch(t.keyCode){case 8:if(d.selection.getRng().item){p.dom.remove(d.selection.getRng().item(0));
return q.cancel(t)}}})}l.isOpera&&d.onClick.add(function(p,t){q.prevent(t)});if(j.custom_undo_redo){var m=function(){d.undoManager.typing=0;d.undoManager.add()};d.dom.bind(d.getDoc(),"focusout",function(){!d.removed&&d.undoManager.typing&&m()});d.onKeyUp.add(function(p,t){if(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||t.keyCode==13||t.keyCode==45||t.ctrlKey)m()});d.onKeyDown.add(function(p,t){if(t.keyCode>=33&&t.keyCode<=36||t.keyCode>=37&&t.keyCode<=40||t.keyCode==13||t.keyCode==
45)d.undoManager.typing&&m();else if(!d.undoManager.typing){d.undoManager.add();d.undoManager.typing=1}});d.onMouseDown.add(function(){d.undoManager.typing&&m()})}},_isHidden:function(){var f;if(!h)return 0;f=this.selection.getSel();return!f||!f.rangeCount||f.rangeCount==0},_fixNesting:function(f){var d=[],c;f=f.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(j,a,i){if(a==="/"){if(!d.length)return"";if(i!==d[d.length-1].tag){for(c=d.length-1;c>=0;c--)if(d[c].tag===i){d[c].close=1;break}return""}else{d.pop();
if(d.length&&d[d.length-1].close){j=j+"</"+d[d.length-1].tag+">";d.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(i))return j;if(/\/>$/.test(j))return j;d.push({tag:i})}return j});for(c=d.length-1;c>=0;c--)f+="</"+d[c].tag+">";return f}})})(tinymce);
(function(l){var o=l.each,q=false;l.EditorCommands=function(g){function k(d){var c;d=d.toLowerCase();if(c=u.state[d])return c(d);return-1}function b(d,c){c=c||"exec";o(d,function(j,a){o(a.toLowerCase().split(","),function(i){u[c][i]=j})})}function h(d,c,j){if(c===void 0)c=q;if(j===void 0)j=null;return g.getDoc().execCommand(d,c,j)}function e(d,c){g.formatter.toggle(d,c?{value:c}:void 0)}var n=g.dom,r=g.selection,u={state:{},exec:{},value:{}},v=g.settings,f;l.extend(this,{execCommand:function(d,c,
j){var a;d=d.toLowerCase();if(a=u.exec[d]){a(d,c,j);return true}return q},queryCommandState:k,queryCommandValue:function(d){var c;d=d.toLowerCase();if(c=u.value[d])return c(d);return q},addCommands:b});b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){g.undoManager.add()},"Cut,Copy,Paste":function(d){var c=g.getDoc(),j;try{h(d)}catch(a){j=true}if(j||!c.queryCommandSupported(d))l.isGecko?g.windowManager.confirm(g.getLang("clipboard_msg"),function(i){i&&
open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):g.windowManager.alert(g.getLang("clipboard_no_support"))},unlink:function(d){r.isCollapsed()&&r.select(r.getNode());h(d);r.collapse(q)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(d){var c=d.substring(7);o("left,center,right,full".split(","),function(j){c!=j&&g.formatter.remove("align"+j)});e("align"+c)},"InsertUnorderedList,InsertOrderedList":function(d){var c;h(d);if(d=n.getParent(r.getNode(),"ol,ul")){c=
d.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)){f=r.getBookmark(void 0);n.split(c,d);r.moveToBookmark(f)}}},"Bold,Italic,Underline,Strikethrough":function(d){e(d)},"ForeColor,HiliteColor,FontName":function(d,c,j){e(d,j)},FontSize:function(d,c,j){var a;if(j>=1&&j<=7){a=l.explode(v.font_size_style_values);j=(c=l.explode(v.font_size_classes))?c[j-1]||j:a[j-1]||j}e(d,j)},RemoveFormat:function(d){g.formatter.remove(d)},mceBlockQuote:function(){e("blockquote")},FormatBlock:function(d,c,j){return e(j)},
mceCleanup:function(){f=r.getBookmark(void 0);g.setContent(g.getContent({cleanup:true}),{cleanup:true});r.moveToBookmark(f)},mceRemoveNode:function(d,c,j){d=j||r.getNode();if(d!=g.getBody()){f=r.getBookmark(void 0);g.dom.remove(d,true);r.moveToBookmark(f)}},mceSelectNodeDepth:function(d,c,j){var a=0;n.getParent(r.getNode(),function(i){if(i.nodeType==1&&a++==j){r.select(i);return q}},g.getBody())},mceSelectNode:function(d,c,j){r.select(j)},mceInsertContent:function(d,c,j){r.setContent(j)},mceInsertRawHTML:function(d,
c,j){r.setContent("tiny_mce_marker");g.setContent(g.getContent().replace(/tiny_mce_marker/g,j))},mceSetContent:function(d,c,j){g.setContent(j)},"Indent,Outdent":function(d){var c,j,a;c=v.indentation;j=/[a-z%]+$/i.exec(c);c=parseInt(c);!k("InsertUnorderedList")&&!k("InsertOrderedList")?o(r.getSelectedBlocks(),function(i){if(d=="outdent"){a=Math.max(0,parseInt(i.style.paddingLeft||0)-c);n.setStyle(i,"paddingLeft",a?a+j:"")}else n.setStyle(i,"paddingLeft",parseInt(i.style.paddingLeft||0)+c+j)}):h(d)},
mceRepaint:function(){if(l.isGecko)try{f=r.getBookmark(true);r.getSel()&&r.getSel().selectAllChildren(g.getBody());r.collapse(true);r.moveToBookmark(f)}catch(d){}},mceToggleFormat:function(d,c,j){g.formatter.toggle(j)},InsertHorizontalRule:function(){r.setContent("<hr />")},mceToggleVisualAid:function(){g.hasVisual=!g.hasVisual;g.addVisual()},mceReplaceContent:function(d,c,j){r.setContent(j.replace(/\{\$selection\}/g,r.getContent({format:"text"})))},mceInsertLink:function(d,c,j){d=n.getParent(r.getNode(),
"a");if(l.is(j,"string"))j={href:j};if(d)j.href?n.setAttribs(d,j):g.dom.remove(d,true);else{h("CreateLink",q,"javascript:mctmp(0);");o(n.select("a[href=javascript:mctmp(0);]"),function(a){n.setAttribs(a,j)})}},selectAll:function(){var d=n.getRoot(),c=n.createRng();c.setStart(d,0);c.setEnd(d,d.childNodes.length);g.selection.setRng(c)}});b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(d){d="align"+d.substring(7);return g.formatter.match(d)},"Bold,Italic,Underline,Strikethrough":function(d){return g.formatter.match(d)},
mceBlockQuote:function(){return g.formatter.match("blockquote")},Outdent:function(){var d;if(v.inline_styles){if((d=n.getParent(r.getStart(),n.isBlock))&&parseInt(d.style.paddingLeft)>0)return true;if((d=n.getParent(r.getEnd(),n.isBlock))&&parseInt(d.style.paddingLeft)>0)return true}return k("InsertUnorderedList")||k("InsertOrderedList")||!v.inline_styles&&!!n.getParent(r.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(d){return n.getParent(r.getNode(),d=="insertunorderedlist"?
"UL":"OL")}},"state");b({"FontSize,FontName":function(d){var c=0,j;if(j=n.getParent(r.getNode(),"span"))c=d=="fontsize"?j.style.fontSize:j.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return c}},"value");v.custom_undo_redo&&b({Undo:function(){g.undoManager.undo()},Redo:function(){g.undoManager.redo()}})}})(tinymce);
(function(l){var o=l.util.Dispatcher;l.UndoManager=function(q){var g,k=0,b=[];return g={typing:0,onAdd:new o(g),onUndo:new o(g),onRedo:new o(g),add:function(h){var e;e=q.settings;var n;h=h||{};h.content=l.trim(q.getContent({format:"raw",no_events:1}));if((n=b[k])&&n.content==h.content)if(k>0||b.length==1)return null;if(e.custom_undo_redo_levels)if(b.length>e.custom_undo_redo_levels){for(e=0;e<b.length-1;e++)b[e]=b[e+1];b.length--;k=b.length}h.bookmark=q.selection.getBookmark(2,true);if(k<b.length-
1)if(k==0)b=[];else b.length=k+1;b.push(h);k=b.length-1;g.onAdd.dispatch(g,h);q.isNotDirty=0;return h},undo:function(){var h;if(g.typing){g.add();g.typing=0}if(k>0){h=b[--k];q.setContent(h.content,{format:"raw"});q.selection.moveToBookmark(h.bookmark);g.onUndo.dispatch(g,h)}return h},redo:function(){var h;if(k<b.length-1){h=b[++k];q.setContent(h.content,{format:"raw"});q.selection.moveToBookmark(h.bookmark);g.onRedo.dispatch(g,h)}return h},clear:function(){b=[];k=g.typing=0},hasUndo:function(){return k>
0||g.typing},hasRedo:function(){return k<b.length-1}}}})(tinymce);
(function(l){function o(v,f){var d=f.ownerDocument.createRange();d.setStart(v.endContainer,v.endOffset);d.setEndAfter(f);return d.cloneContents().textContent.length==0}function q(v){v=v.innerHTML;v=v.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");v=v.replace(/<[^>]+>/g,"");return v.replace(/[ \u00a0\t\r\n]+/g,"")==""}function g(v,f,d){var c;if(q(d)){c=f.getParent(d,"ul,ol");if(!f.getParent(c.parentNode,"ul,ol")){f.split(c,d);c=f.create("p",0,'<br _mce_bogus="1" />');f.replace(c,d);v.select(c,
1)}return u}return r}var k=l.dom.Event,b=l.isIE,h=l.isGecko,e=l.isOpera,n=l.each,r=true,u=false;l.create("tinymce.ForceBlocks",{ForceBlocks:function(v){function f(a,i){if(e)i.content=i.content.replace(d.reOpera,"</"+j+">");i.content=i.content.replace(d.rePadd,"<"+j+"$1$2$3$4$5$6>\u00a0</"+j+">");if(!b&&!e&&i.set){i.content=i.content.replace(d.reNbsp2BR1,"<"+j+"$1$2><br /></"+j+">");i.content=i.content.replace(d.reNbsp2BR2,"<"+j+"$1$2><br /></"+j+">")}else i.content=i.content.replace(d.reBR2Nbsp,"<"+
j+"$1$2>\u00a0</"+j+">")}var d=this,c=v.settings,j;d.editor=v;d.dom=v.dom;j=(c.forced_root_block||"p").toLowerCase();c.element=j.toUpperCase();v.onPreInit.add(d.setup,d);d.reOpera=RegExp("(\\u00a0|&#160;|&nbsp;)</"+j+">","gi");d.rePadd=RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,j),"gi");d.reNbsp2BR1=RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,j),"gi");d.reNbsp2BR2=RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,
j),"gi");d.reBR2Nbsp=RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,j),"gi");v.onBeforeSetContent.add(f);v.onPostProcess.add(f);if(c.forced_root_block){v.onInit.add(d.forceRoots,d);v.onSetContent.add(d.forceRoots,d);v.onBeforeGetContent.add(d.forceRoots,d)}},setup:function(){var v=this,f=v.editor,d=f.settings,c=f.dom,j=f.selection;if(d.forced_root_block){f.onBeforeExecCommand.add(v.forceRoots,v);f.onKeyUp.add(v.forceRoots,v);f.onPreProcess.add(v.forceRoots,v)}d.force_br_newlines&&
b&&f.onKeyPress.add(function(a,i){var m;if(i.keyCode==13&&j.getNode().nodeName!="LI"){j.setContent('<br id="__" /> ',{format:"raw"});m=c.get("__");m.removeAttribute("id");j.select(m);j.collapse();return k.cancel(i)}});if(!b&&d.force_p_newlines){f.onKeyPress.add(function(a,i){i.keyCode==13&&!i.shiftKey&&!v.insertPara(i)&&k.cancel(i)});h&&f.onKeyDown.add(function(a,i){if((i.keyCode==8||i.keyCode==46)&&!i.shiftKey)v.backspaceDelete(i,i.keyCode==8)})}l.isWebKit&&f.onKeyPress.add(function(a,i){if(i.keyCode==
13&&(i.shiftKey||d.force_br_newlines&&!c.getParent(j.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var m=j.getRng(),p,t=c.create("div",null," "),s=c.getViewPort(a.getWin()).h;m.insertNode(p=c.create("br"));m.setStartAfter(p);m.setEndAfter(p);j.setRng(m);if(j.getSel().focusNode==p.previousSibling){j.select(c.insertAfter(c.doc.createTextNode("\u00a0"),p));j.collapse(r)}c.insertAfter(t,p);m=c.getPos(t).y;c.remove(t);m>s&&a.getWin().scrollTo(0,m);k.cancel(i)}});f.onPreProcess.add(function(a,i){n(c.select("p,h1,h2,h3,h4,h5,h6,div",
i.node),function(m){q(m)&&n(c.select("span,em,strong,b,i",i.node),function(p){if(!p.hasChildNodes()){p.appendChild(a.getDoc().createTextNode("\u00a0"));return u}})})});if(b)if(d.element!="P"){f.onKeyPress.add(function(){v.lastElm=j.getNode().nodeName});f.onKeyUp.add(function(a,i){var m;m=j.getNode();if(a.getBody().childNodes.length===1&&m.nodeName=="P"){m=c.rename(m,d.element);j.select(m);j.collapse();a.nodeChanged()}else if(i.keyCode==13&&!i.shiftKey&&v.lastElm!="P")if(m=c.getParent(m,"p")){c.rename(m,
d.element);a.nodeChanged()}})}},find:function(v,f,d){for(var c=this.editor.getDoc().createTreeWalker(v,4,null,u),j=-1;v=c.nextNode();){j++;if(f==0&&v==d)return j;if(f==1&&j==d)return v}return-1},forceRoots:function(v){v=this.editor;var f=v.getBody(),d=v.getDoc(),c=v.selection,j=c.getSel(),a=c.getRng(),i=-2,m,p,t,s,x,F=f.childNodes,y,z,M;for(y=F.length-1;y>=0;y--){x=F[y];if(x.nodeType===1&&x.getAttribute("_mce_type"))s=null;else if(x.nodeType===3||!this.dom.isBlock(x)&&x.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(x.nodeName))if(s)s.hasChildNodes()?
s.insertBefore(x,s.firstChild):s.appendChild(x);else{if(x.nodeType!=3||/[^\s]/g.test(x.nodeValue)){if(i==-2&&a)if(b){if(a.item){s=d.body.createTextRange();s.moveToElementText(a.item(0));a=s}s=d.body.createTextRange();s.moveToElementText(f);s.collapse(1);i=s.move("character",-16777215)*-1;s=a.duplicate();s.collapse(1);m=s.move("character",-16777215)*-1;s=a.duplicate();s.collapse(0);s=s.move("character",-16777215)*-1-m;i=m-i;m=s}else if(a.startContainer.nodeType==1&&(z=a.startContainer.childNodes[a.startOffset])&&
z.nodeType==1){M=z.getAttribute("id");z.setAttribute("id","__mce")}else if(v.dom.getParent(a.startContainer,function(C){return C===f})){p=a.startOffset;t=a.endOffset;i=this.find(f,0,a.startContainer);m=this.find(f,0,a.endContainer)}s=v.dom.create(v.settings.forced_root_block);x.parentNode.replaceChild(s,x);s.appendChild(x)}}else s=null}if(i!=-2)if(b)try{a=j.createRange();a.moveToElementText(f);a.collapse(1);a.moveStart("character",i);a.moveEnd("character",m);a.select()}catch(X){}else{s=f.getElementsByTagName(v.settings.element)[0];
a=d.createRange();i!=-1?a.setStart(this.find(f,1,i),p):a.setStart(s,0);m!=-1?a.setEnd(this.find(f,1,m),t):a.setEnd(s,0);if(j){j.removeAllRanges();j.addRange(a)}}else if(!b&&(z=v.dom.get("__mce"))){M?z.setAttribute("id",M):z.removeAttribute("id");a=d.createRange();a.setStartBefore(z);a.setEndBefore(z);c.setRng(a)}},getParentBlock:function(v){var f=this.dom;return f.getParent(v,f.isBlock)},insertPara:function(){function v(V,aa){var ea=[],Z,A;V.innerHTML="";if(j.keep_styles){A=aa;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(A.nodeName)){Z=
A.cloneNode(u);d.setAttrib(Z,"id","");ea.push(Z)}while(A=A.parentNode)}if(ea.length>0){A=ea.length-1;for(Z=V;A>=0;A--)Z=Z.appendChild(ea[A]);ea[0].innerHTML=e?"&nbsp;":"<br />";return ea[0]}else V.innerHTML=e?"&nbsp;":"<br />"}var f=this.editor,d=f.dom,c=f.getDoc(),j=f.settings,a=f.selection.getSel(),i=a.getRangeAt(0),m=c.body,p,t,s,x,F,y,z,M,X,C,D,B,K=d.getViewPort(f.getWin()),H;p=c.createRange();p.setStart(a.anchorNode,a.anchorOffset);p.collapse(r);t=c.createRange();t.setStart(a.focusNode,a.focusOffset);
t.collapse(r);x=(s=p.compareBoundaryPoints(p.START_TO_END,t)<0)?a.anchorNode:a.focusNode;F=s?a.anchorOffset:a.focusOffset;y=s?a.focusNode:a.anchorNode;s=s?a.focusOffset:a.anchorOffset;if(x===y&&/^(TD|TH)$/.test(x.nodeName)){x.firstChild.nodeName=="BR"&&d.remove(x.firstChild);if(x.childNodes.length==0)f.dom.add(x,j.element,null,"<br />");else{B=x.innerHTML;x.innerHTML="";f.dom.add(x,j.element,null,B)}M=f.dom.add(x,j.element,null,"<br />");i=c.createRange();i.selectNodeContents(M);i.collapse(1);f.selection.setRng(i);
return u}if(x==m&&y==m&&m.firstChild&&f.dom.isBlock(m.firstChild)){x=y=x.firstChild;F=s=0;p=c.createRange();p.setStart(x,0);t=c.createRange();t.setStart(y,0)}x=x.nodeName=="HTML"?c.body:x;x=x.nodeName=="BODY"?x.firstChild:x;y=y.nodeName=="HTML"?c.body:y;y=y.nodeName=="BODY"?y.firstChild:y;z=this.getParentBlock(x);M=this.getParentBlock(y);X=z?z.nodeName:j.element;if(B=this.dom.getParent(z,"li,pre")){if(B.nodeName=="LI")return g(f.selection,this.dom,B);return r}if(z&&(z.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(z,
"position",1)))){X=j.element;z=null}if(M&&(M.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(d.getStyle(z,"position",1)))){X=j.element;M=null}if(/(TD|TABLE|TH|CAPTION)/.test(X)||z&&X=="DIV"&&/left|right/gi.test(d.getStyle(z,"float",1))){X=j.element;z=M=null}C=z&&z.nodeName==X?z.cloneNode(0):f.dom.create(X);M=M&&M.nodeName==X?M.cloneNode(0):f.dom.create(X);M.removeAttribute("id");if(/^(H[1-6])$/.test(X)&&o(i,z))M=f.dom.create(j.element);B=z=x;do{if(B==m||B.nodeType==9||this.dom.isBlock(B)||/(TD|TABLE|TH|CAPTION)/.test(B.nodeName))break;
z=B}while(B=B.previousSibling?B.previousSibling:B.parentNode);B=D=y;do{if(B==m||B.nodeType==9||this.dom.isBlock(B)||/(TD|TABLE|TH|CAPTION)/.test(B.nodeName))break;D=B}while(B=B.nextSibling?B.nextSibling:B.parentNode);z.nodeName==X?p.setStart(z,0):p.setStartBefore(z);p.setEnd(x,F);C.appendChild(p.cloneContents()||c.createTextNode(""));try{t.setEndAfter(D)}catch(W){}t.setStart(y,s);M.appendChild(t.cloneContents()||c.createTextNode(""));i=c.createRange();if(!z.previousSibling&&z.parentNode.nodeName==
X)i.setStartBefore(z.parentNode);else p.startContainer.nodeName==X&&p.startOffset==0?i.setStartBefore(p.startContainer):i.setStart(p.startContainer,p.startOffset);!D.nextSibling&&D.parentNode.nodeName==X?i.setEndAfter(D.parentNode):i.setEnd(t.endContainer,t.endOffset);i.deleteContents();e&&f.getWin().scrollTo(0,K.y);if(C.firstChild&&C.firstChild.nodeName==X)C.innerHTML=C.firstChild.innerHTML;if(M.firstChild&&M.firstChild.nodeName==X)M.innerHTML=M.firstChild.innerHTML;if(q(C))C.innerHTML="<br />";
if(q(M))H=v(M,y);if(e&&parseFloat(opera.version())<9.5){i.insertNode(C);i.insertNode(M)}else{i.insertNode(M);i.insertNode(C)}M.normalize();C.normalize();i=c.createRange();i.selectNodeContents(h?c.createTreeWalker(H||M,NodeFilter.SHOW_TEXT,null,u).nextNode()||H||M:H||M);i.collapse(1);a.removeAllRanges();a.addRange(i);c=f.dom.getPos(M).y;a=M.clientHeight;if(c<K.y||c+a>K.y+K.h)f.getWin().scrollTo(0,c<K.y?c:c-K.h+25);return u},backspaceDelete:function(v,f){function d(x){var F;if((x=x.target)&&x.parentNode&&
x.nodeName=="BR"&&(i=c.getParentBlock(x))){F=x.previousSibling;k.remove(a,"DOMNodeInserted",d);if(!(F&&F.nodeType==3&&/\s+$/.test(F.nodeValue)))if(x.previousSibling||x.nextSibling)j.dom.remove(x)}}var c=this,j=c.editor,a=j.getBody(),i,m=j.selection,p=m.getRng(),t=p.startContainer,s;if(t&&j.dom.isBlock(t)&&!/^(TD|TH)$/.test(t.nodeName)&&f)if(t.childNodes.length==0||t.childNodes.length==1&&t.firstChild.nodeName=="BR"){for(i=t;(i=i.previousSibling)&&!j.dom.isBlock(i););if(i){if(t!=a.firstChild){for(p=
j.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,u);s=p.nextNode();)i=s;p=j.getDoc().createRange();p.setStart(i,i.nodeValue?i.nodeValue.length:0);p.setEnd(i,i.nodeValue?i.nodeValue.length:0);m.setRng(p);j.dom.remove(t)}return k.cancel(v)}}k._add(a,"DOMNodeInserted",d);window.setTimeout(function(){k._remove(a,"DOMNodeInserted",d)},1)}})})(tinymce);
(function(l){var o=l.dom.Event,q=l.each,g=l.extend;l.create("tinymce.ControlManager",{ControlManager:function(k,b){var h=this;b=b||{};h.editor=k;h.controls={};h.onAdd=new l.util.Dispatcher(h);h.onPostRender=new l.util.Dispatcher(h);h.prefix=b.prefix||k.id+"_";h._cls={};h.onPostRender.add(function(){q(h.controls,function(e){e.postRender()})})},get:function(k){return this.controls[this.prefix+k]||this.controls[k]},setActive:function(k,b){var h=null;if(h=this.get(k))h.setActive(b);return h},setDisabled:function(k,
b){var h=null;if(h=this.get(k))h.setDisabled(b);return h},add:function(k){if(k){this.controls[k.id]=k;this.onAdd.dispatch(k,this)}return k},createControl:function(k){var b,h=this,e=h.editor;q(e.plugins,function(n){if(n.createControl)if(b=n.createControl(k,h))return false});switch(k){case "|":case "separator":return h.createSeparator()}if(!b&&e.buttons&&(b=e.buttons[k]))return h.createButton(k,b);return h.add(b)},createDropMenu:function(k,b,h){var e=this.editor,n,r,u;b=g({"class":"mceDropDown",constrain:e.settings.constrain_menus},
b);b["class"]=b["class"]+" "+e.getParam("skin")+"Skin";if(u=e.getParam("skin_variant"))b["class"]+=" "+e.getParam("skin")+"Skin"+u.substring(0,1).toUpperCase()+u.substring(1);k=this.prefix+k;n=this.controls[k]=new (h||this._cls.dropmenu||l.ui.DropMenu)(k,b);n.onAddItem.add(function(v,f){var d=f.settings;d.title=e.getLang(d.title,d.title);if(!d.onclick)d.onclick=function(){if(d.cmd)e.execCommand(d.cmd,d.ui||false,d.value)}});e.onRemove.add(function(){n.destroy()});if(l.isIE){n.onShowMenu.add(function(){e.focus();
r=e.selection.getBookmark(1)});n.onHideMenu.add(function(){if(r){e.selection.moveToBookmark(r);r=0}})}return this.add(n)},createListBox:function(k,b,h){var e=this.editor;if(this.get(k))return null;b.title=e.translate(b.title);b.scope=b.scope||e;if(!b.onselect)b.onselect=function(n){e.execCommand(b.cmd,b.ui||false,n||b.value)};b=g({title:b.title,"class":"mce_"+k,scope:b.scope,control_manager:this},b);k=this.prefix+k;if(e.settings.use_native_selects)h=new l.ui.NativeListBox(k,b);else{h=h||this._cls.listbox||
l.ui.ListBox;h=new h(k,b)}this.controls[k]=h;l.isWebKit&&h.onPostRender.add(function(n,r){o.add(r,"mousedown",function(){e.bookmark=e.selection.getBookmark(1)});o.add(r,"focus",function(){e.selection.moveToBookmark(e.bookmark);e.bookmark=null})});h.hideMenu&&e.onMouseDown.add(h.hideMenu,h);return this.add(h)},createButton:function(k,b,h){var e=this.editor;if(this.get(k))return null;b.title=e.translate(b.title);b.label=e.translate(b.label);b.scope=b.scope||e;if(!b.onclick&&!b.menu_button)b.onclick=
function(){e.execCommand(b.cmd,b.ui||false,b.value)};b=g({title:b.title,"class":"mce_"+k,unavailable_prefix:e.getLang("unavailable",""),scope:b.scope,control_manager:this},b);k=this.prefix+k;if(b.menu_button){h=h||this._cls.menubutton||l.ui.MenuButton;k=new h(k,b);e.onMouseDown.add(k.hideMenu,k)}else{h=this._cls.button||l.ui.Button;k=new h(k,b)}return this.add(k)},createMenuButton:function(k,b,h){b=b||{};b.menu_button=1;return this.createButton(k,b,h)},createSplitButton:function(k,b,h){var e=this.editor;
if(this.get(k))return null;b.title=e.translate(b.title);b.scope=b.scope||e;if(!b.onclick)b.onclick=function(n){e.execCommand(b.cmd,b.ui||false,n||b.value)};if(!b.onselect)b.onselect=function(n){e.execCommand(b.cmd,b.ui||false,n||b.value)};b=g({title:b.title,"class":"mce_"+k,scope:b.scope,control_manager:this},b);k=this.prefix+k;k=this.add(new (h||this._cls.splitbutton||l.ui.SplitButton)(k,b));e.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(k,b,h){var e=this.editor,n,r;if(this.get(k))return null;
b.title=e.translate(b.title);b.scope=b.scope||e;if(!b.onclick)b.onclick=function(u){if(l.isIE)r=e.selection.getBookmark(1);e.execCommand(b.cmd,b.ui||false,u||b.value)};if(!b.onselect)b.onselect=function(u){e.execCommand(b.cmd,b.ui||false,u||b.value)};b=g({title:b.title,"class":"mce_"+k,menu_class:e.getParam("skin")+"Skin",scope:b.scope,more_colors_title:e.getLang("more_colors")},b);k=this.prefix+k;n=new (h||this._cls.colorsplitbutton||l.ui.ColorSplitButton)(k,b);e.onMouseDown.add(n.hideMenu,n);e.onRemove.add(function(){n.destroy()});
if(l.isIE){n.onShowMenu.add(function(){e.focus();r=e.selection.getBookmark(1)});n.onHideMenu.add(function(){if(r){e.selection.moveToBookmark(r);r=0}})}return this.add(n)},createToolbar:function(k,b,h){k=this.prefix+k;b=new (h||this._cls.toolbar||l.ui.Toolbar)(k,b);if(this.get(k))return null;return this.add(b)},createSeparator:function(k){return new (k||this._cls.separator||l.ui.Separator)},setControlType:function(k,b){return this._cls[k.toLowerCase()]=b},destroy:function(){q(this.controls,function(k){k.destroy()});
this.controls=null}})})(tinymce);
(function(l){var o=l.util.Dispatcher,q=l.each,g=l.isIE,k=l.isOpera;l.create("tinymce.WindowManager",{WindowManager:function(b){this.editor=b;this.onOpen=new o(this);this.onClose=new o(this);this.params={};this.features={}},open:function(b,h){var e="",n=this.editor.settings.dialog_type=="modal",r,u,v;v=l.DOM.getViewPort();b=b||{};h=h||{};u=k?v.w:screen.width;v=k?v.h:screen.height;b.name=b.name||"mc_"+(new Date).getTime();b.width=parseInt(b.width||320);b.height=parseInt(b.height||240);b.resizable=true;
b.left=b.left||parseInt(u/2)-b.width/2;b.top=b.top||parseInt(v/2)-b.height/2;h.inline=false;h.mce_width=b.width;h.mce_height=b.height;h.mce_auto_focus=b.auto_focus;if(n)if(g){b.center=true;b.help=false;b.dialogWidth=b.width+"px";b.dialogHeight=b.height+"px";b.scroll=b.scrollbars||false}q(b,function(d,c){if(l.is(d,"boolean"))d=d?"yes":"no";/^(name|url)$/.test(c)||(e+=g&&n?(e?";":"")+c+":"+d:(e?",":"")+c+"="+d)});this.features=b;this.params=h;this.onOpen.dispatch(this,b,h);u=b.url||b.file;u=l._addVer(u);
try{if(g&&n){r=1;window.showModalDialog(u,window,e)}else r=window.open(u,b.name,e)}catch(f){}r||alert(this.editor.getLang("popup_blocked"))},close:function(b){b.close();this.onClose.dispatch(this)},createInstance:function(b,h,e,n,r,u){return new (l.resolve(b))(h,e,n,r,u)},confirm:function(b,h,e,n){n=n||window;h.call(e||this,n.confirm(this._decode(this.editor.getLang(b,b))))},alert:function(b,h,e,n){n=n||window;n.alert(this._decode(this.editor.getLang(b,b)));if(h)h.call(e||this)},resizeBy:function(b,
h,e){e.resizeBy(b,h)},_decode:function(b){return l.DOM.decode(b).replace(/\\n/g,"\n")}})})(tinymce);
(function(l){l.GlobalCommands=new function(){function o(b,h,e,n){if(typeof h=="string")h=[h];l.each(h,function(r){b[r.toLowerCase()]={func:e,scope:n}})}var q={},g={},k={};l.extend(this,{add:function(b,h,e){o(q,b,h,e)},addQueryStateHandler:function(b,h,e){o(g,b,h,e)},addQueryValueHandler:function(b,h,e){o(k,b,h,e)},execCommand:function(b,h,e,n,r){if(h=q[h.toLowerCase()])if(h.func.call(b||h.scope,e,n,r)!==false)return true},queryCommandValue:function(){if(cmd=k[cmd.toLowerCase()])return cmd.func.call(scope||
cmd.scope,ui,value,args)},queryCommandState:function(){if(cmd=g[cmd.toLowerCase()])return cmd.func.call(scope||cmd.scope,ui,value,args)}})}})(tinymce);
(function(l){l.Formatter=function(o){function q(A){return A.nodeType===1&&(A.face==="mceinline"||A.style.fontFamily==="mceinline")}function g(A){return A?F[A]:F}function k(A,E){if(A)if(typeof A!=="string")y(A,function(G,I){k(I,G)});else{E=E.length?E:[E];y(E,function(G){if(G.deep===ea)G.deep=!G.selector;if(G.split===ea)G.split=!G.selector||G.inline;if(G.remove===ea&&G.selector&&!G.inline)G.remove="none";if(G.selector&&G.inline){G.mixed=true;G.block_expand=true}if(typeof G.classes==="string")G.classes=
G.classes.split(/\s+/)});F[A]=E}}function b(A,E,G){function I(O){var P=O.startContainer,J=O.startOffset;if(P.nodeType==1||P.nodeValue===""){P=P.nodeType==1?P.childNodes[J]:P;P=new X(P,P.parentNode);for(J=P.current();J;J=P.next())if(J.nodeType==3&&!B(J.parentNode)&&!d(J)){O.setStart(J,0);break}}return O}function T(O,P){P=P||N;if(O){y(P.styles,function(J,Q){z.setStyle(O,Q,f(J,E))});y(P.attributes,function(J,Q){z.setAttrib(O,Q,f(J,E))});y(P.classes,function(J){J=f(J,E);z.hasClass(O,J)||z.addClass(O,
J)})}}function L(O){var P=[],J,Q;J=N.inline||N.block;Q=z.create(J);T(Q);C.walk(O,function(R){function ca(Y){var ba=Y.nodeName.toLowerCase(),da=Y.parentNode.nodeName.toLowerCase(),fa;if(u(ba,"br")){$=0;N.block&&z.remove(Y)}else if(N.wrapper&&e(Y,A,E))$=0;else if(N.block&&!N.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(ba)){Y=z.rename(Y,J);T(Y);P.push(Y);$=0}else{if(N.selector){y(U,function(ga){if(z.is(Y,ga.selector)&&!q(Y)){T(Y,ga);fa=true}});if(!N.inline||fa){$=0;return}}if(D(J,ba)&&D(da,
J)){if(!$){$=Q.cloneNode(V);Y.parentNode.insertBefore($,Y);P.push($)}$.appendChild(Y)}else{$=0;y(l.grep(Y.childNodes),ca);$=0}}}var $;y(R,ca)});y(P,function(R){function ca(Y){var ba,da;y(Y.childNodes,function(fa){if(fa.nodeType==1&&!p(fa)&&!q(fa)){ba=fa;return V}});if(ba&&r(ba,N)){da=ba.cloneNode(V);T(da);z.replace(da,Y,aa);z.remove(ba,1)}return da||Y}var $;$=function(Y){var ba=0;y(Y.childNodes,function(da){!d(da)&&!p(da)&&ba++});return ba}(R);if($===0)z.remove(R,1);else if(N.inline||N.wrapper){if(!N.exact&&
$===1)R=ca(R);y(U,function(Y){y(z.select(Y.inline,R),function(ba){a(Y,E,ba,Y.exact?ba:null)})});if(e(R.parentNode,A,E)){z.remove(R,1);R=0;return aa}N.merge_with_parents&&z.getParent(R.parentNode,function(Y){if(e(Y,A,E)){z.remove(R,1);R=0;return aa}});if(R){R=t(m(R),R);R=t(R,m(R,aa))}}})}var U=g(A),N=U[0],S;if(N)if(G){S=z.createRng();S.setStartBefore(G);S.setEndAfter(G);L(S)}else if(!M.isCollapsed()||!N.inline){G=M.getBookmark();L(j(M.getRng(aa),U));M.moveToBookmark(G);M.setRng(I(M.getRng(aa)));o.nodeChanged()}else x("apply",
A,E)}function h(A,E,G){function I(J){var Q,R,ca;Q=l.grep(J.childNodes);R=0;for(ca=S.length;R<ca;R++)if(a(S[R],E,J,J))break;if(O.deep){R=0;for(ca=Q.length;R<ca;R++)I(Q[R])}}function T(J){var Q;y(z.getParents(J.parentNode,void 0,z.getRoot()).reverse(),function(R){var ca;if(!Q&&R.id!="_start"&&R.id!="_end")if((ca=e(R,A,E))&&ca.split!==false)Q=R});return Q}function L(J,Q,R,ca){var $,Y,ba,da,fa,ga;if(J){ga=J.parentNode;for($=Q.parentNode;$&&$!=ga;$=$.parentNode){Y=$.cloneNode(V);for(fa=0;fa<S.length;fa++)if(a(S[fa],
E,Y,Y)){Y=0;break}if(Y){ba&&Y.appendChild(ba);da||(da=Y);ba=Y}}if(ca&&(!O.mixed||!B(J)))Q=z.split(J,Q);if(ba){R.parentNode.insertBefore(ba,R);da.appendChild(R)}}return Q}function U(J){var Q=z.get(J?"_start":"_end"),R=Q[J?"firstChild":"lastChild"];if(p(R))R=R[J?"firstChild":"lastChild"];z.remove(Q,true);return R}function N(J){var Q,R;J=j(J,S,aa);if(O.split){Q=s(J,aa);R=s(J);if(Q!=R){Q=c(Q,"span",{id:"_start",_mce_type:"bookmark"});R=c(R,"span",{id:"_end",_mce_type:"bookmark"});L(T(Q),Q,Q,true);L(T(R),
R,R,true);Q=U(aa);R=U()}else Q=R=L(T(Q),Q,Q,true);J.startContainer=Q.parentNode;J.startOffset=H(Q);J.endContainer=R.parentNode;J.endOffset=H(R)+1}C.walk(J,function(ca){y(ca,function($){I($)})})}var S=g(A),O=S[0],P;if(G){P=z.createRng();P.setStartBefore(G);P.setEndAfter(G);N(P)}else if(!M.isCollapsed()||!O.inline){G=M.getBookmark();N(M.getRng(aa));M.moveToBookmark(G);o.nodeChanged()}else x("remove",A,E)}function e(A,E,G,I){function T(N,S,O){var P,J,Q=S[O];if(Q)if(Q.length===ea)for(P in Q){if(Q.hasOwnProperty(P)){J=
O==="attributes"?z.getAttrib(N,P):v(N,P);if(I&&!J&&!S.exact)return;if((!I||S.exact)&&!u(J,f(Q[P],G)))return}}else for(P=0;P<Q.length;P++)if(O==="attributes"?z.getAttrib(N,Q[P]):v(N,Q[P]))break;return S}var L=g(E),U;if(L&&A)for(U=0;U<L.length;U++){E=L[U];if(r(A,E)&&T(A,E,"attributes")&&T(A,E,"styles")){if(L=E.classes)for(U=0;U<L.length;U++)if(!z.hasClass(A,L[U]))return;return E}}}function n(A,E,G){function I(L){L=z.getParent(L,function(U){return!!e(U,A,E,true)});return e(L,A,E)}var T;if(G)return I(G);
if(M.isCollapsed()){for(G=Z.apply.length-1;G>=0;G--)if(Z.apply[G].name==A)return true;for(G=Z.remove.length-1;G>=0;G--)if(Z.remove[G].name==A)return false;return I(M.getNode())}G=M.getNode();if(I(G))return aa;T=M.getStart();if(T!=G)if(I(T))return aa;return V}function r(A,E){if(u(A,E.inline))return aa;if(u(A,E.block))return aa;if(E.selector)return z.is(A,E.selector)}function u(A,E){A=A||"";E=E||"";A=""+(A.nodeName||A);E=""+(E.nodeName||E);return A.toLowerCase()==E.toLowerCase()}function v(A,E){var G=
z.getStyle(A,E);if(E=="color"||E=="backgroundColor")G=z.toHex(G);if(E=="fontWeight"&&G==700)G="bold";return""+G}function f(A,E){if(typeof A!="string")A=A(E);else if(E)A=A.replace(/%(\w+)/g,function(G,I){return E[I]||G});return A}function d(A){return A&&A.nodeType===3&&/^\s*$/.test(A.nodeValue)}function c(A,E,G){E=z.create(E,G);A.parentNode.insertBefore(E,A);E.appendChild(A);return E}function j(A,E){function G(O,P,J,Q){var R;for(Q=Q||z.getRoot();;){R=O.parentNode;if(R==Q||!E[0].block_expand&&B(R))break;
for(N=R[P];N&&N!=O;N=N[J]){if(N.nodeType==1&&!p(N))return O;if(N.nodeType==3&&!d(N))return O}O=O.parentNode}return O}var I=A.startContainer,T=A.startOffset,L=A.endContainer,U=A.endOffset,N,S;if(I.nodeType==1&&I.hasChildNodes()){S=I.childNodes.length-1;I=I.childNodes[T>S?S:T];if(I.nodeType==3)T=0}if(L.nodeType==1&&L.hasChildNodes()){S=L.childNodes.length-1;L=L.childNodes[U>S?S:U-1];if(L.nodeType==3)U=L.nodeValue.length}if(p(I.parentNode))I=I.parentNode;if(p(I))I=I.nextSibling||I;if(p(L.parentNode))L=
L.parentNode;if(p(L))L=L.previousSibling||L;if(E[0].inline||E[0].block_expand){I=G(I,"firstChild","nextSibling");L=G(L,"lastChild","previousSibling")}if(E[0].selector&&E[0].expand!==V&&!E[0].inline){S=function(O,P){var J,Q,R;if(O.nodeType==3&&O.nodeValue.length==0&&O[P])O=O[P];J=z.getParents(O,void 0,z.getRoot());for(Q=0;Q<J.length;Q++)for(R=0;R<E.length;R++)if(z.is(J[Q],E[R].selector))return J[Q];return O};I=S(I,"previousSibling");L=S(L,"nextSibling")}if(E[0].block||E[0].selector){S=function(O,P){var J;
E[0].wrapper||(J=z.getParent(O,E[0].block));J||(J=z.getParent(O.nodeType==3?O.parentNode:O,B));if(J&&E[0].wrapper)J=z.getParents(J,"ul,ol",z.getRoot()).reverse()[0]||J;if(!J)for(J=O;J[P]&&!B(J[P]);){J=J[P];if(u(J,"br"))break}return J||O};I=S(I,"previousSibling");L=S(L,"nextSibling");if(E[0].block){B(I)||(I=G(I,"firstChild","nextSibling"));B(L)||(L=G(L,"lastChild","previousSibling"))}}if(I.nodeType==1){T=H(I);I=I.parentNode}if(L.nodeType==1){U=H(L)+1;L=L.parentNode}return{startContainer:I,startOffset:T,
endContainer:L,endOffset:U}}function a(A,E,G,I){var T,L,U;if(!r(G,A))return V;if(A.remove!="all"){y(A.styles,function(N,S){N=f(N,E);if(typeof S==="number"){S=N;I=0}if(!I||u(v(I,S),N))z.setStyle(G,S,"");U=1});if(U&&z.getAttrib(G,"style")==""){G.removeAttribute("style");G.removeAttribute("_mce_style")}y(A.attributes,function(N,S){var O;N=f(N,E);if(typeof S==="number"){S=N;I=0}if(!I||u(z.getAttrib(I,S),N)){if(S=="class")if(N=z.getAttrib(G,S)){O="";y(N.split(/\s+/),function(P){if(/mce\w+/.test(P))O+=
(O?" ":"")+P});if(O){z.setAttrib(G,S,O);return}}S=="class"&&G.removeAttribute("className");W.test(S)&&G.removeAttribute("_mce_"+S);G.removeAttribute(S)}});y(A.classes,function(N){N=f(N,E);if(!I||z.hasClass(I,N))z.removeClass(G,N)});L=z.getAttribs(G);for(T=0;T<L.length;T++)if(L[T].nodeName.indexOf("_")!==0)return V}if(A.remove!="none"){i(G,A);return aa}}function i(A,E){var G=A.parentNode,I;if(E.block)if(K){if(G==z.getRoot())if(!E.list_block||!u(A,E.list_block))y(l.grep(A.childNodes),function(L){if(D(K,
L.nodeName.toLowerCase()))if(I)I.appendChild(L);else I=c(L,K);else I=0})}else{var T=function(L,U,N){L=m(L,U,N);return!L||L.nodeName=="BR"||B(L)};if(B(A)&&!B(G)){!T(A,V)&&!T(A.firstChild,aa,1)&&A.insertBefore(z.create("br"),A.firstChild);!T(A,aa)&&!T(A.lastChild,V,1)&&A.appendChild(z.create("br"))}}E.selector&&E.inline&&!u(E.inline,A)||z.remove(A,1)}function m(A,E,G){if(A){E=E?"nextSibling":"previousSibling";for(A=G?A:A[E];A;A=A[E])if(A.nodeType==1||!d(A))return A}}function p(A){return A&&A.nodeType==
1&&A.getAttribute("_mce_type")=="bookmark"}function t(A,E){function G(L,U){function N(O){var P={};y(z.getAttribs(O),function(J){J=J.nodeName.toLowerCase();if(J.indexOf("_")!==0&&J!=="style")P[J]=z.getAttrib(O,J)});return P}function S(O,P){var J,Q;for(Q in O)if(O.hasOwnProperty(Q)){J=P[Q];if(J===ea)return V;if(O[Q]!=J)return V;delete P[Q]}for(Q in P)if(P.hasOwnProperty(Q))return V;return aa}if(L.nodeName!=U.nodeName)return V;if(!S(N(L),N(U)))return V;if(!S(z.parseStyle(z.getAttrib(L,"style")),z.parseStyle(z.getAttrib(U,
"style"))))return V;return aa}var I,T;if(A&&E){T=function(L,U){for(I=L;I;I=I[U]){if(I.nodeType==3&&!d(I))break;if(I.nodeType==1&&!p(I))return I}return L};A=T(A,"previousSibling");E=T(E,"nextSibling");if(G(A,E)){for(I=A.nextSibling;I&&I!=E;){T=I;I=I.nextSibling;A.appendChild(T)}z.remove(E);y(l.grep(E.childNodes),function(L){A.appendChild(L)});return A}}return E}function s(A,E){var G,I,T;G=A[E?"startContainer":"endContainer"];I=A[E?"startOffset":"endOffset"];if(G.nodeType==1){T=G.childNodes.length-
1;!E&&I&&I--;G=G.childNodes[I>T?T:I]}return G}function x(A,E,G){function I(){return Z.apply.length||Z.remove.length}function T(N){y(Z.apply.reverse(),function(S){b(S.name,S.vars,N)});y(Z.remove.reverse(),function(S){h(S.name,S.vars,N)});z.remove(N,1);Z.apply=[];Z.remove=[]}var L=Z[A],U=Z[A=="apply"?"remove":"apply"];for(A=L.length-1;A>=0;A--)if(L[A].name==E)return;L.push({name:E,vars:G});for(A=U.length-1;A>=0;A--)U[A].name==E&&U.splice(A,1);if(I()){o.getDoc().execCommand("FontName",false,"mceinline");
Z.lastRng=M.getRng();y(z.select("font,span"),function(N){var S;if(q(N)){S=M.getBookmark();T(N);M.moveToBookmark(S);o.nodeChanged()}});if(!Z.isListening&&I()){Z.isListening=true;y("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(N){o[N].addToTop(function(S,O){if(I()&&!l.dom.RangeUtils.compareRanges(Z.lastRng,M.getRng())){y(z.select("font,span"),function(P){var J;if(q(P)){J=P.firstChild;T(P);P=z.createRng();P.setStart(J,J.nodeValue.length);P.setEnd(J,J.nodeValue.length);M.setRng(P);S.nodeChanged()}});
if(O.type=="keyup"||O.type=="mouseup"){Z.apply=[];Z.remove=[]}}})})}}}var F={},y=l.each,z=o.dom,M=o.selection,X=l.dom.TreeWalker,C=new l.dom.RangeUtils(z),D=o.schema.isValid,B=z.isBlock,K=o.settings.forced_root_block,H=z.nodeIndex,W=/^(src|href|style)$/,V=false,aa=true,ea,Z={apply:[],remove:[]};l.extend(this,{get:g,register:k,apply:b,remove:h,toggle:function(A,E,G){n(A,E,G)?h(A,E,G):b(A,E,G)},match:n,matchAll:function(A,E){var G,I=[],T={},L,U;if(M.isCollapsed()){for(L=0;L<A.length;L++)for(G=Z.remove.length-
1;G>=0;G--){U=A[L];if(Z.remove[G].name==U){T[U]=true;break}}for(G=Z.apply.length-1;G>=0;G--)for(L=0;L<A.length;L++){U=A[L];if(!T[U]&&Z.apply[G].name==U){T[U]=true;I.push(U)}}}G=M.getStart();z.getParent(G,function(N){var S,O;for(S=0;S<A.length;S++){O=A[S];if(!T[O]&&e(N,O,E)){T[O]=true;I.push(O)}}});return I},matchNode:e,canApply:function(A){A=g(A);var E,G,I,T;if(A){E=M.getStart();E=z.getParents(E,void 0,z.getRoot());for(I=A.length-1;I>=0;I--){T=A[I].selector;if(!T)return aa;for(G=E.length-1;G>=0;G--)if(z.is(E[G],
T))return aa}}return V}})}})(tinymce);
tinymce.onAddEditor.add(function(l,o){var q,g,k,b=o.settings;if(b.inline_styles){g=l.explode(b.font_size_style_values);var h=function(n,r){k.replace(k.create("span",{style:r}),n,1)};q={font:function(n,r){h(r,{backgroundColor:r.style.backgroundColor,color:r.color,fontFamily:r.face,fontSize:g[parseInt(r.size)-1]})},u:function(n,r){h(r,{textDecoration:"underline"})},strike:function(n,r){h(r,{textDecoration:"line-through"})}};var e=function(n,r){k=n.dom;b.convert_fonts_to_spans&&l.each(k.select("font,u,strike",
r.node),function(u){q[u.nodeName.toLowerCase()](o.dom,u)})};o.onPreProcess.add(e);o.onInit.add(function(){o.selection.onSetContent.add(e)})}});
