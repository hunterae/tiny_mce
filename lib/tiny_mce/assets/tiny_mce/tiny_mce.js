(function(k){var o=/^\s*|\s*$/g,q="B".replace(/A(.)|B/,"$1")==="$1",m={majorVersion:"3",minorVersion:"4b2",releaseDate:"2011-01-13",_init:function(){function h(c){if(c.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(c.src)){if(/_(src|dev)\.js/g.test(c.src))a.suffix="_src";if((f=c.src.indexOf("?"))!=-1)a.query=c.src.substring(f+1);a.baseURL=c.src.substring(0,c.src.lastIndexOf("/"));if(g&&a.baseURL.indexOf("://")==-1&&a.baseURL.indexOf("/")!==0)a.baseURL=g+a.baseURL;return a.baseURL}return null}
var a=this,e=document,b=navigator,d=b.userAgent,g,f,l;a.isOpera=k.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(d);a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(b.appName);a.isIE6=a.isIE&&/MSIE [56]/.test(d);a.isGecko=!a.isWebKit&&/Gecko/.test(d);a.isMac=d.indexOf("Mac")!=-1;a.isAir=/adobeair/i.test(d);a.isIDevice=/(iPad|iPhone)/.test(d);if(k.tinyMCEPreInit){a.suffix=tinyMCEPreInit.suffix;a.baseURL=tinyMCEPreInit.base;a.query=tinyMCEPreInit.query}else{a.suffix="";d=e.getElementsByTagName("base");
for(b=0;b<d.length;b++)if(l=d[b].href){if(/^https?:\/\/[^\/]+$/.test(l))l+="/";g=l?l.match(/.*\//)[0]:""}d=e.getElementsByTagName("script");for(b=0;b<d.length;b++)if(h(d[b]))return;if(e=e.getElementsByTagName("head")[0]){d=e.getElementsByTagName("script");for(b=0;b<d.length;b++)if(h(d[b]))break}}},is:function(h,a){if(!a)return h!==void 0;if(a=="array"&&h.hasOwnProperty&&h instanceof Array)return true;return typeof h==a},makeMap:function(h,a,e){h=h||[];a=a||",";if(typeof h=="string")h=h.split(a);e=
e||{};for(a=h.length;a--;)e[h[a]]={};return e},each:function(h,a,e){var b,d;if(!h)return 0;e=e||h;if(h.length!==void 0){b=0;for(d=h.length;b<d;b++)if(a.call(e,h[b],b,h)===false)return 0}else for(b in h)if(h.hasOwnProperty(b))if(a.call(e,h[b],b,h)===false)return 0;return 1},trim:function(h){return(h?""+h:"").replace(o,"")},create:function(h,a,e){var b,d,g,f,l,c=0;h=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(h);g=h[3].match(/(^|\.)(\w+)$/i)[2];d=this.createNS(h[3].replace(/\.\w+$/,""),e);if(!d[g])if(h[2]==
"static"){d[g]=a;this.onCreate&&this.onCreate(h[2],h[3],d[g])}else{if(!a[g]){a[g]=function(){};c=1}d[g]=a[g];this.extend(d[g].prototype,a);if(h[5]){b=this.resolve(h[5]).prototype;f=h[5].match(/\.(\w+)$/i)[1];l=d[g];d[g]=c?function(){return b[f].apply(this,arguments)}:function(){this.parent=b[f];return l.apply(this,arguments)};d[g].prototype[g]=d[g];this.each(b,function(j,r){d[g].prototype[r]=b[r]});this.each(a,function(j,r){if(b[r])d[g].prototype[r]=function(){this.parent=b[r];return j.apply(this,
arguments)};else if(r!=g)d[g].prototype[r]=j})}this.each(a["static"],function(j,r){d[g][r]=j});this.onCreate&&this.onCreate(h[2],h[3],d[g].prototype)}},walk:function(h,a,e,b){b=b||this;if(h){if(e)h=h[e];m.each(h,function(d,g){if(a.call(b,d,g,e)===false)return false;m.walk(d,a,e,b)})}},createNS:function(h,a){var e,b;a=a||k;h=h.split(".");for(e=0;e<h.length;e++){b=h[e];a[b]||(a[b]={});a=a[b]}return a},resolve:function(h,a){var e,b;a=a||k;h=h.split(".");e=0;for(b=h.length;e<b;e++){a=a[h[e]];if(!a)break}return a},
addUnload:function(h,a){var e=this;h={func:h,scope:a||this};if(e.unloads)e.unloads.push(h);else{var b=function(){var g=e.unloads,f,l;if(g){for(l in g)(f=g[l])&&f.func&&f.func.call(f.scope,1);if(k.detachEvent){k.detachEvent("onbeforeunload",d);k.detachEvent("onunload",b)}else k.removeEventListener&&k.removeEventListener("unload",b,false);e.unloads=w=b=0;k.CollectGarbage&&CollectGarbage()}},d=function(){var g=document;if(g.readyState=="interactive"){var f=function(){g.detachEvent("onstop",f);b&&b();
g=0};g&&g.attachEvent("onstop",f);k.setTimeout(function(){g&&g.detachEvent("onstop",f)},0)}};if(k.attachEvent){k.attachEvent("onunload",b);k.attachEvent("onbeforeunload",d)}else k.addEventListener&&k.addEventListener("unload",b,false);e.unloads=[h]}return h},removeUnload:function(h){var a=this.unloads,e=null;m.each(a,function(b,d){if(b&&b.func==h){a.splice(d,1);e=h;return false}});return e},explode:function(h,a){return h?m.map(h.split(a||","),m.trim):h},_addVer:function(h){var a;if(!this.query)return h;
a=(h.indexOf("?")==-1?"?":"&")+this.query;if(h.indexOf("#")==-1)return h+a;return h.replace("#",a+"#")},_replace:function(h,a,e){if(q)return e.replace(h,function(){var b=a,d=arguments,g;for(g=0;g<d.length-2;g++)b=d[g]===void 0?b.replace(RegExp("\\$"+g,"g"),""):b.replace(RegExp("\\$"+g,"g"),d[g]);return b});return e.replace(h,a)}};m._init();k.tinymce=k.tinyMCE=m})(window);
(function(k,o){var q=/^(href|src|style)$/i;if(!k)return alert("Load jQuery first!");o.$=k;o.adapter={patchEditor:function(h){function a(f,l){l&&this.removeAttr("data-mce-style");return g.css.apply(this,arguments)}function e(f,l){if(q.test(f))if(l!==void 0){this.each(function(c,j){h.dom.setAttrib(j,f,l)});return this}else return this.attr("data-mce-"+f);return g.attr.apply(this,arguments)}function b(f){return function(l){if(l)l=h.dom.processHTML(l);return f.call(this,l)}}function d(f){if(f.css!==a){f.css=
a;f.attr=e;f.html=b(g.html);f.append=b(g.append);f.prepend=b(g.prepend);f.after=b(g.after);f.before=b(g.before);f.replaceWith=b(g.replaceWith);f.tinymce=h;f.pushStack=function(){return d(g.pushStack.apply(this,arguments))}}return f}var g=k.fn;h.$=function(f,l){var c=h.getDoc();return d(k(f||c,c||l))}}};o.extend=k.extend;o.extend(o,{map:k.map,grep:function(h,a){return k.grep(h,a||function(){return 1})},inArray:function(h,a){return k.inArray(a,h||[])}});var m={"tinymce.dom.DOMUtils":{select:function(h,
a){return k.find(h,this.get(a)||this.get(this.settings.root_element)||this.doc,[])},is:function(h,a){return k(this.get(h)).is(a)}}};o.onCreate=function(h,a,e){o.extend(e,m[a])}})(window.jQuery,tinymce);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(k){this.scope=k||this;this.listeners=[]},add:function(k,o){this.listeners.push({cb:k,scope:o||this.scope});return k},addToTop:function(k,o){this.listeners.unshift({cb:k,scope:o||this.scope});return k},remove:function(k){var o=this.listeners,q=null;tinymce.each(o,function(m,h){if(k==m.cb){q=k;o.splice(h,1);return false}});return q},dispatch:function(){var k,o=arguments,q,m=this.listeners;for(q=0;q<m.length;q++){k=
m[q];k=k.cb.apply(k.scope,o);if(k===false)break}return k}});
(function(){var k=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(o,q){var m=this,h;o=tinymce.trim(o);q=m.settings=q||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(o)||/^\s*#/.test(o))m.source=o;else{if(o.indexOf("/")===0&&o.indexOf("//")!==0)o=(q.base_uri?q.base_uri.protocol||"http":"http")+"://mce_host"+o;/^\w*:?\/\//.test(o)||(o=(q.base_uri.protocol||"http")+"://mce_host"+m.toAbsPath(q.base_uri.path,o));o=o.replace(/@@/g,"(mce_at)");o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(o);
k(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,e){var b=o[e];if(b)b=b.replace(/\(mce_at\)/g,"@@");m[a]=b});if(h=q.base_uri){if(!m.protocol)m.protocol=h.protocol;if(!m.userInfo)m.userInfo=h.userInfo;if(!m.port&&m.host=="mce_host")m.port=h.port;if(!m.host||m.host=="mce_host")m.host=h.host;m.source=""}}},setPath:function(o){o=/^(.*?)\/?(\w+)?$/.exec(o);this.path=o[0];this.directory=o[1];this.file=o[2];this.source=
"";this.getURI()},toRelative:function(o){var q;if(o==="./")return o;o=new tinymce.util.URI(o,{base_uri:this});if(o.host!="mce_host"&&this.host!=o.host&&o.host||this.port!=o.port||this.protocol!=o.protocol)return o.getURI();q=this.toRelPath(this.path,o.path);if(o.query)q+="?"+o.query;if(o.anchor)q+="#"+o.anchor;return q},toAbsolute:function(o,q){o=new tinymce.util.URI(o,{base_uri:this});return o.getURI(this.host==o.host&&this.protocol==o.protocol?q:0)},toRelPath:function(o,q){var m,h=0,a="",e,b;o=
o.substring(0,o.lastIndexOf("/"));o=o.split("/");m=q.split("/");if(o.length>=m.length){e=0;for(b=o.length;e<b;e++)if(e>=m.length||o[e]!=m[e]){h=e+1;break}}if(o.length<m.length){e=0;for(b=m.length;e<b;e++)if(e>=o.length||o[e]!=m[e]){h=e+1;break}}if(h==1)return q;e=0;for(b=o.length-(h-1);e<b;e++)a+="../";e=h-1;for(b=m.length;e<b;e++)a+=e!=h-1?"/"+m[e]:m[e];return a},toAbsPath:function(o,q){var m,h=0,a=[],e;e=/\/$/.test(q)?"/":"";o=o.split("/");q=q.split("/");k(o,function(b){b&&a.push(b)});o=a;m=q.length-
1;for(a=[];m>=0;m--)if(!(q[m].length==0||q[m]=="."))if(q[m]=="..")h++;else if(h>0)h--;else a.push(q[m]);m=o.length-h;m=m<=0?a.reverse().join("/"):o.slice(0,m).join("/")+"/"+a.reverse().join("/");if(m.indexOf("/")!==0)m="/"+m;if(e&&m.lastIndexOf("/")!==m.length-1)m+=e;return m},getURI:function(o){var q;if(!this.source||o){q="";if(!o){if(this.protocol)q+=this.protocol+"://";if(this.userInfo)q+=this.userInfo+"@";if(this.host)q+=this.host;if(this.port)q+=":"+this.port}if(this.path)q+=this.path;if(this.query)q+=
"?"+this.query;if(this.anchor)q+="#"+this.anchor;this.source=q}return this.source}})})();
(function(){var k=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(o){o=this.get(o);var q;o&&k(o.split("&"),function(m){m=m.split("=");q=q||{};q[unescape(m[0])]=unescape(m[1])});return q},setHash:function(o,q,m,h,a,e){var b="";k(q,function(d,g){b+=(!b?"":"&")+escape(g)+"="+escape(d)});this.set(o,b,m,h,a,e)},get:function(o){var q=document.cookie,m=o+"=",h;if(q){h=q.indexOf("; "+m);if(h==-1){h=q.indexOf(m);if(h!=0)return null}else h+=2;o=q.indexOf(";",h);if(o==-1)o=q.length;
return unescape(q.substring(h+m.length,o))}},set:function(o,q,m,h,a,e){document.cookie=o+"="+escape(q)+(m?"; expires="+m.toGMTString():"")+(h?"; path="+escape(h):"")+(a?"; domain="+a:"")+(e?"; secure":"")},remove:function(o,q){var m=new Date;m.setTime(m.getTime()-1E3);this.set(o,"",m,q,m)}})})();
(function(){function k(o,q){var m,h,a;q=q||'"';if(o==null)return"null";a=typeof o;if(a=="string"){h="\u0008b\tt\nn\u000cf\rr\"\"''\\\\";return q+o.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(e,b){m=h.indexOf(b);if(m+1)return"\\"+h.charAt(m+1);e=b.charCodeAt().toString(16);return"\\u"+"0000".substring(e.length)+e})+q}if(a=="object"){if(o.hasOwnProperty&&o instanceof Array){m=0;for(h="[";m<o.length;m++)h+=(m>0?",":"")+k(o[m],q);return h+"]"}h="{";for(m in o)h+=typeof o[m]!="function"?(h.length>
1?","+q:q)+m+q+":"+k(o[m],q):"";return h+"}"}return""+o}tinymce.util.JSON={serialize:k,parse:function(o){try{return eval("("+o+")")}catch(q){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(k){function o(e){q=0;try{q=new ActiveXObject(e)}catch(b){}return q}var q,m=window,h=0;k.scope=k.scope||this;k.success_scope=k.success_scope||k.scope;k.error_scope=k.error_scope||k.scope;k.async=k.async===false?false:true;k.data=k.data||"";if(q=m.XMLHttpRequest?new XMLHttpRequest:o("Microsoft.XMLHTTP")||o("Msxml2.XMLHTTP")){q.overrideMimeType&&q.overrideMimeType(k.content_type);q.open(k.type||(k.data?"POST":"GET"),k.url,k.async);k.content_type&&
q.setRequestHeader("Content-Type",k.content_type);q.setRequestHeader("X-Requested-With","XMLHttpRequest");q.send(k.data);var a=function(){if(!k.async||q.readyState==4||h++>1E4){if(k.success&&h<1E4&&q.status==200)k.success.call(k.success_scope,""+q.responseText,q,k);else if(k.error)k.error.call(k.error_scope,h>1E4?"TIMED_OUT":"GENERAL",q,k);q=null}else m.setTimeout(a,10)};if(!k.async)return a();m.setTimeout(a,10)}}});
(function(){var k=tinymce.extend,o=tinymce.util.JSON,q=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(m){this.settings=k({},m);this.count=0},send:function(m){var h=m.error,a=m.success;m=k(this.settings,m);m.success=function(e,b){e=o.parse(e);if(typeof e=="undefined")e={error:"JSON Parse error."};e.error?h.call(m.error_scope||m.scope,e.error,b):a.call(m.success_scope||m.scope,e.result)};m.error=function(e,b){if(h)h.call(m.error_scope||m.scope,e,b)};m.data=o.serialize({id:m.id||
"c"+this.count++,method:m.method,params:m.params});m.content_type="application/json";q.send(m)},"static":{sendRPC:function(m){return(new tinymce.util.JSONRequest).send(m)}}})})();
(function(k){function o(g,f){var l,c,j,r={};if(g){g=g.split(",");f=f||10;for(l=0;l<g.length;l+=2){c=String.fromCharCode(parseInt(g[l],f));if(!m[c]){j="&"+g[l+1]+";";r[c]=j;r[j]=c}}return r}}var q,m,h,a=/[&\"\u007E-\uFFFF]/g,e=/[<>&\u007E-\uFFFF]/g,b=/[<>&\"\']/g,d=/&(#)?([\w]+);/g;m={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};h={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};q=o("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);k.html=k.html||{};k.html.Entities={encodeRaw:function(g,f){return g.replace(f?a:e,function(l){return m[l]||l})},encodeAllRaw:function(g){return(""+g).replace(b,function(f){return m[f]||f})},encodeNumeric:function(g,f){return g.replace(f?a:e,function(l){return m[l]||"&#"+l.charCodeAt(0)+";"})},encodeNamed:function(g,f,l){l=l||q;return g.replace(f?a:e,function(c){return m[c]||l[c]||c})},getEncodeFunc:function(g,f){function l(r,p){return r.replace(p?a:e,function(n){return m[n]||f[n]||"&#"+n.charCodeAt(0)+
";"||n})}function c(r,p){return j.encodeNamed(r,p,f)}var j=k.html.Entities;f=o(f)||q;g=k.makeMap(g.replace(/\+/g,","));if(g.named&&g.numeric)return l;if(g.named){if(f)return c;return j.encodeNamed}if(g.numeric)return j.encodeNumeric;return j.encodeRaw},decode:function(g){return g.replace(d,function(f,l,c){if(l)return String.fromCharCode(c);if(!(l=h[f])){if(!(l=q[f])){l=document.createElement("div");l.innerHTML=f;l=l.textContent||l.innerText||f}l=l}return l})}}})(tinymce);
tinymce.html.Styles=function(k,o){function q(f,l,c,j){function r(p){p=parseInt(p).toString(16);return p.length>1?p:"0"+p}return"#"+r(l)+r(c)+r(j)}var m=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,h=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,e=/\s+$/,b,d={},g;k=k||{};g="\\\" \\' \\; \\: ; : _".split(" ");for(b=0;b<g.length;b++){d[g[b]]="_"+b;d["_"+b]=g[b]}return{toHex:function(f){return f.replace(m,
q)},parse:function(f){function l(y,x){var A,O;if(A=n[y+"-top"+x]){O=n[y+"-right"+x];if(A==O){A=n[y+"-bottom"+x];if(O==A){O=n[y+"-left"+x];if(A==O){n[y+x]=O;delete n[y+"-top"+x];delete n[y+"-right"+x];delete n[y+"-bottom"+x];delete n[y+"-left"+x]}}}}}function c(y){var x=n[y],A;if(!(!x||x.indexOf(" ")<0)){x=x.split(" ");for(A=x.length;A--;)if(x[A]!==x[0])return false;n[y]=x[0];return true}}function j(y,x,A,O){if(c(x))if(c(A))if(c(O)){n[y]=n[x]+" "+n[A]+" "+n[O];delete n[x];delete n[A];delete n[O]}}
function r(y){v=true;return d[y]}function p(y,x){if(v)y=y.replace(/_[0-9]/g,function(A){return d[A]});x||(y=y.replace(/\\([\'\";:])/g,"$1"));return y}var n={},s,u,t,v,D=k.url_converter,F=k.url_converter_scope||this;if(f){for(f=f.replace(/\\[\"\';:_]/g,r).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(y){return y.replace(/[;:]/g,r)});s=a.exec(f);){u=s[1].replace(e,"").toLowerCase();t=s[2].replace(e,"");if(u&&t.length>0){if(u==="font-weight"&&t==="700")t="bold";else if(u==="color"||u==="background-color")t=
t.toLowerCase();t=t.replace(m,q);t=t.replace(h,function(y,x,A,O,J,B){if(J=J||B){J=p(J);return"'"+J.replace(/\'/g,"\\'")+"'"}x=p(x||A||O);if(D)x=D.call(F,x,"style");return"url('"+x.replace(/\'/g,"\\'")+"')"});n[u]=v?p(t,true):t}a.lastIndex=s.index+s[0].length}l("border","");l("border","-width");l("border","-color");l("border","-style");l("padding","");l("margin","");j("border","border-width","border-style","border-color");n.border==="medium none"&&delete n.border}return n},serialize:function(f,l){function c(p){var n,
s,u,t;if(n=o.styles[p]){s=0;for(u=n.length;s<u;s++){p=n[s];t=f[p];if(t!==void 0)j+=(j.length>0?" ":"")+p+": "+t+";"}}}var j="",r;if(l&&o&&o.styles){c("*");c(r)}else for(r in f)j+=(j.length>0?" ":"")+r+": "+f[r]+";";return j}}};
(function(k){function o(g,f){return g.split(f||",")}var q={},m,h,a,e,b=k.makeMap,d=k.each;h="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";h=b(h,",",b(h.toUpperCase()));q=function(g,f){function l(r){return r.replace(/[A-Z]+/g,function(p){return l(g[p])})}var c,j={};for(c in g)if(g.hasOwnProperty(c))g[c]=l(g[c]);l(f).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,
function(r,p,n,s){n=o(n,"|");j[p]={attributes:b(n),attributesOrder:n,children:b(s,"|",{"#comment":{}})}});return j}({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",
T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",
A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|height|width|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|height|width|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|height|width][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");
m=b("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,preload,autoplay,loop,controls");a=b("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");e=b("pre,script,style");k.html.Schema=function(g){function f(u){var t,v,D,F,y,x,A,O,J,B,z,C,K,H,V,Z,ba,aa,fa=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,ea=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(u){u=o(u);if(r["@"]){Z=r["@"].attributes;ba=
r["@"].attributesOrder}t=0;for(v=u.length;t<v;t++)if(y=fa.exec(u[t])){H=y[1];J=y[2];V=y[3];O=y[4];C={};K=[];x={attributes:C,attributesOrder:K};if(H==="#")x.paddEmpty=true;if(H==="-")x.removeEmpty=true;if(Z){for(aa in Z)C[aa]=Z[aa];K.push.apply(K,ba)}if(O){O=o(O,"|");D=0;for(F=O.length;D<F;D++)if(y=ea.exec(O[D])){A={};z=y[1];B=y[2].replace(/::/g,":");H=y[3];y=y[4];if(z==="!"){x.attributesRequired=x.attributesRequired||[];x.attributesRequired.push(B);A.required=true}if(z==="-"){delete C[B];K.splice(k.inArray(K,
B),1)}else{if(H){if(H==="="){x.attributesDefault=x.attributesDefault||[];x.attributesDefault.push({name:B,value:y});A.defaultValue=y}if(H===":"){x.attributesForced=x.attributesForced||[];x.attributesForced.push({name:B,value:y});A.forcedValue=y}if(H==="<")A.validValues=b(y,"?")}if(E.test(B)){x.attributePatterns=x.attributePatterns||[];A.pattern=RegExp("^"+B.replace(/([?+*])/g,".$1")+"$");x.attributePatterns.push(A)}else{C[B]||K.push(B);C[B]=A}}}}if(!Z&&J=="@"){Z=C;ba=K}if(V){x.outputName=J;r[V]=x}if(E.test(J)){x.pattern=
RegExp("^"+J.replace(/([?+*])/g,".$1")+"$");n.push(x)}else r[J]=x}}}function l(u){r={};n=[];f(u);d(q,function(t,v){p[v]=t.children})}function c(u){var t=/^(~)?(.+)$/;u&&d(o(u),function(v){v=t.exec(v);var D=v[1]==="~"?"span":"div",F=v[2];p[F]=p[D];d(p,function(y){if(y[D])y[F]=y[D]})})}function j(u){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;u&&d(o(u),function(v){v=t.exec(v);var D,F;if(v){D=(F=v[1])?p[v[2]]:p[v[2]]={"#comment":{}};D=p[v[2]];d(o(v[3],"|"),function(y){if(F==="-")delete D[y];else D[y]={}})}})}
var r={},p={},n=[],s;g=g||{};if(g.verify_html===false)g.valid_elements="*[*]";if(g.valid_styles){s={};d(g.valid_styles,function(u,t){s[t]=k.explode(u)})}if(g.valid_elements)l(g.valid_elements);else{d(q,function(u,t){r[t]={attributes:u.attributes,attributesOrder:u.attributesOrder};p[t]=u.children});d(o("strong/b,em/i"),function(u){u=o(u,"/");r[u[1]].outputName=u[0]});r.img.attributesDefault=[{name:"alt",value:""}];d(o("ol,ul,li,sub,sup,blockquote,tr,div,span,font,a,table,tbody"),function(u){r[u].removeEmpty=
true});d(o("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(u){r[u].paddEmpty=true})}c(g.custom_elements);j(g.valid_children);f(g.extended_valid_elements);j("+ol[ul|ol],+ul[ul|ol]");g.invalid_elements&&k.each(k.explode(g.invalid_elements),function(u){r[u]&&delete r[u]});this.children=p;this.styles=s;this.getBoolAttrs=function(){return m};this.getBlockElements=function(){return h};this.getEmptyElements=function(){return a};this.getWhiteSpaceElements=function(){return e};this.isValidChild=
function(u,t){var v=p[u];return!!(v&&v[t])};this.getElementRule=function(u){var t=r[u],v;if(t)return t;for(v=n.length;v--;){t=n[v];if(t.pattern.test(u))return t}};this.addValidElements=f;this.setValidElements=l;this.addCustomElements=c;this.addValidChildren=j};k.html.Schema.boolAttrMap=m;k.html.Schema.blockElementsMap=h})(tinymce);
(function(k){k.html.SaxParser=function(o,q){var m=this,h=function(){};o=o||{};m.schema=q=q||new k.html.Schema;k.each("comment cdata text start end pi doctype".split(" "),function(a){if(a)m[a]=o[a]||h});m.parse=function(a){var e,b=0,d,g,f=[],l,c,j,r,p,n,s,u,t,v,D,F,y,x,A,O,J,B,z=0,C=k.html.Entities.decode;O=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)\\s*((?:[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]+))*)>))",
"g");J=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;B={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};p=q.getEmptyElements();n=q.getBoolAttrs();for(s=o.validate;e=O.exec(a);){b<e.index&&this.text(C(a.substr(b,e.index-b)));if(d=e[6]){d=d.toLowerCase();for(c=f.length;c--;)if(f[c].name===d)break;if(c>=0){for(g=f.length-1;g>=c;g--){d=f[g];d.valid&&this.end(d.name)}f.length=c}}else if(d=e[7]){d=d.toLowerCase();b=d in p;if(!s||
(u=q.getElementRule(d))){c=true;if(s){D=u.attributes;F=u.attributePatterns}if(v=e[8]){l=[];l.map={};v.replace(J,function(K,H,V,Z,ba){H=H.toLowerCase();V=H in n?H:C(V||Z||ba||"");if(s&&H.indexOf("data-")!==0){K=D[H];if(!K&&F){for(Z=F.length;Z--;){K=F[Z];if(K.pattern.test(H))break}if(Z===-1)K=null}if(!K)return;if(K.validValues&&!(V in K.validValues))return}l.map[H]=V;l.push({name:H,value:V})})}else{l=[];l.map={}}if(s){y=u.attributesRequired;x=u.attributesDefault;if(A=u.attributesForced)for(g=A.length;g--;){t=
A[g];r=t.name;t=t.value;if(t==="{$uid}")t="mce_"+z++;l.map[r]=t;l.push({name:r,value:t})}if(x)for(g=x.length;g--;){t=x[g];r=t.name;if(!(r in l.map)){t=t.value;if(t==="{$uid}")t="mce_"+z++;l.map[r]=t;l.push({name:r,value:t})}}if(y){for(g=y.length;g--;)if(y[g]in l.map)break;if(g===-1)c=false}}c&&this.start(d,l,b)}else c=false;if(g=B[d]){g.lastIndex=b=e.index+e[0].length;if(e=g.exec(a)){if(c)j=a.substr(b,e.index-b);b=e.index+e[0].length}else{j=a.substr(b);b=a.length}c&&j.length>0&&this.text(j,true);
c&&this.end(d);O.lastIndex=b;continue}if(!b)if(!v||v.indexOf("/")!=v.length-1)f.push({name:d,valid:c});else c&&this.end(d)}else if(d=e[1])this.comment(d);else if(d=e[2])this.cdata(d);else if(d=e[3])this.doctype(d);else if(d=e[4])this.pi(d,e[5]);b=e.index+e[0].length}b<a.length&&this.text(C(a.substr(b)));for(g=f.length-1;g>=0;g--){d=f[g];d.valid&&this.end(d.name)}}}})(tinymce);
(function(k){function o(a,e,b){var d;d=b?"lastChild":"firstChild";b=b?"prev":"next";if(a[d])return a[d];if(a!==e){if(d=a[b])return d;for(a=a.parent;a&&a!==e;a=a.parent)if(d=a[b])return d}}function q(a,e){this.name=a;this.type=e;if(e===1){this.attributes=[];this.attributes.map={}}}var m=/^[ \t\r\n]*$/,h={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};k.extend(q.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
e){var b,d;if(typeof a!=="string"){for(d in a)this.attr(d,a[d]);return this}if(b=this.attributes)if(e!==void 0){if(e===null){if(a in b.map){delete b.map[a];for(d=b.length;d--;)if(b[d].name===a){b.splice(d,1);break}}return this}if(a in b.map)for(d=b.length;d--;){if(b[d].name===a){b[d].value=e;break}}else b.push({name:a,value:e});b.map[a]=e;return this}else return b.map[a]},clone:function(){var a=new q(this.name,this.type),e,b,d,g,f;if(d=this.attributes){f=[];f.map={};e=0;for(b=d.length;e<b;e++){g=
d[e];if(g.name!=="id"){f[f.length]={name:g.name,value:g.value};f.map[g.name]=g.value}}a.attributes=f}a.value=this.value;a.empty=this.empty;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,e;for(a=this.firstChild;a;){e=a.next;this.insert(a,this,true);a=e}this.remove()},remove:function(){var a=this.parent,e=this.next,b=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=e)e.prev=null}else b.next=e;if(a.lastChild===this){if(a.lastChild=b)b.next=
null}else e.prev=b;this.parent=this.next=this.prev=null}return this},append:function(a){var e;a.parent&&a.remove();if(e=this.lastChild){e.next=a;a.prev=e;this.lastChild=a}else this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,e,b){var d;a.parent&&a.remove();d=e.parent||this;if(b){if(e===d.firstChild)d.firstChild=a;else e.prev.next=a;a.prev=e.prev;a.next=e;e.prev=a}else{if(e===d.lastChild)d.lastChild=a;else e.next.prev=a;a.next=e.next;a.prev=e;e.next=a}a.parent=d;return a},
getAll:function(a){var e,b=[];for(e=this.firstChild;e;e=o(e,this))e.name===a&&b.push(e);return b},empty:function(){var a,e,b;if(this.firstChild){a=[];for(b=this.firstChild;b;b=o(b,this))a.push(b);for(e=a.length;e--;){b=a[e];b.parent=b.firstChild=b.lastChild=b.next=b.prev=null}}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var e=this,b;do{if(e.type===1){if(a[e.name])return false;for(b=e.attributes.length;b--;)if(e.attributes[b].name.indexOf("data-")===0)return false}if(e.type===
3&&!m.test(e.value))return false}while(e=o(e,this));return true}});k.extend(q,{create:function(a,e){var b,d;b=new q(a,h[a]||1);if(e)for(d in e)b.attr(d,e[d]);return b}});k.html.Node=q})(tinymce);
(function(k){var o=k.html.Node;k.html.DomParser=function(q,m){function h(b){var d,g,f,l,c,j,r,p=m.getEmptyElements(),n;n=k.makeMap("tr,td,th,tbody,thead,tfoot,table");for(d=0;d<b.length;d++){g=b[d];if(g.parent){l=[g];for(f=g.parent;f&&!m.isValidChild(f.name,g.name)&&!n[f.name];f=f.parent)l.push(f);if(f&&l.length>1){l.reverse();c=j=l[0].clone();for(i=0;i<l.length-1;i++){if(m.isValidChild(j.name,l[i].name)){r=l[i].clone();j.append(r)}else r=j;for(childNode=l[i].firstChild;childNode&&childNode!=l[i+
1];childNode=childNode.next)r.append(childNode);j=r}if(c.isEmpty(p))f.insert(g,l[0],true);else{f.insert(c,l[0],true);f.insert(g,c)}l[0].isEmpty(p)&&l[0].empty().remove()}else if(g.parent)if(g.name==="li")if((f=g.prev)&&(f.name==="ul"||f.name==="ul"))f.append(g);else(f=g.next)&&(f.name==="ul"||f.name==="ul")?f.insert(g,f.firstChild,true):g.wrap(new o("ul",1));else if(m.isValidChild(g.parent.name,"div")&&m.isValidChild("div",g.name))g.wrap(new o("div",1));else g.name==="style"||g.name==="script"?g.empty().remove():
g.unwrap()}}}var a={},e=[];q=q||{};q.root_name=q.root_name||"body";this.schema=m=m||new k.html.Schema;this.addNodeFilter=function(b,d){k.each(k.explode(b),function(g){var f=a[g];f||(a[g]=f=[]);f.push(d)})};this.addAttributeFilter=function(b,d){k.each(k.explode(b),function(g){var f;for(f=0;f<e.length;f++)if(e[f].name===g){e[f].callbacks.push(d);return}e.push({name:g,callbacks:[d]})})};this.parse=function(b,d){function g(J,B){var z=new o(J,B),C;if(J in a)if(C=j[J])C.push(z);else j[J]=[z];return z}var f,
l,c,j={},r={},p,n,s,u,t,v,D,F=[],y,x,A,O;d=d||{};v=k.extend(k.makeMap("script,style,head,title,meta,param"),m.getBlockElements());O=m.children;A=m.getWhiteSpaceElements();D=/^[ \t\r\n]+/;y=/[ \t\r\n]+$/;x=/[ \t\r\n]+/g;f=new k.html.SaxParser({validate:q.validate,cdata:function(J){c.append(g("#cdata",4)).value=J},text:function(J,B){var z;if(!A[c.name]){J=J.replace(x," ");if(c.lastChild&&v[c.lastChild.name])J=J.replace(D,"")}if(J.length!==0){z=g("#text",3);z.raw=!!B;c.append(z).value=J}},comment:function(J){c.append(g("#comment",
8)).value=J},pi:function(J,B){c.append(g(J,7)).value=B},doctype:function(J){c.append(g("#doctype",10)).value=J},start:function(J,B,z){var C,K,H;if(C=m.getElementRule(J)){C=g(C.outputName||J,1);C.attributes=B;C.shortEnded=z;c.append(C);(K=O[c.name])&&O[C.name]&&!K[C.name]&&F.push(C);for(K=e.length;K--;){H=e[K].name;if(H in B.map)if(t=r[H])t.push(C);else r[H]=[C]}if(v[J])for(J=C.prev;J&&J.type===3;){B=J.value.replace(y,"");if(B.length>0){J.value=B;J=J.prev}else{B=J.prev;J.remove();J=B}}z||(c=C)}},end:function(J){var B,
z;if(B=m.getElementRule(J)){if(v[J]){if(!A[c.name]){for(J=c.firstChild;J&&J.type===3;){z=J.value.replace(D,"");if(z.length>0){J.value=z;J=J.next}else{z=J.next;J.remove();J=z}}for(J=c.lastChild;J&&J.type===3;){z=J.value.replace(y,"");if(z.length>0){J.value=z;J=J.prev}else{z=J.prev;J.remove();J=z}}}if((J=c.prev)&&J.type===3){z=J.value.replace(D,"");if(z.length>0)J.value=z;else J.remove()}}if(B.removeEmpty||B.paddEmpty)if(c.isEmpty(m.getEmptyElements()))if(B.paddEmpty)c.empty().append(new o("#text",
"3")).value="\u00a0";else{if(!c.attributes.map.name){B=c.parent;c.empty().remove();c=B}return}c=c.parent}}},m);l=c=new o(q.root_name,11);f.parse(b);h(F);for(u in j){t=a[u];f=j[u];for(s=f.length;s--;)f[s].parent||f.splice(s,1);p=0;for(n=t.length;p<n;p++)t[p](f,u,d)}p=0;for(n=e.length;p<n;p++){t=e[p];if(t.name in r){f=r[t.name];for(s=f.length;s--;)f[s].parent||f.splice(s,1);s=0;for(u=t.callbacks.length;s<u;s++)t.callbacks[s](f,t.name,d)}}return l}}})(tinymce);
tinymce.html.Writer=function(k){var o=[],q,m,h,a;k=k||{};q=k.indent;m=tinymce.makeMap(k.indent_before||"");h=tinymce.makeMap(k.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(k.entity_encoding||"raw",k.entities);return{start:function(e,b,d){var g,f;if(q&&m[e]&&o.length>0){g=o[o.length-1];g.length>0&&g!=="\n"&&o.push("\n")}o.push("<",e);if(b){e=0;for(g=b.length;e<g;e++){f=b[e];o.push(" ",f.name,'="',a(f.value,true),'"')}}o[o.length]=d?" />":">"},end:function(e){o.push("</",e,">");if(q&&h[e]&&
o.length>0){e=o[o.length-1];e.length>0&&e!=="\n"&&o.push("\n")}},text:function(e,b){if(e.length>0)o[o.length]=b?e:a(e)},cdata:function(e){o.push("<![CDATA[",e,"]]\>")},comment:function(e){o.push("<!--",e,"--\>")},pi:function(e,b){b?o.push("<?",e," ",b,"?>"):o.push("<?",e,"?>")},doctype:function(e){o.push("<!DOCTYPE",e,">")},reset:function(){o.length=0},getContent:function(){return o.join("").replace(/\n$/,"")}}};
(function(k){k.html.Serializer=function(o,q){var m=new k.html.Writer(o);o=o||{};o.validate="validate"in o?o.validate:true;this.schema=q=q||new k.html.Schema;this.writer=m;this.serialize=function(h){function a(d){var g=e[d.type],f,l,c,j,r,p,n,s;if(g)g(d);else{g=d.name;f=d.shortEnded;l=d.attributes;if(b&&l&&l.length>1){r=[];r.map={};s=q.getElementRule(d.name);p=0;for(n=s.attributesOrder.length;p<n;p++){c=s.attributesOrder[p];if(c in l.map){j=l.map[c];r.map[c]=j;r.push({name:c,value:j})}}p=0;for(n=l.length;p<
n;p++){c=l[p].name;if(!(c in r.map)){j=l.map[c];r.map[c]=j;r.push({name:c,value:j})}}l=r}m.start(d.name,l,f);if(!f){if(d=d.firstChild){do a(d);while(d=d.next)}m.end(g)}}}var e,b;b=o.validate;e={3:function(d){m.text(d.value,d.raw)},8:function(d){m.comment(d.value)},7:function(d){m.pi(d.name,d.value)},10:function(d){m.doctype(d.value)},4:function(d){m.cdata(d.value)},11:function(d){if(d=d.firstChild){do a(d);while(d=d.next)}}};m.reset();h.type==1&&!o.inner?a(h):e[11](h);return m.getContent()}}})(tinymce);
(function(k){var o=k.each,q=k.is,m=k.isWebKit,h=k.isIE,a=k.html.Entities,e=k.html.Schema.blockElementsMap;k.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,d){this.doc=b;this.win=window;this.files=
{};this.cssFlicker=false;this.counter=0;this.stdMode=!k.isIE||b.documentMode>=8;this.boxModel=!k.isIE||b.compatMode=="CSS1Compat"||this.stdMode;this.hasOuterHTML="outerHTML"in b.createElement("a");this.settings=d=k.extend({keep_values:false,hex_colors:1},d);this.styles=new k.html.Styles({url_converter:d.url_converter,url_converter_scope:d.url_converter_scope},d.schema);if(k.isIE6)try{b.execCommand("BackgroundImageCache",false,true)}catch(g){this.cssFlicker=true}h&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,
function(f){b.createElement(f)});k.addUnload(this.destroy,this)},getRoot:function(){var b=this.settings;return b&&this.get(b.root_element)||this.doc.body},getViewPort:function(b){var d;b=!b?this.win:b;d=b.document;d=this.boxModel?d.documentElement:d.body;return{x:b.pageXOffset||d.scrollLeft,y:b.pageYOffset||d.scrollTop,w:b.innerWidth||d.clientWidth,h:b.innerHeight||d.clientHeight}},getRect:function(b){var d;b=this.get(b);d=this.getPos(b);b=this.getSize(b);return{x:d.x,y:d.y,w:b.w,h:b.h}},getSize:function(b){var d,
g;b=this.get(b);d=this.getStyle(b,"width");g=this.getStyle(b,"height");if(d.indexOf("px")===-1)d=0;if(g.indexOf("px")===-1)g=0;return{w:parseInt(d)||b.offsetWidth||b.clientWidth,h:parseInt(g)||b.offsetHeight||b.clientHeight}},getParent:function(b,d,g){return this.getParents(b,d,g,false)},getParents:function(b,d,g,f){var l=this,c,j=l.settings,r=[];b=l.get(b);f=f===undefined;if(j.strict_root)g=g||l.getRoot();if(q(d,"string")){c=d;d=d==="*"?function(p){return p.nodeType==1}:function(p){return l.is(p,
c)}}for(;b;){if(b==g||!b.nodeType||b.nodeType===9)break;if(!d||d(b))if(f)r.push(b);else return b;b=b.parentNode}return f?r:null},get:function(b){var d;if(b&&this.doc&&typeof b=="string"){d=b;if((b=this.doc.getElementById(b))&&b.id!==d)return this.doc.getElementsByName(d)[1]}return b},getNext:function(b,d){return this._findSib(b,d,"nextSibling")},getPrev:function(b,d){return this._findSib(b,d,"previousSibling")},add:function(b,d,g,f,l){var c=this;return this.run(b,function(j){var r;r=q(d,"string")?
c.doc.createElement(d):d;c.setAttribs(r,g);if(f)f.nodeType?r.appendChild(f):c.setHTML(r,f);return!l?j.appendChild(r):r})},create:function(b,d,g){return this.add(this.doc.createElement(b),b,d,g,1)},createHTML:function(b,d,g){var f="",l;f+="<"+b;for(l in d)if(d.hasOwnProperty(l))f+=" "+l+'="'+this.encode(d[l])+'"';if(typeof g!="undefined")return f+">"+g+"</"+b+">";return f+" />"},remove:function(b,d){return this.run(b,function(g){var f,l;f=g.parentNode;if(!f)return null;if(d)for(;l=g.firstChild;)!k.isIE||
l.nodeType!==3||l.nodeValue?f.insertBefore(l,g):g.removeChild(l);return f.removeChild(g)})},setStyle:function(b,d,g){var f=this;return f.run(b,function(l){var c;c=l.style;d=d.replace(/-(\D)/g,function(j,r){return r.toUpperCase()});if(f.pixelStyles.test(d)&&(k.is(g,"number")||/^[\-0-9\.]+$/.test(g)))g+="px";switch(d){case "opacity":if(h){c.filter=g===""?"":"alpha(opacity="+g*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)c.display="inline-block"}c[d]=c["-moz-opacity"]=c["-khtml-opacity"]=g||
"";break;case "float":h?c.styleFloat=g:c.cssFloat=g;break;default:c[d]=g||""}f.settings.update_styles&&f.setAttrib(l,"data-mce-style")})},getStyle:function(b,d,g){b=this.get(b);if(!b)return false;if(this.doc.defaultView&&g){d=d.replace(/[A-Z]/g,function(l){return"-"+l});try{return this.doc.defaultView.getComputedStyle(b,null).getPropertyValue(d)}catch(f){return null}}d=d.replace(/-(\D)/g,function(l,c){return c.toUpperCase()});if(d=="float")d=h?"styleFloat":"cssFloat";if(b.currentStyle&&g)return b.currentStyle[d];
return b.style[d]},setStyles:function(b,d){var g=this,f=g.settings,l;l=f.update_styles;f.update_styles=0;o(d,function(c,j){g.setStyle(b,j,c)});f.update_styles=l;f.update_styles&&g.setAttrib(b,f.cssText)},removeAllAttribs:function(b){return this.run(b,function(d){for(var g=d.attributes,f=g.length-1;f>=0;f--)d.removeAttributeNode(g.item(f))})},setAttrib:function(b,d,g){var f=this;if(b&&d){if(f.settings.strict)d=d.toLowerCase();return this.run(b,function(l){var c=f.settings;switch(d){case "style":if(!q(g,
"string")){o(g,function(j,r){f.setStyle(l,r,j)});return}if(c.keep_values)g&&!f._isRes(g)?l.setAttribute("data-mce-style",g,2):l.removeAttribute("data-mce-style",2);l.style.cssText=g;break;case "class":l.className=g||"";break;case "src":case "href":if(c.keep_values){if(c.url_converter)g=c.url_converter.call(c.url_converter_scope||f,g,d,l);f.setAttrib(l,"data-mce-"+d,g,2)}break;case "shape":l.setAttribute("data-mce-style",g)}q(g)&&g!==null&&g.length!==0?l.setAttribute(d,""+g,2):l.removeAttribute(d,
2)})}},setAttribs:function(b,d){var g=this;return this.run(b,function(f){o(d,function(l,c){g.setAttrib(f,c,l)})})},getAttrib:function(b,d,g){var f;b=this.get(b);if(!b||b.nodeType!==1)return false;q(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(d))if(f=b.getAttribute("data-mce-"+d))return f;if(h&&this.props[d])f=(f=b[this.props[d]])&&f.nodeValue?f.nodeValue:f;f||(f=b.getAttribute(d,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(d)){if(b[this.props[d]]===
true&&f==="")return d;return f?d:""}if(b.nodeName==="FORM"&&b.getAttributeNode(d))return b.getAttributeNode(d).nodeValue;if(d==="style")if(f=f||b.style.cssText){f=this.serializeStyle(this.parseStyle(f),b.nodeName);this.settings.keep_values&&!this._isRes(f)&&b.setAttribute("data-mce-style",f)}if(m&&d==="class"&&f)f=f.replace(/(apple|webkit)\-[a-z\-]+/gi,"");if(h)switch(d){case "rowspan":case "colspan":if(f===1)f="";break;case "size":if(f==="+0"||f===20||f===0)f="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":if(f===
0)f="";break;case "hspace":if(f===-1)f="";break;case "maxlength":case "tabindex":if(f===32768||f===2147483647||f==="32768")f="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(f===65535)return d;return g;case "shape":f=f.toLowerCase();break;default:if(d.indexOf("on")===0&&f)f=k._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+f)}return f!==undefined&&f!==null&&f!==""?""+f:g},getPos:function(b,d){var g=0,f=0,l=this.doc;b=this.get(b);d=d||l.body;if(b){if(h&&!this.stdMode){b=
b.getBoundingClientRect();f=this.boxModel?l.documentElement:l.body;g=this.getStyle(this.select("html")[0],"borderWidth");g=(g=="medium"||this.boxModel&&!this.isIE6)&&2||g;return{x:b.left+f.scrollLeft-g,y:b.top+f.scrollTop-g}}for(l=b;l&&l!=d&&l.nodeType;){g+=l.offsetLeft||0;f+=l.offsetTop||0;l=l.offsetParent}for(l=b.parentNode;l&&l!=d&&l.nodeType;){g-=l.scrollLeft||0;f-=l.scrollTop||0;l=l.parentNode}}return{x:g,y:f}},parseStyle:function(b){return this.styles.parse(b)},serializeStyle:function(b,d){return this.styles.serialize(b,
d)},loadCSS:function(b){var d=this,g=d.doc,f;b||(b="");f=d.select("head")[0];o(b.split(","),function(l){var c;if(!d.files[l]){d.files[l]=true;c=d.create("link",{rel:"stylesheet",href:k._addVer(l)});if(h&&g.documentMode&&g.recalc)c.onload=function(){g.recalc&&g.recalc();c.onload=null};f.appendChild(c)}})},addClass:function(b,d){return this.run(b,function(g){var f;if(!d)return 0;if(this.hasClass(g,d))return g.className;f=this.removeClass(g,d);return g.className=(f!=""?f+" ":"")+d})},removeClass:function(b,
d){var g=this,f;return g.run(b,function(l){var c;if(g.hasClass(l,d)){f||(f=RegExp("(^|\\s+)"+d+"(\\s+|$)","g"));c=l.className.replace(f," ");c=k.trim(c!=" "?c:"");l.className=c;if(!c){l.removeAttribute("class");l.removeAttribute("className")}return c}return l.className})},hasClass:function(b,d){b=this.get(b);if(!b||!d)return false;return(" "+b.className+" ").indexOf(" "+d+" ")!==-1},show:function(b){return this.setStyle(b,"display","block")},hide:function(b){return this.setStyle(b,"display","none")},
isHidden:function(b){b=this.get(b);return!b||b.style.display=="none"||this.getStyle(b,"display")=="none"},uniqueId:function(b){return(!b?"mce_":b)+this.counter++},setHTML:function(b,d){var g=this;return g.run(b,function(f){if(h){for(;f.firstChild;)f.removeChild(f.firstChild);try{f.innerHTML="<br />"+d;f.removeChild(f.firstChild)}catch(l){f=g.create("div");f.innerHTML="<br />"+d;o(f.childNodes,function(c,j){j&&f.appendChild(c)})}}else f.innerHTML=d;return d})},getOuterHTML:function(b){var d;b=this.get(b);
if(!b)return null;if(b.nodeType===1&&this.hasOuterHTML)return b.outerHTML;d=(b.ownerDocument||this.doc).createElement("body");d.appendChild(b.cloneNode(true));return d.innerHTML},setOuterHTML:function(b,d,g){function f(c,j,r){r=r.createElement("body");r.innerHTML=j;for(j=r.lastChild;j;){l.insertAfter(j.cloneNode(true),c);j=j.previousSibling}l.remove(c)}var l=this;return this.run(b,function(c){c=l.get(c);if(c.nodeType==1){g=g||c.ownerDocument||l.doc;if(h)try{if(h&&c.nodeType==1)c.outerHTML=d;else f(c,
d,g)}catch(j){f(c,d,g)}else f(c,d,g)}})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(b,d){d=this.get(d);return this.run(b,function(g){var f,l;f=d.parentNode;(l=d.nextSibling)?f.insertBefore(g,l):f.appendChild(g);return g})},isBlock:function(b){var d=b.nodeType;if(d)return!!(d===1&&e[b.nodeName]);return!!e[b]},replace:function(b,d,g){if(q(d,"array"))b=b.cloneNode(true);return this.run(d,function(f){g&&o(k.grep(f.childNodes),function(l){b.appendChild(l)});return f.parentNode.replaceChild(b,
f)})},rename:function(b,d){var g=this,f;if(b.nodeName!=d.toUpperCase()){f=g.create(d);o(g.getAttribs(b),function(l){g.setAttrib(f,l.nodeName,g.getAttrib(b,l.nodeName))});g.replace(f,b,1)}return f||b},findCommonAncestor:function(b,d){for(var g=b,f;g;){for(f=d;f&&g!=f;)f=f.parentNode;if(g==f)break;g=g.parentNode}if(!g&&b.ownerDocument)return b.ownerDocument.documentElement;return g},toHex:function(b){function d(f){f=parseInt(f).toString(16);return f.length>1?f:"0"+f}var g=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(b);
if(g)return b="#"+d(g[1])+d(g[2])+d(g[3]);return b},getClasses:function(){function b(j){o(j.imports,function(r){b(r)});o(j.cssRules||j.rules,function(r){switch(r.type||1){case 1:r.selectorText&&o(r.selectorText.split(","),function(p){p=p.replace(/^\s*|\s*$|^\s\./g,"");if(!(/\.mce/.test(p)||!/\.[\w\-]+$/.test(p))){l=p;p=k._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",p);if(!(f&&!(p=f(p,l))))if(!g[p]){d.push({"class":p});g[p]=1}}});break;case 3:b(r.styleSheet)}})}var d=[],g={},f=this.settings.class_filter,
l;if(this.classes)return this.classes;try{o(this.doc.styleSheets,b)}catch(c){}if(d.length>0)this.classes=d;return d},run:function(b,d,g){var f=this,l;if(f.doc&&typeof b==="string")b=f.get(b);if(!b)return false;g=g||this;if(!b.nodeType&&(b.length||b.length===0)){l=[];o(b,function(c,j){if(c){if(typeof c=="string")c=f.doc.getElementById(c);l.push(d.call(g,c,j))}});return l}return d.call(g,b)},getAttribs:function(b){var d;b=this.get(b);if(!b)return[];if(h){d=[];if(b.nodeName=="OBJECT")return b.attributes;
b.nodeName==="OPTION"&&this.getAttrib(b,"selected")&&d.push({specified:1,nodeName:"selected"});b.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(g){d.push({specified:1,nodeName:g})});return d}return b.attributes},destroy:function(b){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;b||k.removeUnload(this.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new k.dom.Range(this)},
nodeIndex:function(b,d){var g=0,f,l;if(b){f=b.nodeType;for(b=b.previousSibling;b;b=b.previousSibling){l=b.nodeType;if(d&&l==3)if(l==f||!b.nodeValue.length)continue;g++;f=l}}return g},split:function(b,d,g){function f(p){var n,s=p.childNodes;if(!(p.nodeType==1&&p.getAttribute("data-mce-type")=="bookmark")){for(n=s.length-1;n>=0;n--)f(s[n]);if(p.nodeType!=9){if(p.nodeType==3&&p.nodeValue.length>0)if(!l.isBlock(p.parentNode)||k.trim(p.nodeValue).length>0)return;if(p.nodeType==1){s=p.childNodes;s.length==
1&&s[0]&&s[0].nodeType==1&&s[0].getAttribute("data-mce-type")=="bookmark"&&p.parentNode.insertBefore(s[0],p);if(s.length||/^(br|hr|input|img)$/i.test(p.nodeName))return}l.remove(p)}return p}}var l=this,c=l.createRng(),j,r;if(b&&d){c.setStart(b.parentNode,l.nodeIndex(b));c.setEnd(d.parentNode,l.nodeIndex(d));j=c.extractContents();c=l.createRng();c.setStart(d.parentNode,l.nodeIndex(d)+1);c.setEnd(b.parentNode,l.nodeIndex(b)+1);c=c.extractContents();r=b.parentNode;r.insertBefore(f(j),b);g?r.replaceChild(g,
d):r.insertBefore(d,b);r.insertBefore(f(c),b);l.remove(b);return g||d}},bind:function(b,d,g,f){if(!this.events)this.events=new k.dom.EventUtils;return this.events.add(b,d,g,f||this)},unbind:function(b,d,g){if(!this.events)this.events=new k.dom.EventUtils;return this.events.remove(b,d,g)},_findSib:function(b,d,g){var f=this,l=d;if(b){if(q(l,"string"))l=function(c){return f.is(c,d)};for(b=b[g];b;b=b[g])if(l(b))return b}return null},_isRes:function(b){return/^(top|left|bottom|right|width|height)/i.test(b)||
/;\s*(top|left|bottom|right|width|height)/i.test(b)}});k.DOM=new k.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(k){function o(q){function m(B,z){g(v,B,z)}function h(B,z){g(D,B,z)}function a(B){m(B.parentNode,J(B))}function e(B){h(B.parentNode,J(B)+1)}function b(B,z){var C;if(B.nodeType==3)return B;if(z<0)return B;for(C=B.firstChild;C&&z>0;){--z;C=C.nextSibling}if(C)return C;return B}function d(B,z,C,K){var H,V;if(B==C){if(z==K)return 0;if(z<K)return-1;return 1}for(H=C;H&&H.parentNode!=B;)H=H.parentNode;if(H){V=0;for(C=B.firstChild;C!=H&&V<z;){V++;C=C.nextSibling}if(z<=V)return-1;return 1}for(H=B;H&&
H.parentNode!=C;)H=H.parentNode;if(H){V=0;for(C=C.firstChild;C!=H&&V<K;){V++;C=C.nextSibling}if(V<K)return-1;return 1}z=q.findCommonAncestor(B,C);for(B=B;B&&B.parentNode!=z;)B=B.parentNode;B||(B=z);for(K=C;K&&K.parentNode!=z;)K=K.parentNode;K||(K=z);if(B==K)return 0;for(C=z.firstChild;C;){if(C==B)return-1;if(C==K)return 1;C=C.nextSibling}}function g(B,z,C){if(B){n[y]=z;n[F]=C}else{n[x]=z;n[A]=C}for(z=n[x];z.parentNode;)z=z.parentNode;for(C=n[y];C.parentNode;)C=C.parentNode;if(C==z)d(n[y],n[F],n[x],
n[A])>0&&n.collapse(B);else n.collapse(B);n.collapsed=n[y]==n[x]&&n[F]==n[A];n.commonAncestorContainer=q.findCommonAncestor(n[y],n[x])}function f(B){var z,C=0,K=0,H;if(n[y]==n[x])return l(B);z=n[x];for(H=z.parentNode;H;z=H,H=H.parentNode){if(H==n[y]){var V=z;B=B;z=void 0;H=void 0;C=void 0;K=void 0;H=void 0;if(B!=t)z=s.createDocumentFragment();H=c(V,B);z&&z.appendChild(H);C=J(V)-n[F];if(!(C<=0))for(H=V.previousSibling;C>0;){K=H.previousSibling;H=p(H,B);z&&z.insertBefore(H,z.firstChild);--C;H=K}if(B!=
u){n.setEndBefore(V);n.collapse(D)}B=z;return B}++C}z=n[y];for(H=z.parentNode;H;z=H,H=H.parentNode){if(H==n[x]){V=z;B=B;z=void 0;C=void 0;H=void 0;C=void 0;K=void 0;H=void 0;if(B!=t)z=s.createDocumentFragment();H=j(V,B);z&&z.appendChild(H);C=J(V);++C;C=n[A]-C;for(H=V.nextSibling;C>0;){K=H.nextSibling;H=p(H,B);z&&z.appendChild(H);--C;H=K}if(B!=u){n.setStartAfter(V);n.collapse(v)}return z}++K}K=K-C;for(z=n[y];K>0;){z=z.parentNode;K--}for(C=n[x];K<0;){C=C.parentNode;K++}K=z.parentNode;for(H=C.parentNode;K!=
H;K=K.parentNode,H=H.parentNode){z=K;C=H}z=z;C=C;var Z;if(B!=t)V=s.createDocumentFragment();Z=j(z,B);V&&V.appendChild(Z);K=J(z);H=J(C);++K;K=H-K;for(Z=z.nextSibling;K>0;){H=Z.nextSibling;Z=p(Z,B);V&&V.appendChild(Z);Z=H;--K}Z=c(C,B);V&&V.appendChild(Z);if(B!=u){n.setStartAfter(z);n.collapse(v)}return V}function l(B){var z,C,K,H;if(B!=t)z=s.createDocumentFragment();if(n[F]==n[A])return z;if(n[y].nodeType==3){C=n[y].nodeValue;C=C.substring(n[F],n[A]);if(B!=u){n[y].deleteData(n[F],n[A]-n[F]);n.collapse(v)}if(B==
t)return;z.appendChild(s.createTextNode(C));return z}K=b(n[y],n[F]);for(C=n[A]-n[F];C>0;){H=K.nextSibling;K=p(K,B);z&&z.appendChild(K);--C;K=H}B!=u&&n.collapse(v);return z}function c(B,z){var C=b(n[x],n[A]-1),K,H,V,Z=C!=n[x];if(C==B)return r(C,Z,D,z);K=C.parentNode;for(H=r(K,D,D,z);K;){for(;C;){V=C.previousSibling;C=r(C,Z,D,z);z!=t&&H.insertBefore(C,H.firstChild);Z=v;C=V}if(K==B)return H;C=K.previousSibling;K=K.parentNode;V=r(K,D,D,z);z!=t&&V.appendChild(H);H=V}}function j(B,z){var C=b(n[y],n[F]),
K=C!=n[y],H,V,Z;if(C==B)return r(C,K,v,z);H=C.parentNode;for(V=r(H,D,v,z);H;){for(;C;){Z=C.nextSibling;C=r(C,K,v,z);z!=t&&V.appendChild(C);K=v;C=Z}if(H==B)return V;C=H.nextSibling;H=H.parentNode;Z=r(H,D,v,z);z!=t&&Z.appendChild(V);V=Z}}function r(B,z,C,K){var H;if(z)return p(B,K);if(B.nodeType==3){z=B.nodeValue;if(C){H=n[F];C=z.substring(H);z=z.substring(0,H)}else{H=n[A];C=z.substring(0,H);z=z.substring(H)}if(K!=u)B.nodeValue=z;if(K==t)return;B=B.cloneNode(D);B.nodeValue=C;return B}if(K!=t)return B.cloneNode(D)}
function p(B,z){if(z!=t)return z==u?B.cloneNode(v):B;B.parentNode.removeChild(B)}var n=this,s=q.doc,u=1,t=2,v=true,D=false,F="startOffset",y="startContainer",x="endContainer",A="endOffset",O=tinymce.extend,J=q.nodeIndex;O(n,{startContainer:s,startOffset:0,endContainer:s,endOffset:0,collapsed:v,commonAncestorContainer:s,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:m,setEnd:h,setStartBefore:a,setStartAfter:function(B){m(B.parentNode,J(B)+1)},setEndBefore:function(B){h(B.parentNode,
J(B))},setEndAfter:e,collapse:function(B){if(B){n[x]=n[y];n[A]=n[F]}else{n[y]=n[x];n[F]=n[A]}n.collapsed=v},selectNode:function(B){a(B);e(B)},selectNodeContents:function(B){m(B,0);h(B,B.nodeType===1?B.childNodes.length:B.nodeValue.length)},compareBoundaryPoints:function(B,z){var C=n[y],K=n[F],H=n[x],V=n[A],Z=z.startContainer,ba=z.startOffset,aa=z.endContainer,fa=z.endOffset;if(B===0)return d(C,K,Z,ba);if(B===1)return d(H,V,Z,ba);if(B===2)return d(H,V,aa,fa);if(B===3)return d(C,K,aa,fa)},deleteContents:function(){f(t)},
extractContents:function(){return f(0)},cloneContents:function(){return f(u)},insertNode:function(B){var z=this[y],C=this[F],K;if((z.nodeType===3||z.nodeType===4)&&z.nodeValue)if(C)if(C>=z.nodeValue.length)q.insertAfter(B,z);else{C=z.splitText(C);z.parentNode.insertBefore(B,C)}else z.parentNode.insertBefore(B,z);else{if(z.childNodes.length>0)K=z.childNodes[C];K?z.insertBefore(B,K):z.appendChild(B)}},surroundContents:function(B){var z=n.extractContents();n.insertNode(B);B.appendChild(z);n.selectNode(B)},
cloneRange:function(){return O(new o(q),{startContainer:n[y],startOffset:n[F],endContainer:n[x],endOffset:n[A],collapsed:n.collapsed,commonAncestorContainer:n.commonAncestorContainer})}})}k.Range=o})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(k){function o(){function b(c){var j,r,p,n=0,s,u,t,v;p=d.duplicate();p.collapse(c);j=a.create("a");t=p.parentElement();if(t.hasChildNodes()){t.appendChild(j);p.moveToElementText(j);v=d.compareEndPoints(c?"StartToStart":"EndToEnd",p);if(v>0){g[c?"setStartAfter":"setEndAfter"](t);a.remove(j)}else{r=tinymce.grep(t.childNodes);for(s=r.length-1;n<=s;){u=Math.floor((n+s)/2);t.insertBefore(j,r[u]);p.moveToElementText(j);v=d.compareEndPoints(c?"StartToStart":
"EndToEnd",p);if(v>0)n=u+1;else if(v<0)s=u-1;else{found=true;break}}r=v>0||u==0?j.nextSibling:j.previousSibling;if(r.nodeType==1){a.remove(j);p=a.nodeIndex(r);r=r.parentNode;if(!c||u>0)p++}else{if(v>0||u==0){p.setEndPoint(c?"StartToStart":"EndToEnd",d);p=p.text.length}else{p.setEndPoint(c?"StartToStart":"EndToEnd",d);p=r.nodeValue.length-p.text.length}a.remove(j)}g[c?"setStart":"setEnd"](r,p)}}else g[c?"setStart":"setEnd"](t,0)}var d=k.getRng(),g=a.createRng(),f,l;f=d.item?d.item(0):d.parentElement();
if(f.ownerDocument!=a.doc)return g;l=k.isCollapsed();if(d.item||!f.hasChildNodes()){if(l){g.setStart(f,0);g.setEnd(f,0)}else{g.setStart(f.parentNode,a.nodeIndex(f));g.setEnd(g.startContainer,g.startOffset+1)}return g}b(true);l||b();return g}var q="\ufeff",m,h,a=k.dom,e=true;this.addRange=function(b){function d(u){var t,v,D,F,y;D=a.create("a");t=u?l:j;v=u?c:r;F=g.duplicate();if(t==p){t=n;v=0}if(t.nodeType==3){t.parentNode.insertBefore(D,t);F.moveToElementText(D);F.moveStart("character",v);a.remove(D);
g.setEndPoint(u?"StartToStart":"EndToEnd",F)}else{y=t.childNodes;if(y.length){v>=y.length?a.insertAfter(D,y[y.length-1]):t.insertBefore(D,y[v]);F.moveToElementText(D)}else{D=p.createTextNode(q);t.appendChild(D);F.moveToElementText(D.parentNode);F.collapse(e)}g.setEndPoint(u?"StartToStart":"EndToEnd",F);a.remove(D)}}var g,f,l,c,j,r,p=k.dom.doc,n=p.body;this.destroy();l=b.startContainer;c=b.startOffset;j=b.endContainer;r=b.endOffset;g=n.createTextRange();if(l==j&&l.nodeType==1&&c==r-1)if(c==r-1)try{f=
n.createControlRange();f.addElement(l.childNodes[c]);f.select();return}catch(s){}d(true);d();g.select()};this.getRangeAt=function(){if(!m||!tinymce.dom.RangeUtils.compareRanges(h,k.getRng())){m=o();h=k.getRng()}return m};this.destroy=function(){h=m=null}}})();
(function(k){var o=k.each,q=k.DOM,m=k.isIE,h;k.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,e,b,d){var g,f=this,l=f.events,c;if(e instanceof Array){c=[];o(e,function(j){c.push(f.add(a,j,b,d))});return c}if(a&&a.hasOwnProperty&&a instanceof Array){c=[];o(a,function(j){j=q.get(j);c.push(f.add(j,e,b,d))});return c}if(a=q.get(a)){g=function(j){if(!f.disabled){if((j=j||window.event)&&m){if(!j.target)j.target=j.srcElement;k.extend(j,f._stoppers)}if(!d)return b(j);
return b.call(d,j)}};if(e=="unload"){k.unloads.unshift({func:g});return g}if(e=="init"){f.domLoaded?g():f.inits.push(g);return g}l.push({obj:a,name:e,func:b,cfunc:g,scope:d});f._add(a,e,g);return b}},remove:function(a,e,b){var d=this,g=d.events,f=false,l;if(a&&a.hasOwnProperty&&a instanceof Array){l=[];o(a,function(c){c=q.get(c);l.push(d.remove(c,e,b))});return l}a=q.get(a);o(g,function(c,j){if(c.obj==a&&c.name==e&&(!b||c.func==b||c.cfunc==b)){g.splice(j,1);d._remove(a,e,c.cfunc);f=true;return false}});
return f},clear:function(a){var e=this.events,b,d;if(a){a=q.get(a);for(b=e.length-1;b>=0;b--){d=e[b];if(d.obj===a){this._remove(d.obj,d.name,d.cfunc);d.obj=d.cfunc=null;e.splice(b,1)}}}},cancel:function(a){if(!a)return false;this.stop(a);return this.prevent(a)},stop:function(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true;return false},prevent:function(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false;return false},destroy:function(){var a=this;o(a.events,function(e){a._remove(e.obj,
e.name,e.cfunc);e.obj=e.cfunc=null});a.events=[];a=null},_add:function(a,e,b){if(a.attachEvent)a.attachEvent("on"+e,b);else if(a.addEventListener)a.addEventListener(e,b,false);else a["on"+e]=b},_remove:function(a,e,b){if(a)try{if(a.detachEvent)a.detachEvent("on"+e,b);else if(a.removeEventListener)a.removeEventListener(e,b,false);else a["on"+e]=null}catch(d){}},_pageInit:function(){if(!this.domLoaded){this.domLoaded=true;o(this.inits,function(a){a()});this.inits=[]}},_wait:function(a){var e=this,b=
a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded)e.domLoaded=1;else{if(b.attachEvent){b.attachEvent("onreadystatechange",function(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",arguments.callee);e._pageInit(a)}});b.documentElement.doScroll&&a==a.top&&function(){if(!e.domLoaded){try{b.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}e._pageInit(a)}}()}else b.addEventListener&&e._add(a,"DOMContentLoaded",function(){e._pageInit(a)});e._add(a,"load",function(){e._pageInit(a)})}},
_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});h=k.dom.Event=new k.dom.EventUtils;h._wait(window);k.addUnload(function(){h.destroy()})})(tinymce);
(function(k){k.dom.Element=function(o,q){var m=this,h;m.settings=q=q||{};m.id=o;m.dom=h=q.dom||k.DOM;k.isIE||h.get(m.id);k.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){m[a]=function(){var e=[o],b;for(b=0;b<arguments.length;b++)e.push(arguments[b]);e=h[a].apply(h,e);m.update(a);return e}});k.extend(m,{on:function(a,e,b){return k.dom.Event.add(m.id,
a,e,b)},getXY:function(){return{x:parseInt(m.getStyle("left")),y:parseInt(m.getStyle("top"))}},getSize:function(){var a=h.get(m.id);return{w:parseInt(m.getStyle("width")||a.clientWidth),h:parseInt(m.getStyle("height")||a.clientHeight)}},moveTo:function(a,e){m.setStyles({left:a,top:e})},moveBy:function(a,e){var b=m.getXY();m.moveTo(b.x+a,b.y+e)},resizeTo:function(a,e){m.setStyles({width:a,height:e})},resizeBy:function(a,e){var b=m.getSize();m.resizeTo(b.w+a,b.h+e)},update:function(a){if(k.isIE6&&q.blocker){a=
a||"";if(!(a.indexOf("get")===0||a.indexOf("has")===0||a.indexOf("is")===0))if(a=="remove")h.remove(m.blocker);else{if(m.blocker)a=h.get(m.blocker);else{m.blocker=h.uniqueId();a=h.add(q.container||h.getRoot(),"iframe",{id:m.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});h.setStyle(a,"opacity",0)}h.setStyles(a,{left:m.getStyle("left",1),top:m.getStyle("top",1),width:m.getStyle("width",1),height:m.getStyle("height",1),display:m.getStyle("display",1),zIndex:parseInt(m.getStyle("zIndex",
1)||0)-1})}}}})}})(tinymce);
(function(k){var o=k.is,q=k.isIE,m=k.each;k.create("tinymce.dom.Selection",{Selection:function(h,a,e){var b=this;b.dom=h;b.win=a;b.serializer=e;m(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(d){b[d]=new k.util.Dispatcher(b)});if(!b.win.getSelection)b.tridentSel=new k.dom.TridentSelection(b);k.isIE&&h.boxModel&&this._fixIESelection();k.addUnload(b.destroy,b)},getContent:function(h){var a=this.getRng(),e=this.dom.create("body"),b=this.getSel(),d,g;h=h||{};d=g="";
h.get=true;h.format=h.format||"html";this.onBeforeGetContent.dispatch(this,h);if(h.format=="text")return this.isCollapsed()?"":a.text||(b.toString?b.toString():"");if(a.cloneContents)(a=a.cloneContents())&&e.appendChild(a);else e.innerHTML=o(a.item)||o(a.htmlText)?a.item?a.item(0).outerHTML:a.htmlText:a.toString();if(/^\s/.test(e.innerHTML))d=" ";if(/\s+$/.test(e.innerHTML))g=" ";h.getInner=true;h.content=this.isCollapsed()?"":d+this.serializer.serialize(e,h)+g;this.onGetContent.dispatch(this,h);
return h.content},setContent:function(h,a){var e=this.getRng(),b,d=this.win.document;a=a||{format:"html"};a.set=true;a.content=h;this.onBeforeSetContent.dispatch(this,a);h=a.content;if(e.insertNode){h+='<span id="__caret">_</span>';if(e.startContainer==d&&e.endContainer==d)d.body.innerHTML=h;else{e.deleteContents();if(d.body.childNodes.length==0)d.body.innerHTML=h;else if(e.createContextualFragment)e.insertNode(e.createContextualFragment(h));else{b=d.createDocumentFragment();var g=d.createElement("div");
b.appendChild(g);g.outerHTML=h;e.insertNode(b)}}b=this.dom.get("__caret");e=d.createRange();e.setStartBefore(b);e.setEndBefore(b);this.setRng(e);this.dom.remove("__caret");this.setRng(e)}else{if(e.item){d.execCommand("Delete",false,null);e=this.getRng()}e.pasteHTML(h)}this.onSetContent.dispatch(this,a)},getStart:function(){var h=this.getRng(),a,e;if(h.duplicate||h.item){if(h.item)return h.item(0);a=h.duplicate();a.collapse(1);a=a.parentElement();for(h=e=h.parentElement();e=e.parentNode;)if(e==a){a=
h;break}}else{a=h.startContainer;if(a.nodeType==1&&a.hasChildNodes())a=a.childNodes[Math.min(a.childNodes.length-1,h.startOffset)];if(a&&a.nodeType==3)return a.parentNode}return a},getEnd:function(){var h=this.getRng(),a;if(h.duplicate||h.item){if(h.item)return h.item(0);h=h.duplicate();h.collapse(0);if((a=h.parentElement())&&a.nodeName=="BODY")return a.lastChild||a}else{a=h.endContainer;h=h.endOffset;if(a.nodeType==1&&a.hasChildNodes())a=a.childNodes[h>0?h-1:h];if(a&&a.nodeType==3)return a.parentNode}return a},
getBookmark:function(h,a){function e(r,p){var n=0;m(d.select(r),function(s,u){if(s==p)n=u});return n}var b=this,d=b.dom,g,f,l,c,j;if(h==2)return function(){function r(u,t){var v=u[t?"startContainer":"endContainer"],D=u[t?"startOffset":"endOffset"],F=[],y,x=0;if(v.nodeType==3){if(a)for(y=v.previousSibling;y&&y.nodeType==3;y=y.previousSibling)D+=y.nodeValue.length;F.push(D)}else{y=v.childNodes;if(D>=y.length&&y.length){x=1;D=Math.max(0,y.length-1)}F.push(b.dom.nodeIndex(y[D],a)+x)}for(;v&&v!=n;v=v.parentNode)F.push(b.dom.nodeIndex(v,
a));return F}var p=b.getRng(true),n=d.getRoot(),s={};s.start=r(p,true);if(!b.isCollapsed())s.end=r(p);return s}();if(h)return{rng:b.getRng()};g=b.getRng();l=d.uniqueId();c=tinyMCE.activeEditor.selection.isCollapsed();if(g.duplicate||g.item)if(g.item){j=g.item(0);f=j.nodeName;return{name:f,index:e(f,j)}}else{f=g.duplicate();g.collapse();g.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="overflow:hidden;line-height:0px">\ufeff</span>');if(!c){f.collapse(false);f.pasteHTML('<span data-mce-type="bookmark" id="'+
l+'_end" style="overflow:hidden;line-height:0px">\ufeff</span>')}}else{j=b.getNode();f=j.nodeName;if(f=="IMG")return{name:f,index:e(f,j)};f=g.cloneRange();if(!c){f.collapse(false);f.insertNode(d.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:"overflow:hidden;line-height:0px"},"\ufeff"))}g.collapse(true);g.insertNode(d.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:"overflow:hidden;line-height:0px"},"\ufeff"))}b.moveToBookmark({id:l,keep:1});return{id:l}},moveToBookmark:function(h){var a=
this.dom,e,b,d,g,f,l;this.tridentSel&&this.tridentSel.destroy();if(h)if(h.start){e=a.createRng();b=a.getRoot();var c=function(r){var p=h[r?"start":"end"],n,s,u;if(p){s=b;for(n=p.length-1;n>=1;n--){u=s.childNodes;if(u.length)s=u[p[n]]}r?e.setStart(s,p[0]):e.setEnd(s,p[0])}};c(true);c();this.setRng(e)}else if(h.id){c=function(r){var p=a.get(h.id+"_"+r),n,s,u;u=h.keep;if(p){n=p.parentNode;if(r=="start"){if(u){n=p.firstChild;s=1}else s=a.nodeIndex(p);d=g=n;f=l=s}else{if(u){n=p.firstChild;s=1}else s=a.nodeIndex(p);
g=n;l=s}if(!u){u=p.previousSibling;n=p.nextSibling;for(m(k.grep(p.childNodes),function(t){if(t.nodeType==3)t.nodeValue=t.nodeValue.replace(/\uFEFF/g,"")});p=a.get(h.id+"_"+r);)a.remove(p,1);if(u&&n&&u.nodeType==n.nodeType&&u.nodeType==3&&!k.isOpera){s=u.nodeValue.length;u.appendData(n.nodeValue);a.remove(n);if(r=="start"){d=g=u;f=l=s}else{g=u;l=s}}}}};var j=function(r){if(a.isBlock(r)&&!r.innerHTML)r.innerHTML=!q?'<br data-mce-bogus="1" />':" ";return r};c("start");c("end");if(d){e=a.createRng();
e.setStart(j(d),f);e.setEnd(j(g),l);this.setRng(e)}}else if(h.name)this.select(a.select(h.name)[h.index]);else h.rng&&this.setRng(h.rng)},select:function(h,a){var e=this.dom,b=e.createRng();e=e.nodeIndex(h);b.setStart(h.parentNode,e);b.setEnd(h.parentNode,e+1);if(a){e=function(d,g){var f=new k.dom.TreeWalker(d,d);do{if(d.nodeType==3&&k.trim(d.nodeValue).length!=0){g?b.setStart(d,0):b.setEnd(d,d.nodeValue.length);break}if(d.nodeName=="BR"){g?b.setStartBefore(d):b.setEndBefore(d);break}}while(d=g?f.next():
f.prev())};e(h,1);e(h)}this.setRng(b);return h},isCollapsed:function(){var h=this.getRng(),a=this.getSel();if(!h||h.item)return false;if(h.compareEndPoints)return h.compareEndPoints("StartToEnd",h)===0;return!a||h.collapsed},collapse:function(h){var a=this.getRng(),e;if(a.item){e=a.item(0);a=this.win.document.body.createTextRange();a.moveToElementText(e)}a.collapse(!!h);this.setRng(a)},getSel:function(){var h=this.win;return h.getSelection?h.getSelection():h.document.selection},getRng:function(h){var a,
e,b=this.win.document;if(h&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(a=this.getSel())e=a.rangeCount>0?a.getRangeAt(0):a.createRange?a.createRange():b.createRange()}catch(d){}if(k.isIE&&e.setStart&&b.selection.createRange().item){h=b.selection.createRange().item(0);e=b.createRange();e.setStartBefore(h);e.setEndAfter(h)}e||(e=b.createRange?b.createRange():b.body.createTextRange());if(this.selectedRange&&this.explicitRange)if(e.compareBoundaryPoints(e.START_TO_START,this.selectedRange)===
0&&e.compareBoundaryPoints(e.END_TO_END,this.selectedRange)===0)e=this.explicitRange;else this.explicitRange=this.selectedRange=null;return e},setRng:function(h){var a;if(this.tridentSel)if(h.cloneRange)this.tridentSel.addRange(h);else try{h.select()}catch(e){}else if(a=this.getSel()){this.explicitRange=h;a.removeAllRanges();a.addRange(h);this.selectedRange=a.getRangeAt(0)}},setNode:function(h){this.setContent(this.dom.getOuterHTML(h));return h},getNode:function(){var h=this.getRng(),a=this.getSel(),
e,b=h.startContainer,d=h.endContainer;if(h.setStart){if(!h)return this.dom.getRoot();e=h.commonAncestorContainer;if(!h.collapsed){if(h.startContainer==h.endContainer)if(h.startOffset-h.endOffset<2)if(h.startContainer.hasChildNodes())e=h.startContainer.childNodes[h.startOffset];if(k.isWebKit&&a.anchorNode&&a.anchorNode.nodeType==1)return a.anchorNode.childNodes[a.anchorOffset];if(b.nodeType===3&&d.nodeType===3){a=function(g,f){for(var l=g;g&&g.nodeType===3&&g.length===0;)g=f?g.nextSibling:g.previousSibling;
return g||l};b=b.length===h.startOffset?a(b.nextSibling,true):b.parentNode;d=h.endOffset===0?a(d.previousSibling,false):d.parentNode;if(b&&b===d)return b}}if(e&&e.nodeType==3)return e.parentNode;return e}return h.item?h.item(0):h.parentElement()},getSelectedBlocks:function(h,a){var e=this.dom,b,d,g,f=[];b=e.getParent(h||this.getStart(),e.isBlock);d=e.getParent(a||this.getEnd(),e.isBlock);b&&f.push(b);if(b&&d&&b!=d)for(g=b;(g=g.nextSibling)&&g!=d;)e.isBlock(g)&&f.push(g);d&&b!=d&&f.push(d);return f},
destroy:function(h){this.win=null;this.tridentSel&&this.tridentSel.destroy();h||k.removeUnload(this.destroy)},_fixIESelection:function(){function h(j,r){var p=g.createTextRange();try{p.moveToPoint(j,r)}catch(n){p=null}return p}function a(j){if(j.button){if(j=h(j.x,j.y)){j.compareEndPoints("StartToStart",l)>0?j.setEndPoint("StartToStart",l):j.setEndPoint("EndToEnd",l);j.select()}}else e()}function e(){var j=d.selection.createRange();l&&!j.item&&j.compareEndPoints("StartToEnd",j)===0&&l.select();b.unbind(d,
"mouseup",e);b.unbind(d,"mousemove",a);l=f=0}var b=this.dom,d=b.doc,g=d.body,f,l,c;d.documentElement.unselectable=true;b.bind(d,"mousedown",function(j){if(j.target.nodeName==="HTML"){f&&e();c=d.documentElement;if(!(c.scrollHeight>c.clientHeight)){f=1;if(l=h(j.x,j.y)){b.bind(d,"mouseup",e);b.bind(d,"mousemove",a);b.win.focus();l.select()}}}})}})})(tinymce);
(function(k){k.dom.Serializer=function(o,q,m){var h,a,e=k.isIE,b=k.each,d;if(!o.apply_source_formatting)o.indent=false;q=q||k.DOM;m=m||new k.html.Schema(o);o.entity_encoding=o.entity_encoding||"named";h=new k.util.Dispatcher(self);a=new k.util.Dispatcher(self);d=new k.html.DomParser(o,m);d.addAttributeFilter("src,href,style",function(g,f){for(var l=g.length,c,j,r="data-mce-"+f,p=o.url_converter,n=o.url_converter_scope;l--;){c=g[l];j=c.attributes.map[r];if(j!==void 0){c.attr(f,j.length>0?j:null);c.attr(r,
null)}else{j=c.attributes.map[f];if(f==="style")j=q.serializeStyle(q.parseStyle(j),c.name);else if(p)j=p.call(n,j,f,c.name);c.attr(f,j.length>0?j:null)}}});d.addAttributeFilter("class",function(g){for(var f=g.length,l,c;f--;){l=g[f];c=l.attr("class").replace(/\s*mceItem\w+\s*/g,"");l.attr("class",c.length>0?c:null)}});d.addAttributeFilter("data-mce-type",function(g,f,l){f=g.length;for(var c;f--;){c=g[f];c.attributes.map["data-mce-type"]==="bookmark"&&!l.cleanup&&c.remove()}});d.addNodeFilter("script,style",
function(g,f){function l(p){return p.replace(/(<!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,"")}for(var c=g.length,j,r;c--;){j=g[c];r=j.firstChild?j.firstChild.value:"";if(f==="script"){j.attr("type",(j.attr("type")||"text/javascript").replace(/^mce\-/,""));if(r.length>0)j.firstChild.value="// <![CDATA[\n"+l(r)+"\n// ]]\>"}else if(r.length>
0)j.firstChild.value="<!--\n"+l(r)+"\n--\>"}});d.addNodeFilter("br",function(g){for(var f=g.length,l,c=m.getBlockElements(),j=m.getEmptyElements(),r;f--;){l=g[f];r=l.parent;if(c[l.parent.name]&&l===r.lastChild){l.remove();if(r.isEmpty(j))r.empty().append(new k.html.Node("#text",3)).value="\u00a0"}}});d.addNodeFilter("#comment",function(g){for(var f=g.length,l;f--;){l=g[f];if(l.value.indexOf("[CDATA[")===0){l.name="#cdata";l.type=4;l.value=l.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(l.value.indexOf("mce:protected ")===
0){l.name="#text";l.type=3;l.raw=true;l.value=unescape(l.value).substr(14)}}});d.addNodeFilter("xml:namespace,input",function(g,f){for(var l=g.length,c;l--;){c=g[l];if(c.type===7)c.remove();else c.type===1&&f==="input"&&!("type"in c.attributes.map)&&c.attr("type","text")}});o.fix_list_elements&&d.addNodeFilter("ul,ol",function(g){for(var f=g.length,l,c;f--;){l=g[f];c=l.parent;if(c.name==="ul"||c.name==="ol")l.prev&&l.prev.name==="li"&&l.prev.append(l)}});return{schema:m,addNodeFilter:d.addNodeFilter,
addAttributeFilter:d.addAttributeFilter,onPreProcess:h,onPostProcess:a,serialize:function(g,f){var l,c,j;if(e&&q.select("script,style,select").length>0){l=g.innerHTML;g=g.cloneNode(false);q.setHTML(g,l)}else g=g.cloneNode(true);l=g.ownerDocument.implementation;if(l.createHTMLDocument){c=l.createHTMLDocument("");b(g.nodeName=="BODY"?g.childNodes:[g],function(r){c.body.appendChild(c.importNode(r,true))});g=g.nodeName!="BODY"?c.body.firstChild:c.body;j=q.doc;q.doc=c}f=f||{};f.format=f.format||"html";
if(!f.no_events){f.node=g;h.dispatch(self,f)}l=new k.html.Serializer(o,m);f.content=l.serialize(d.parse(f.getInner?g.innerHTML:k.trim(q.getOuterHTML(g),f),f));f.no_events||a.dispatch(self,f);if(j)q.doc=j;f.node=null;return f.content},addRules:function(g){m.addValidElements(g)},setRules:function(g){m.setValidElements(g)}}}})(tinymce);
(function(k){k.dom.ScriptLoader=function(){function o(b,d){function g(){f.remove(r);if(l)l.onreadystatechange=l.onload=l=null;d()}var f=k.DOM,l,c,j,r;r=f.uniqueId();if(k.isIE6){c=new k.util.URI(b);j=location;if(c.host==j.hostname&&c.port==j.port&&c.protocol+":"==j.protocol){k.util.XHR.send({url:k._addVer(c.getURI()),success:function(p){var n=f.create("script",{type:"text/javascript"});n.text=p;document.getElementsByTagName("head")[0].appendChild(n);f.remove(n);g()}});return}}l=f.create("script",{id:r,
type:"text/javascript",src:k._addVer(b)});if(!k.isIE)l.onload=g;if(!k.isOpera)l.onreadystatechange=function(){var p=l.readyState;if(p=="complete"||p=="loaded")g()};(document.getElementsByTagName("head")[0]||document.body).appendChild(l)}var q={},m=[],h={},a=[],e=0;this.isDone=function(b){return q[b]==2};this.markDone=function(b){q[b]=2};this.add=this.load=function(b,d,g){if(q[b]==void 0){m.push(b);q[b]=0}if(d){h[b]||(h[b]=[]);h[b].push({func:d,scope:g||this})}};this.loadQueue=function(b,d){this.loadScripts(m,
b,d)};this.loadScripts=function(b,d,g){function f(c){k.each(h[c],function(j){j.func.call(j.scope)});h[c]=void 0}var l;a.push({func:d,scope:g||this});l=function(){var c=k.grep(b);b.length=0;k.each(c,function(j){if(q[j]==2)f(j);else if(q[j]!=1){q[j]=1;e++;o(j,function(){q[j]=2;e--;f(j);l()})}});if(!e){k.each(a,function(j){j.func.call(j.scope)});a.length=0}};l()}};k.ScriptLoader=new k.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(k,o){function q(h,a,e,b){if(h){if(!b&&h[a])return h[a];if(h!=o){if(a=h[e])return a;for(h=h.parentNode;h&&h!=o;h=h.parentNode)if(a=h[e])return a}}}var m=k;this.current=function(){return m};this.next=function(h){return m=q(m,"firstChild","nextSibling",h)};this.prev=function(h){return m=q(m,"lastChild","lastSibling",h)}};
(function(k){k.dom.RangeUtils=function(o){this.walk=function(q,m){function h(p,n,s){for(var u=[];p&&p!=s;p=p[n])u.push(p);return u}function a(p,n){do{if(p.parentNode==n)return p;p=p.parentNode}while(p)}function e(p,n,s){var u=s?"nextSibling":"previousSibling";l=p;for(c=l.parentNode;l&&l!=n;l=c){c=l.parentNode;j=h(l==p?l:l[u],u);if(j.length){s||j.reverse();m(j)}}}var b=q.startContainer,d=q.startOffset,g=q.endContainer,f=q.endOffset,l,c,j,r;r=o.select("td.mceSelected,th.mceSelected");if(r.length>0)k.each(r,
function(p){m([p])});else{if(b.nodeType==1&&b.hasChildNodes())b=b.childNodes[d];if(g.nodeType==1&&g.hasChildNodes())g=g.childNodes[Math.min(f-1,g.childNodes.length-1)];f=o.findCommonAncestor(b,g);if(b==g)return m([b]);for(l=b;l;l=l.parentNode){if(l==g)return e(b,f,true);if(l==f)break}for(l=g;l;l=l.parentNode){if(l==b)return e(g,f);if(l==f)break}d=a(b,f)||b;f=a(g,f)||g;e(b,d,true);j=h(d==b?d:d.nextSibling,"nextSibling",f==g?f.nextSibling:f);j.length&&m(j);e(g,f)}}};k.dom.RangeUtils.compareRanges=function(o,
q){if(o&&q)if(o.item||o.duplicate){if(o.item&&q.item&&o.item(0)===q.item(0))return true;if(o.isEqual&&q.isEqual&&q.isEqual(o))return true}else return o.startContainer==q.startContainer&&o.startOffset==q.startOffset;return false}})(tinymce);
(function(k){var o=k.DOM,q=k.is;k.create("tinymce.ui.Control",{Control:function(m,h){this.id=m;this.settings=h=h||{};this.rendered=false;this.onRender=new k.util.Dispatcher(this);this.classPrefix="";this.scope=h.scope||this;this.active=this.disabled=0},setDisabled:function(m){var h;if(m!=this.disabled){if((h=o.get(this.id))&&this.settings.unavailable_prefix)if(m){this.prevTitle=h.title;h.title=this.settings.unavailable_prefix+": "+h.title}else h.title=this.prevTitle;this.setState("Disabled",m);this.setState("Enabled",
!m);this.disabled=m}},isDisabled:function(){return this.disabled},setActive:function(m){if(m!=this.active){this.setState("Active",m);this.active=m}},isActive:function(){return this.active},setState:function(m,h){var a=o.get(this.id);m=this.classPrefix+m;h?o.addClass(a,m):o.removeClass(a,m)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(m){o.setHTML(m,this.renderHTML())},postRender:function(){var m;if(q(this.disabled)){m=this.disabled;this.disabled=-1;this.setDisabled(m)}if(q(this.active)){m=
this.active;this.active=-1;this.setActive(m)}},remove:function(){o.remove(this.id);this.destroy()},destroy:function(){k.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(k,o){this.parent(k,o);this.controls=[];this.lookup={}},add:function(k){this.lookup[k.id]=k;this.controls.push(k);return k},get:function(k){return this.lookup[k]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(k,o){this.parent(k,o);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});
(function(k){var o=k.is;k.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(q,m){this.parent(q,m);this.classPrefix="mceMenuItem"},setSelected:function(q){this.setState("Selected",q);this.selected=q},isSelected:function(){return this.selected},postRender:function(){this.parent();o(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(k){var o=k.DOM,q=k.walk;k.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(m,h){this.parent(m,h);this.items={};this.collapsed=false;this.menuCount=0;this.onAddItem=new k.util.Dispatcher(this)},expand:function(m){m&&q(this,function(h){h.expand&&h.expand()},"items",this);this.collapsed=false},collapse:function(m){m&&q(this,function(h){h.collapse&&h.collapse()},"items",this);this.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(m){m.settings||(m=new k.ui.MenuItem(m.id||
o.uniqueId(),m));this.onAddItem.dispatch(this,m);return this.items[m.id]=m},addSeparator:function(){return this.add({separator:true})},addMenu:function(m){m.collapse||(m=this.createMenu(m));this.menuCount++;return this.add(m)},hasMenus:function(){return this.menuCount!==0},remove:function(m){delete this.items[m.id]},removeAll:function(){q(this,function(m){m.removeAll?m.removeAll():m.remove();m.destroy()},"items",this);this.items={}},createMenu:function(m){m=new k.ui.Menu(m.id||o.uniqueId(),m);m.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return m}})})(tinymce);
(function(k){var o=k.is,q=k.DOM,m=k.each,h=k.dom.Event,a=k.dom.Element;k.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(e,b){b=b||{};b.container=b.container||q.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;if(o(b.icons)&&!b.icons)b["class"]+=" mceNoIcons";this.parent(e,b);this.onShowMenu=new k.util.Dispatcher(this);this.onHideMenu=new k.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(e){var b=
this.settings;e.container=e.container||b.container;e.parent=this;e.constrain=e.constrain||b.constrain;e["class"]=e["class"]||b["class"];e.vp_offset_x=e.vp_offset_x||b.vp_offset_x;e.vp_offset_y=e.vp_offset_y||b.vp_offset_y;e=new k.ui.DropMenu(e.id||q.uniqueId(),e);e.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return e},update:function(){var e=this.settings,b=q.get("menu_"+this.id+"_tbl"),d=q.get("menu_"+this.id+"_co"),g,f;g=e.max_width?Math.min(b.clientWidth,e.max_width):b.clientWidth;f=
e.max_height?Math.min(b.clientHeight,e.max_height):b.clientHeight;q.boxModel?this.element.setStyles({width:g,height:f}):this.element.setStyles({width:g+2,height:f+2});e.max_width&&q.setStyle(d,"width",g);if(e.max_height){q.setStyle(d,"height",f);b.clientHeight<e.max_height&&q.setStyle(d,"overflow","hidden")}},showMenu:function(e,b,d){var g=this,f=g.settings,l,c=q.getViewPort(),j,r,p,n,s=g.classPrefix;g.collapse(1);if(!g.isMenuVisible){if(g.rendered)l=q.get("menu_"+g.id);else{l=q.add(g.settings.container,
g.renderNode());m(g.items,function(u){u.postRender()});g.element=new a("menu_"+g.id,{blocker:1,container:f.container})}k.isOpera||q.setStyles(l,{left:-65535,top:-65535});q.show(l);g.update();e+=f.offset_x||0;b+=f.offset_y||0;c.w-=4;c.h-=4;if(f.constrain){j=l.clientWidth-2;r=l.clientHeight-2;p=c.x+c.w;c=c.y+c.h;if(e+f.vp_offset_x+j>p)e=d?d-j:Math.max(0,p-f.vp_offset_x-j);if(b+f.vp_offset_y+r>c)b=Math.max(0,c-f.vp_offset_y-r)}q.setStyles(l,{left:e,top:b});g.element.update();g.isMenuVisible=1;g.mouseClickFunc=
h.add(l,"click",function(u){var t;if((u=u.target)&&(u=q.getParent(u,"tr"))&&!q.hasClass(u,s+"ItemSub")){t=g.items[u.id];if(!t.isDisabled()){for(n=g;n;){n.hideMenu&&n.hideMenu();n=n.settings.parent}t.settings.onclick&&t.settings.onclick(u);return h.cancel(u)}}});if(g.hasMenus())g.mouseOverFunc=h.add(l,"mouseover",function(u){var t;if((u=u.target)&&(u=q.getParent(u,"tr"))){t=g.items[u.id];g.lastMenu&&g.lastMenu.collapse(1);if(!t.isDisabled())if(u&&q.hasClass(u,s+"ItemSub")){u=q.getRect(u);t.showMenu(u.x+
u.w-2,u.y-2,u.x);g.lastMenu=t;q.addClass(q.get(t.id).firstChild,s+"ItemActive")}}});g.onShowMenu.dispatch(g);if(f.keyboard_focus){h.add(l,"keydown",g._keyHandler,g);q.select("a","menu_"+g.id)[0].focus();g._focusIdx=0}}},hideMenu:function(e){var b=q.get("menu_"+this.id);if(this.isMenuVisible){h.remove(b,"mouseover",this.mouseOverFunc);h.remove(b,"click",this.mouseClickFunc);h.remove(b,"keydown",this._keyHandler);q.hide(b);this.isMenuVisible=0;e||this.collapse(1);this.element&&this.element.hide();if(e=
q.get(this.id))q.removeClass(e.firstChild,this.classPrefix+"ItemActive");this.onHideMenu.dispatch(this)}},add:function(e){var b;e=this.parent(e);if(this.isRendered&&(b=q.get("menu_"+this.id)))this._add(q.select("tbody",b)[0],e);return e},collapse:function(e){this.parent(e);this.hideMenu(1)},remove:function(e){q.remove(e.id);this.destroy();return this.parent(e)},destroy:function(){var e=q.get("menu_"+this.id);h.remove(e,"mouseover",this.mouseOverFunc);h.remove(e,"click",this.mouseClickFunc);this.element&&
this.element.remove();q.remove(e)},renderNode:function(){var e=this,b=e.settings,d,g,f;f=q.create("div",{id:"menu_"+e.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000"});g=q.add(f,"div",{id:"menu_"+e.id+"_co","class":e.classPrefix+(b["class"]?" "+b["class"]:"")});e.element=new a("menu_"+e.id,{blocker:1,container:b.container});b.menu_line&&q.add(g,"span",{"class":e.classPrefix+"Line"});b=q.add(g,"table",{id:"menu_"+e.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});d=q.add(b,
"tbody");m(e.items,function(l){e._add(d,l)});e.rendered=true;return f},_keyHandler:function(e){function b(g){g=d._focusIdx+g;var f=q.select("a","menu_"+d.id)[g];if(f){d._focusIdx=g;f.focus()}}var d=this;switch(e.keyCode){case 38:b(-1);break;case 40:b(1);break;case 27:return this.hideMenu()}},_add:function(e,b){var d,g=b.settings,f,l,c=this.classPrefix;if(g.separator){f=q.add(e,"tr",{id:b.id,"class":c+"ItemSeparator"});q.add(f,"td",{"class":c+"ItemSeparator"});if(d=f.previousSibling)q.addClass(d,"mceLast")}else{d=
f=q.add(e,"tr",{id:b.id,"class":c+"Item "+c+"ItemEnabled"});d=l=q.add(d,"td");d=q.add(d,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});q.addClass(l,g["class"]);l=q.add(d,"span",{"class":"mceIcon"+(g.icon?" mce_"+g.icon:"")});g.icon_src&&q.add(l,"img",{src:g.icon_src});d=q.add(d,g.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title);b.settings.style&&q.setAttrib(d,"style",b.settings.style);e.childNodes.length==1&&q.addClass(f,"mceFirst");if((d=
f.previousSibling)&&q.hasClass(d,c+"ItemSeparator"))q.addClass(f,"mceFirst");b.collapse&&q.addClass(f,c+"ItemSub");if(d=f.previousSibling)q.removeClass(d,"mceLast");q.addClass(f,"mceLast")}}})})(tinymce);
(function(k){var o=k.DOM;k.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(q,m){this.parent(q,m);this.classPrefix="mceButton"},renderHTML:function(){var q=this.classPrefix,m=this.settings,h,a;a=o.encode(m.label||"");h='<a id="'+this.id+'" href="javascript:;" class="'+q+" "+q+"Enabled "+m["class"]+(a?" "+q+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+o.encode(m.title)+'">';h+=m.image?'<img class="mceIcon" src="'+m.image+'" />'+a+"</a>":'<span class="mceIcon '+
m["class"]+'"></span>'+(a?'<span class="'+q+'Label">'+a+"</span>":"")+"</a>";return h},postRender:function(){var q=this,m=q.settings;k.dom.Event.add(q.id,"click",function(h){if(!q.isDisabled())return m.onclick.call(m.scope,h)})}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event,m=k.each,h=k.util.Dispatcher;k.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,e){this.parent(a,e);this.items=[];this.onChange=new h(this);this.onPostRender=new h(this);this.onAdd=new h(this);this.onRenderMenu=new k.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var e=this,b,d;if(a==undefined)return e.selectByIndex(-1);d=a&&a.call?a:function(g){return g==a};if(a!=e.selectedValue){m(e.items,function(g,f){if(d(g.value)){b=
1;e.selectByIndex(f);return false}});b||e.selectByIndex(-1)}},selectByIndex:function(a){var e,b;if(a!=this.selectedIndex){e=o.get(this.id+"_text");if(b=this.items[a]){this.selectedValue=b.value;this.selectedIndex=a;o.setHTML(e,o.encode(b.title));o.removeClass(e,"mceTitle")}else{o.setHTML(e,o.encode(this.settings.title));o.addClass(e,"mceTitle");this.selectedValue=this.selectedIndex=null}}},add:function(a,e,b){b=b||{};b=k.extend(b,{title:a,value:e});this.items.push(b);this.onAdd.dispatch(this,b)},
getLength:function(){return this.items.length},renderHTML:function(){var a="";a=this.settings;var e=this.classPrefix;a='<table id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>';a+="<td>"+o.createHTML("a",{id:this.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},o.encode(this.settings.title))+"</td>";a+="<td>"+o.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;",
"class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},"<span></span>")+"</td>";a+="</tr></tbody></table>";return a},showMenu:function(){var a=this,e,b=o.get(this.id),d;if(!(a.isDisabled()||a.items.length==0)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();if(!a.isMenuRendered){a.renderMenu();a.isMenuRendered=true}o.getPos(this.settings.menu_container);e=o.getPos(b);d=a.menu;d.settings.offset_x=e.x;d.settings.offset_y=e.y;d.settings.keyboard_focus=!k.isOpera;a.oldID&&d.items[a.oldID].setSelected(0);
m(a.items,function(g){if(g.value===a.selectedValue){d.items[g.id].setSelected(1);a.oldID=g.id}});d.showMenu(0,b.clientHeight);q.add(o.doc,"mousedown",a.hideMenu,a);o.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible)if(!(a&&a.type=="mousedown"&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open")))if(!a||!o.getParent(a.target,".mceMenu")){o.removeClass(this.id,this.classPrefix+"Selected");q.remove(o.doc,"mousedown",this.hideMenu,this);this.menu.hideMenu()}},
renderMenu:function(){var a=this,e;e=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});e.onHideMenu.add(a.hideMenu,a);e.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==false&&a.select("")}});m(a.items,function(b){if(b.value===undefined)e.add({title:b.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==false&&a.select("")}});else{b.id=
o.uniqueId();b.onclick=function(){a.settings.onselect(b.value)!==false&&a.select(b.value)};e.add(b)}});a.onRenderMenu.dispatch(a,e);a.menu=e},postRender:function(){var a=this,e=a.classPrefix;q.add(a.id,"click",a.showMenu,a);q.add(a.id+"_text","focus",function(){if(!a._focused)a.keyDownHandler=q.add(a.id+"_text","keydown",function(b){var d=-1,g,f=b.keyCode;m(a.items,function(l,c){if(a.selectedValue==l.value)d=c});if(f==38)g=a.items[d-1];else if(f==40)g=a.items[d+1];else if(f==13){g=a.selectedValue;
a.selectedValue=null;a.settings.onselect(g);return q.cancel(b)}if(g){a.hideMenu();a.select(g.value)}});a._focused=1});q.add(a.id+"_text","blur",function(){q.remove(a.id+"_text","keydown",a.keyDownHandler);a._focused=0});if(k.isIE6||!o.boxModel){q.add(a.id,"mouseover",function(){o.hasClass(a.id,e+"Disabled")||o.addClass(a.id,e+"Hover")});q.add(a.id,"mouseout",function(){o.hasClass(a.id,e+"Disabled")||o.removeClass(a.id,e+"Hover")})}a.onPostRender.dispatch(a,o.get(a.id))},destroy:function(){this.parent();
q.clear(this.id+"_text");q.clear(this.id+"_open")}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event,m=k.each;k.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(h,a){this.parent(h,a);this.classPrefix="mceNativeListBox"},setDisabled:function(h){o.get(this.id).disabled=h},isDisabled:function(){return o.get(this.id).disabled},select:function(h){var a=this,e,b;if(h==undefined)return a.selectByIndex(-1);b=h&&h.call?h:function(d){return d==h};if(h!=a.selectedValue){m(a.items,function(d,g){if(b(d.value)){e=1;a.selectByIndex(g);return false}});
e||a.selectByIndex(-1)}},selectByIndex:function(h){o.get(this.id).selectedIndex=h+1;this.selectedValue=this.items[h]?this.items[h].value:null},add:function(h,a,e){e=e||{};e.value=a;this.isRendered()&&o.add(o.get(this.id),"option",e,h);h={title:h,value:a,attribs:e};this.items.push(h);this.onAdd.dispatch(this,h)},getLength:function(){return this.items.length},renderHTML:function(){var h;h=o.createHTML("option",{value:""},"-- "+this.settings.title+" --");m(this.items,function(a){h+=o.createHTML("option",
{value:a.value},a.title)});return h=o.createHTML("select",{id:this.id,"class":"mceNativeListBox"},h)},postRender:function(){function h(e){if((e=a.items[e.target.selectedIndex-1])&&(e=e.value)){a.onChange.dispatch(a,e);a.settings.onselect&&a.settings.onselect(e)}}var a=this;a.rendered=true;q.add(a.id,"change",h);q.add(a.id,"keydown",function(e){var b;q.remove(a.id,"change",void 0);b=q.add(a.id,"blur",function(){q.add(a.id,"change",h);q.remove(a.id,"blur",b)});if(e.keyCode==13||e.keyCode==32){h(e);
return q.cancel(e)}});a.onPostRender.dispatch(a,o.get(a.id))}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event;k.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(m,h){this.parent(m,h);this.onRenderMenu=new k.util.Dispatcher(this);h.menu_container=h.menu_container||o.doc.body},showMenu:function(){var m,h=o.get(this.id),a;if(!this.isDisabled()){if(!this.isMenuRendered){this.renderMenu();this.isMenuRendered=true}if(this.isMenuVisible)return this.hideMenu();o.getPos(this.settings.menu_container);m=o.getPos(h);a=this.menu;a.settings.offset_x=m.x;a.settings.offset_y=
m.y;a.settings.vp_offset_x=m.x;a.settings.vp_offset_y=m.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,h.clientHeight);q.add(o.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var m;m=this.settings.control_manager.createDropMenu(this.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:this.settings.icons});m.onHideMenu.add(this.hideMenu,this);this.onRenderMenu.dispatch(this,m);this.menu=m},hideMenu:function(m){var h=this;
if(!(m&&m.type=="mousedown"&&o.getParent(m.target,function(a){return a.id===h.id||a.id===h.id+"_open"}))){if(!m||!o.getParent(m.target,".mceMenu")){h.setState("Selected",0);q.remove(o.doc,"mousedown",h.hideMenu,h);h.menu&&h.menu.hideMenu()}h.isMenuVisible=0}},postRender:function(){var m=this,h=m.settings;q.add(m.id,"click",function(){if(!m.isDisabled()){h.onclick&&h.onclick(m.value);m.showMenu()}})}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event;k.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(m,h){this.parent(m,h);this.classPrefix="mceSplitButton"},renderHTML:function(){var m,h=this.settings,a;m="<tbody><tr>";a=h.image?o.createHTML("img ",{src:h.image,"class":"mceAction "+h["class"]}):o.createHTML("span",{"class":"mceAction "+h["class"]},"");m+="<td>"+o.createHTML("a",{id:this.id+"_action",href:"javascript:;","class":"mceAction "+h["class"],onclick:"return false;",onmousedown:"return false;",
title:h.title},a)+"</td>";a=o.createHTML("span",{"class":"mceOpen "+h["class"]});m+="<td>"+o.createHTML("a",{id:this.id+"_open",href:"javascript:;","class":"mceOpen "+h["class"],onclick:"return false;",onmousedown:"return false;",title:h.title},a)+"</td>";m+="</tr></tbody>";return o.createHTML("table",{id:this.id,"class":"mceSplitButton mceSplitButtonEnabled "+h["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:h.title},m)},postRender:function(){var m=this,h=m.settings;h.onclick&&
q.add(m.id+"_action","click",function(){m.isDisabled()||h.onclick(m.value)});q.add(m.id+"_open","click",m.showMenu,m);q.add(m.id+"_open","focus",function(){m._focused=1});q.add(m.id+"_open","blur",function(){m._focused=0});if(k.isIE6||!o.boxModel){q.add(m.id,"mouseover",function(){o.hasClass(m.id,"mceSplitButtonDisabled")||o.addClass(m.id,"mceSplitButtonHover")});q.add(m.id,"mouseout",function(){o.hasClass(m.id,"mceSplitButtonDisabled")||o.removeClass(m.id,"mceSplitButtonHover")})}},destroy:function(){this.parent();
q.clear(this.id+"_action");q.clear(this.id+"_open")}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event,m=k.is,h=k.each;k.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,e){this.parent(a,e);this.settings=e=k.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new k.util.Dispatcher(this);this.onHideMenu=new k.util.Dispatcher(this);this.value=e.default_color},showMenu:function(){var a=this,e,b;if(!a.isDisabled()){if(!a.isMenuRendered){a.renderMenu();a.isMenuRendered=true}if(a.isMenuVisible)return a.hideMenu();e=o.get(a.id);o.show(a.id+"_menu");o.addClass(e,"mceSplitButtonSelected");b=o.getPos(e);o.setStyles(a.id+"_menu",{left:b.x,top:b.y+e.clientHeight,zIndex:2E5});e=0;q.add(o.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
if(a._focused){a._keyHandler=q.add(a.id+"_menu","keydown",function(d){d.keyCode==27&&a.hideMenu()});o.select("a",a.id+"_menu")[0].focus()}a.isMenuVisible=1}},hideMenu:function(a){var e=this;if(!(a&&a.type=="mousedown"&&o.getParent(a.target,function(b){return b.id===e.id+"_open"}))){if(!a||!o.getParent(a.target,".mceSplitButtonMenu")){o.removeClass(e.id,"mceSplitButtonSelected");q.remove(o.doc,"mousedown",e.hideMenu,e);q.remove(e.id+"_menu","keydown",e._keyHandler);o.hide(e.id+"_menu")}e.onHideMenu.dispatch(e);
e.isMenuVisible=0}},renderMenu:function(){var a=this,e,b=0,d=a.settings,g,f,l,c;c=o.add(d.menu_container,"div",{id:a.id+"_menu","class":d.menu_class+" "+d["class"],style:"position:absolute;left:0;top:-1000px;"});e=o.add(c,"div",{"class":d["class"]+" mceSplitButtonMenu"});o.add(e,"span",{"class":"mceMenuLine"});g=o.add(e,"table",{"class":"mceColorSplitMenu"});f=o.add(g,"tbody");b=0;h(m(d.colors,"array")?d.colors:d.colors.split(","),function(j){j=j.replace(/^#/,"");if(!b--){l=o.add(f,"tr");b=d.grid_width-
1}g=o.add(l,"td");g=o.add(g,"a",{href:"javascript:;",style:{backgroundColor:"#"+j},"data-mce-color":"#"+j})});if(d.more_colors_func){g=o.add(f,"tr");g=o.add(g,"td",{colspan:d.grid_width,"class":"mceMoreColors"});g=o.add(g,"a",{id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},d.more_colors_title);q.add(g,"click",function(j){d.more_colors_func.call(d.more_colors_scope||this);return q.cancel(j)})}o.addClass(e,"mceColorSplitMenu");q.add(a.id+"_menu","click",function(j){var r;
j=j.target;if(j.nodeName=="A"&&(r=j.getAttribute("data-mce-color")))a.setColor(r);return q.cancel(j)});return c},setColor:function(a){o.setStyle(this.id+"_preview","backgroundColor",a);this.value=a;this.hideMenu();this.settings.onselect(a)},postRender:function(){var a=this.id;this.parent();o.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});o.setStyle(this.id+"_preview","backgroundColor",this.value)},destroy:function(){this.parent();q.clear(this.id+"_menu");q.clear(this.id+"_more");
o.remove(this.id+"_menu")}})})(tinymce);
tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var k="",o,q,m=tinymce.DOM,h=this.settings,a,e,b,d;d=this.controls;for(a=0;a<d.length;a++){q=d[a];e=d[a-1];b=d[a+1];if(a===0){o="mceToolbarStart";if(q.Button)o+=" mceToolbarStartButton";else if(q.SplitButton)o+=" mceToolbarStartSplitButton";else if(q.ListBox)o+=" mceToolbarStartListBox";k+=m.createHTML("td",{"class":o},m.createHTML("span",null,"<!-- IE --\>"))}if(e&&q.ListBox)if(e.Button||e.SplitButton)k+=m.createHTML("td",
{"class":"mceToolbarEnd"},m.createHTML("span",null,"<!-- IE --\>"));k+=m.stdMode?'<td style="position: relative">'+q.renderHTML()+"</td>":"<td>"+q.renderHTML()+"</td>";if(b&&q.ListBox)if(b.Button||b.SplitButton)k+=m.createHTML("td",{"class":"mceToolbarStart"},m.createHTML("span",null,"<!-- IE --\>"))}o="mceToolbarEnd";if(q.Button)o+=" mceToolbarEndButton";else if(q.SplitButton)o+=" mceToolbarEndSplitButton";else if(q.ListBox)o+=" mceToolbarEndListBox";k+=m.createHTML("td",{"class":o},m.createHTML("span",
null,"<!-- IE --\>"));return m.createHTML("table",{id:this.id,"class":"mceToolbar"+(h["class"]?" "+h["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||""},"<tbody><tr>"+k+"</tr></tbody>")}});
(function(k){var o=k.util.Dispatcher;k.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new o(this)},get:function(q){return this.lookup[q]},requireLangPack:function(q){var m=k.settings;m&&m.language&&m.language_load!==false&&k.ScriptLoader.add(this.urls[q]+"/langs/"+m.language+".js")},add:function(q,m){this.items.push(m);this.lookup[q]=m;this.onAdd.dispatch(this,q,m);return m},load:function(q,m,h,a){if(!this.urls[q]){if(m.indexOf("/")!=0&&
m.indexOf("://")==-1)m=k.baseURL+"/"+m;this.urls[q]=m.substring(0,m.lastIndexOf("/"));this.lookup[q]||k.ScriptLoader.add(m,h,a)}}});k.PluginManager=new k.AddOnManager;k.ThemeManager=new k.AddOnManager})(tinymce);
(function(k){var o=k.each,q=k.extend,m=k.DOM,h=k.dom.Event,a=k.explode,e=k.util.Dispatcher,b=0;k.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(k.documentBaseURL)||(k.documentBaseURL+="/");k.baseURL=(new k.util.URI(k.documentBaseURL)).toAbsolute(k.baseURL);k.baseURI=new k.util.URI(k.baseURL);k.onBeforeUnload=new e(k);h.add(window,"beforeunload",function(d){k.onBeforeUnload.dispatch(k,d)});k.onAddEditor=new e(k);k.onRemoveEditor=new e(k);k.EditorManager=
q(k,{editors:[],i18n:{},activeEditor:null,init:function(d){function g(r,p,n){var s=r[p];if(s){if(k.is(s,"string")){n=(n=s.replace(/\.\w+$/,""))?k.resolve(n):0;s=k.resolve(s)}return s.apply(n||this,Array.prototype.slice.call(arguments,2))}}var f=this,l,c=[],j;d=q({theme:"simple",language:"en"},d);f.settings=d;h.add(document,"init",function(){var r,p;g(d,"onpageload");switch(d.mode){case "exact":r=d.elements||"";r.length>0&&o(a(r),function(n){if(m.get(n)){j=new k.Editor(n,d);c.push(j);j.render(1)}else o(document.forms,
function(s){o(s.elements,function(u){if(u.name===n){n="mce_editor_"+b++;m.setAttrib(u,"id",n);j=new k.Editor(n,d);c.push(j);j.render(1)}})})});break;case "textareas":case "specific_textareas":o(m.select("textarea"),function(n){if(!(d.editor_deselector&&(d.editor_deselector.constructor===RegExp?d.editor_deselector.test(n.className):m.hasClass(n,d.editor_deselector))))if(!d.editor_selector||(d.editor_selector.constructor===RegExp?d.editor_selector.test(n.className):m.hasClass(n,d.editor_selector))){l=
m.get(n.name);if(!n.id&&!l)n.id=n.name;if(!n.id||f.get(n.id))n.id=m.uniqueId();j=new k.Editor(n.id,d);c.push(j);j.render(1)}})}if(d.oninit){r=p=0;o(c,function(n){p++;if(n.initialized)r++;else n.onInit.add(function(){r++;r==p&&g(d,"oninit")});r==p&&g(d,"oninit")})}})},get:function(d){if(d===void 0)return this.editors;return this.editors[d]},getInstanceById:function(d){return this.get(d)},add:function(d){var g=this.editors;g[d.id]=d;g.push(d);this._setActive(d);this.onAddEditor.dispatch(this,d);k.adapter&&
k.adapter.patchEditor(d);return d},remove:function(d){var g,f=this.editors;if(!f[d.id])return null;delete f[d.id];for(g=0;g<f.length;g++)if(f[g]==d){f.splice(g,1);break}this.activeEditor==d&&this._setActive(f[0]);d.destroy();this.onRemoveEditor.dispatch(this,d);return d},execCommand:function(d,g,f){var l=this.get(f),c;switch(d){case "mceFocus":l.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(f)||(new k.Editor(f,this.settings)).render();return true;case "mceAddFrameControl":c=
f.window;c.tinyMCE=tinyMCE;c.tinymce=k;k.DOM.doc=c.document;k.DOM.win=c;l=new k.Editor(f.element_id,f);l.render();if(k.isIE){var j=function(){l.destroy();c.detachEvent("onunload",j);c=c.tinyMCE=c.tinymce=null};c.attachEvent("onunload",j)}f.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":l&&l.remove();return true;case "mceToggleEditor":if(!l){this.execCommand("mceAddControl",0,f);return true}l.isHidden()?l.show():l.hide();return true}if(this.activeEditor)return this.activeEditor.execCommand(d,
g,f);return false},execInstanceCommand:function(d,g,f,l){if(d=this.get(d))return d.execCommand(g,f,l);return false},triggerSave:function(){o(this.editors,function(d){d.save()})},addI18n:function(d,g){var f=this.i18n;k.is(d,"string")?o(g,function(l,c){f[d+"."+c]=l}):o(d,function(l,c){o(l,function(j,r){o(j,function(p,n){if(r==="common")f[c+"."+n]=p;else f[c+"."+r+"."+n]=p})})})},_setActive:function(d){this.selectedInstance=this.activeEditor=d}})})(tinymce);
(function(k){var o=k.DOM,q=k.dom.Event,m=k.extend,h=k.util.Dispatcher,a=k.each,e=k.isGecko,b=k.isIE,d=k.is,g=k.ThemeManager,f=k.PluginManager,l=k.explode;k.create("tinymce.Editor",{Editor:function(c,j){var r=this;r.id=r.editorId=c;r.execCommands={};r.queryStateCommands={};r.queryValueCommands={};r.isNotDirty=false;r.plugins={};a(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp",
"onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(p){r[p]=new h(r)});r.settings=j=m({id:c,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:k.documentBaseURL,
add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:k.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",
apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area",validate:true,entity_encoding:"named",url_converter:r.convertURL,
url_converter_scope:r,ie7_compat:true},j);r.documentBaseURI=new k.util.URI(j.document_base_url||k.documentBaseURL,{base_uri:tinyMCE.baseURI});r.baseURI=k.baseURI;r.contentCSS=[];r.execCallback("setup",r)},render:function(){var c=this,j=c.settings,r=c.id,p=k.ScriptLoader;if(q.domLoaded){tinyMCE.settings=j;if(c.getElement())if(!k.isIDevice){!/TEXTAREA|INPUT/i.test(c.getElement().nodeName)&&j.hidden_input&&o.getParent(r,"form")&&o.insertAfter(o.create("input",{type:"hidden",name:r}),r);if(k.WindowManager)c.windowManager=
new k.WindowManager(c);j.encoding=="xml"&&c.onGetContent.add(function(n,s){if(s.save)s.content=o.encode(s.content)});j.add_form_submit_trigger&&c.onSubmit.addToTop(function(){if(c.initialized){c.save();c.isNotDirty=1}});if(j.add_unload_trigger)c._beforeUnload=tinyMCE.onBeforeUnload.add(function(){c.initialized&&!c.destroyed&&!c.isHidden()&&c.save({format:"raw",no_events:true})});k.addUnload(c.destroy,c);j.submit_patch&&c.onBeforeRenderUI.add(function(){var n=c.getElement().form;if(n)if(!n._mceOldSubmit){if(!n.submit.nodeType&&
!n.submit.length){c.formElement=n;n._mceOldSubmit=n.submit;n.submit=function(){k.triggerSave();c.isNotDirty=1;return c.formElement._mceOldSubmit(c.formElement)}}n=null}});(function(){j.language&&j.language_load!==false&&p.add(k.baseURL+"/langs/"+j.language+".js");j.theme&&j.theme.charAt(0)!="-"&&!g.urls[j.theme]&&g.load(j.theme,"themes/"+j.theme+"/editor_template"+k.suffix+".js");a(l(j.plugins),function(n){n&&n.charAt(0)!="-"&&!f.urls[n]&&n!="safari"&&f.load(n,"plugins/"+n+"/editor_plugin"+k.suffix+
".js")});p.loadQueue(function(){c.removed||c.init()})})()}}else q.add(document,"init",function(){c.render()})},init:function(){var c=this,j=c.settings,r,p,n=c.getElement(),s,u,t;k.add(c);if(j.theme){j.theme=j.theme.replace(/-/,"");s=g.get(j.theme);c.theme=new s;if(c.theme.init&&j.init_theme)c.theme.init(c,g.urls[j.theme]||k.documentBaseURL.replace(/\/$/,""))}a(l(j.plugins.replace(/\-/g,"")),function(v){var D=f.get(v),F=f.urls[v]||k.documentBaseURL.replace(/\/$/,"");if(D){D=new D(c,F);c.plugins[v]=
D;D.init&&D.init(c,F)}});if(j.popup_css!==false)j.popup_css=j.popup_css?c.documentBaseURI.toAbsolute(j.popup_css):c.baseURI.toAbsolute("themes/"+j.theme+"/skins/"+j.skin+"/dialog.css");if(j.popup_css_add)j.popup_css+=","+c.documentBaseURI.toAbsolute(j.popup_css_add);c.controlManager=new k.ControlManager(c);j.custom_undo_redo&&c.onExecCommand.add(function(v,D,F,y,x){if(D!="Undo"&&D!="Redo"&&D!="mceRepaint"&&(!x||!x.skip_undo))c.undoManager.add()});c.onExecCommand.add(function(v,D){/^(FontName|FontSize)$/.test(D)||
c.nodeChanged()});if(e){t=function(v,D){if(!D||!D.initial)c.execCommand("mceRepaint")};c.onUndo.add(t);c.onRedo.add(t);c.onSetContent.add(t)}c.onBeforeRenderUI.dispatch(c,c.controlManager);if(j.render_ui){r=j.width||n.style.width||n.offsetWidth;p=j.height||n.style.height||n.offsetHeight;c.orgDisplay=n.style.display;t=/^[0-9\.]+(|px)$/i;if(t.test(""+r))r=Math.max(parseInt(r)+(s.deltaWidth||0),100);if(t.test(""+p))p=Math.max(parseInt(p)+(s.deltaHeight||0),100);s=c.theme.renderUI({targetNode:n,width:r,
height:p,deltaWidth:j.delta_width,deltaHeight:j.delta_height});c.editorContainer=s.editorContainer}if(document.domain&&location.hostname!=document.domain)k.relaxedDomain=document.domain;o.setStyles(s.sizeContainer||s.editorContainer,{width:r,height:p});j.content_css&&k.each(l(j.content_css),function(v){c.contentCSS.push(c.documentBaseURI.toAbsolute(v))});p=(s.iframeHeight||p)+(typeof p=="number"?s.deltaHeight||0:"");if(p<100)p=100;c.iframeHTML=j.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';
if(j.document_base_url!=k.documentBaseURL)c.iframeHTML+='<base href="'+c.documentBaseURI.getURI()+'" />';c.iframeHTML+=j.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';c.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(!e||!/Firefox\/2/.test(navigator.userAgent)){for(r=0;r<c.contentCSS.length;r++)c.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+c.contentCSS[r]+'" />';c.contentCSS=
[]}r=j.body_id||"tinymce";if(r.indexOf("=")!=-1){r=c.getParam("body_id","","hash");r=r[c.id]||r}j=j.body_class||"";if(j.indexOf("=")!=-1){j=c.getParam("body_class","","hash");j=j[c.id]||""}c.iframeHTML+='</head><body id="'+r+'" class="mceContentBody '+j+'"></body></html>';if(k.relaxedDomain&&(b||k.isOpera&&parseFloat(opera.version())<11))u='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+c.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';
o.add(s.iframeContainer,"iframe",{id:c.id+"_ifr",src:u||'javascript:""',frameBorder:"0",style:{width:"100%",height:p}});c.contentAreaContainer=s.iframeContainer;o.get(s.editorContainer).style.display=c.orgDisplay;o.get(c.id).style.display="none";if(!k.relaxedDomain||!u)c.setupIframe();n=s=null},setupIframe:function(){var c=this,j=c.settings;o.get(c.id);var r=c.getDoc(),p;if(!b||!k.relaxedDomain){r.open();r.write(c.iframeHTML);r.close();if(k.relaxedDomain)r.domain=k.relaxedDomain}if(!b)try{if(!j.readonly)r.designMode=
"On"}catch(n){}if(b){p=c.getBody();o.hide(p);if(!j.readonly)p.contentEditable=true;o.show(p)}c.schema=new k.html.Schema(j);c.dom=new k.dom.DOMUtils(c.getDoc(),{keep_values:true,url_converter:c.convertURL,url_converter_scope:c,hex_colors:j.force_hex_style_colors,class_filter:j.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:c.schema});c.parser=new k.html.DomParser(j,c.schema);c.parser.addAttributeFilter("src,href,style",function(t,v){for(var D=t.length,F,y=c.dom,x;D--;){F=t[D];x=F.attr(v);
v==="style"?F.attr("data-mce-style",y.serializeStyle(y.parseStyle(x),F.name)):F.attr("data-mce-"+v,c.convertURL(x,v,F.name))}});c.parser.addNodeFilter("script",function(t){for(var v=t.length;v--;)t[v].attr("type","mce-text/javascript")});c.parser.addNodeFilter("#cdata",function(t){for(var v=t.length,D;v--;){D=t[v];D.type=8;D.name="#comment";D.value="[CDATA["+D.value+"]]"}});c.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var v=t.length,D,F=c.schema.getEmptyElements();v--;){D=t[v];
if(D.isEmpty(F))D.empty().append(new k.html.Node("br",1)).empty=true}});c.serializer=new k.dom.Serializer(j,c.dom,c.schema);c.selection=new k.dom.Selection(c.dom,c.getWin(),c.serializer);c.formatter=new k.Formatter(this);c.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",styles:{display:"block",
marginLeft:"auto",marginRight:"auto"}},{selector:"table",styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},
{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",
attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){c.formatter.register(t,{block:t,remove:"all"})});
c.formatter.register(c.settings.formats);c.undoManager=new k.UndoManager(c);c.undoManager.onAdd.add(function(t,v){if(!v.initial)return c.onChange.dispatch(c,v,t)});c.undoManager.onUndo.add(function(t,v){return c.onUndo.dispatch(c,v,t)});c.undoManager.onRedo.add(function(t,v){return c.onRedo.dispatch(c,v,t)});c.forceBlocks=new k.ForceBlocks(c,{forced_root_block:j.forced_root_block});c.editorCommands=new k.EditorCommands(c);c.serializer.onPreProcess.add(function(t,v){return c.onPreProcess.dispatch(c,
v,t)});c.serializer.onPostProcess.add(function(t,v){return c.onPostProcess.dispatch(c,v,t)});c.onPreInit.dispatch(c);if(!j.gecko_spellcheck)c.getBody().spellcheck=0;j.readonly||c._addEvents();c.controlManager.onPostRender.dispatch(c,c.controlManager);c.onPostRender.dispatch(c);if(j.directionality)c.getBody().dir=j.directionality;if(j.nowrap)c.getBody().style.whiteSpace="nowrap";j.handle_node_change_callback&&c.onNodeChange.add(function(t,v,D){c.execCallback("handle_node_change_callback",c.id,D,-1,
-1,true,c.selection.isCollapsed())});j.save_callback&&c.onSaveContent.add(function(t,v){var D=c.execCallback("save_callback",c.id,v.content,c.getBody());if(D)v.content=D});j.onchange_callback&&c.onChange.add(function(t,v){c.execCallback("onchange_callback",c,v)});j.protect&&c.onBeforeSetContent.add(function(t,v){j.protect&&a(j.protect,function(D){v.content=v.content.replace(D,function(F){return"<!--mce:protected "+escape(F)+"--\>"})})});j.convert_newlines_to_brs&&c.onBeforeSetContent.add(function(t,
v){if(v.initial)v.content=v.content.replace(/\r?\n/g,"<br />")});j.preformatted&&c.onPostProcess.add(function(t,v){v.content=v.content.replace(/^\s*<pre.*?>/,"");v.content=v.content.replace(/<\/pre>\s*$/,"");if(v.set)v.content='<pre class="mceItemHidden">'+v.content+"</pre>"});if(j.verify_css_classes)c.serializer.attribValueFilter=function(t,v){var D,F;if(t=="class"){if(!c.classesRE){F=c.dom.getClasses();if(F.length>0){D="";a(F,function(y){D+=(D?"|":"")+y["class"]});c.classesRE=RegExp("("+D+")","gi")}}return!c.classesRE||
/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(v)||c.classesRE.test(v)?v:""}return v};if(j.cleanup_callback){c.onBeforeSetContent.add(function(t,v){v.content=c.execCallback("cleanup_callback","insert_to_editor",v.content,v)});c.onPreProcess.add(function(t,v){v.set&&c.execCallback("cleanup_callback","insert_to_editor_dom",v.node,v);v.get&&c.execCallback("cleanup_callback","get_from_editor_dom",v.node,v)});c.onPostProcess.add(function(t,v){if(v.set)v.content=c.execCallback("cleanup_callback","insert_to_editor",
v.content,v);if(v.get)v.content=c.execCallback("cleanup_callback","get_from_editor",v.content,v)})}j.save_callback&&c.onGetContent.add(function(t,v){if(v.save)v.content=c.execCallback("save_callback",c.id,v.content,c.getBody())});j.handle_event_callback&&c.onEvent.add(function(t,v,D){c.execCallback("handle_event_callback",v,t,D)===false&&q.cancel(v)});c.onSetContent.add(function(){c.addVisual(c.getBody())});j.padd_empty_editor&&c.onPostProcess.add(function(t,v){v.content=v.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});if(e){var s=function(t){a(t.dom.select("a"),function(v){var D=v.parentNode;t.dom.isBlock(D)&&D.lastChild===v&&t.dom.add(D,"br",{"data-mce-bogus":1})})};c.onExecCommand.add(function(t,v){v==="CreateLink"&&s(t)});c.onSetContent.add(c.selection.onSetContent.add(s));if(!j.readonly)try{r.designMode="Off";r.designMode="On"}catch(u){}}setTimeout(function(){if(!c.removed){c.load({initial:true,format:"html"});c.startContent=c.getContent({format:"raw"});c.undoManager.add();c.initialized=true;c.onInit.dispatch(c);
c.execCallback("setupcontent_callback",c.id,c.getBody(),c.getDoc());c.execCallback("init_instance_callback",c);c.focus(true);c.nodeChanged({initial:1});a(c.contentCSS,function(t){c.dom.loadCSS(t)});j.auto_focus&&setTimeout(function(){var t=k.get(j.auto_focus);t.selection.select(t.getBody(),1);t.selection.collapse(1);t.getWin().focus()},100)}},1)},focus:function(c){var j;j=this.settings.content_editable;var r,p=this.getDoc();if(!c){c=this.selection.getRng();if(c.item)r=c.item(0);j||this.getWin().focus();
if(r&&r.ownerDocument==p){c=p.body.createControlRange();c.addElement(r);c.select()}}if(k.activeEditor!=this){if((j=k.activeEditor)!=null)j.onDeactivate.dispatch(j,this);this.onActivate.dispatch(this,j)}k._setActive(this)},execCallback:function(c){var j=this.settings[c],r;if(j){if(this.callbackLookup&&(r=this.callbackLookup[c])){j=r.func;r=r.scope}if(d(j,"string")){r=(r=j.replace(/\.\w+$/,""))?k.resolve(r):0;j=k.resolve(j);this.callbackLookup=this.callbackLookup||{};this.callbackLookup[c]={func:j,
scope:r}}return j.apply(r||this,Array.prototype.slice.call(arguments,1))}},translate:function(c){var j=this.settings.language||"en",r=k.i18n;if(!c)return"";return r[j+"."+c]||c.replace(/{\#([^}]+)\}/g,function(p,n){return r[j+"."+n]||"{#"+n+"}"})},getLang:function(c,j){return k.i18n[(this.settings.language||"en")+"."+c]||(d(j)?j:"{#"+c+"}")},getParam:function(c,j,r){var p=k.trim;c=d(this.settings[c])?this.settings[c]:j;var n;if(r==="hash"){n={};if(d(c,"string"))a(c.indexOf("=")>0?c.split(/[;,](?![^=;,]*(?:[;,]|$))/):
c.split(","),function(s){s=s.split("=");if(s.length>1)n[p(s[0])]=p(s[1]);else n[p(s[0])]=p(s)});else n=c;return n}return c},nodeChanged:function(c){var j=this.selection,r=(b?j.getNode():j.getStart())||this.getBody();if(this.initialized){c=c||{};r=b&&r.ownerDocument!=this.getDoc()?this.getBody():r;c.parents=[];this.dom.getParent(r,function(p){if(p.nodeName=="BODY")return true;c.parents.push(p)});this.onNodeChange.dispatch(this,c?c.controlManager||this.controlManager:this.controlManager,r,j.isCollapsed(),
c)}},addButton:function(c,j){this.buttons=this.buttons||{};this.buttons[c]=j},addCommand:function(c,j,r){this.execCommands[c]={func:j,scope:r||this}},addQueryStateHandler:function(c,j,r){this.queryStateCommands[c]={func:j,scope:r||this}},addQueryValueHandler:function(c,j,r){this.queryValueCommands[c]={func:j,scope:r||this}},addShortcut:function(c,j,r,p){var n=this,s;if(!n.settings.custom_shortcuts)return false;n.shortcuts=n.shortcuts||{};if(d(r,"string")){s=r;r=function(){n.execCommand(s,false,null)}}if(d(r,
"object")){s=r;r=function(){n.execCommand(s[0],s[1],s[2])}}a(l(c),function(u){var t={func:r,scope:p||this,desc:j,alt:false,ctrl:false,shift:false};a(l(u,"+"),function(v){switch(v){case "alt":case "ctrl":case "shift":t[v]=true;break;default:t.charCode=v.charCodeAt(0);t.keyCode=v.toUpperCase().charCodeAt(0)}});n.shortcuts[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t});return true},execCommand:function(c,j,r,p){var n=this,s=0,u;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(c)&&
(!p||!p.skip_focus))n.focus();u={};n.onBeforeExecCommand.dispatch(n,c,j,r,u);if(u.terminate)return false;if(n.execCallback("execcommand_callback",n.id,n.selection.getNode(),c,j,r)){n.onExecCommand.dispatch(n,c,j,r,p);return true}if(u=n.execCommands[c]){u=u.func.call(u.scope,j,r);if(u!==true){n.onExecCommand.dispatch(n,c,j,r,p);return u}}a(n.plugins,function(t){if(t.execCommand&&t.execCommand(c,j,r)){n.onExecCommand.dispatch(n,c,j,r,p);s=1;return false}});if(s)return true;if(n.theme&&n.theme.execCommand&&
n.theme.execCommand(c,j,r)){n.onExecCommand.dispatch(n,c,j,r,p);return true}if(n.editorCommands.execCommand(c,j,r)){n.onExecCommand.dispatch(n,c,j,r,p);return true}n.getDoc().execCommand(c,j,r);n.onExecCommand.dispatch(n,c,j,r,p)},queryCommandState:function(c){var j;if(!this._isHidden()){if(j=this.queryStateCommands[c]){j=j.func.call(j.scope);if(j!==true)return j}j=this.editorCommands.queryCommandState(c);if(j!==-1)return j;try{return this.getDoc().queryCommandState(c)}catch(r){}}},queryCommandValue:function(c){var j;
if(!this._isHidden()){if(j=this.queryValueCommands[c]){j=j.func.call(j.scope);if(j!==true)return j}j=this.editorCommands.queryCommandValue(c);if(d(j))return j;try{return this.getDoc().queryCommandValue(c)}catch(r){}}},show:function(){o.show(this.getContainer());o.hide(this.id);this.load()},hide:function(){var c=this.getDoc();b&&c&&c.execCommand("SelectAll");this.save();o.hide(this.getContainer());o.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!o.isHidden(this.id)},setProgressState:function(c,
j,r){this.onSetProgressState.dispatch(this,c,j,r);return c},load:function(c){var j=this.getElement(),r;if(j){c=c||{};c.load=true;r=this.setContent(d(j.value)?j.value:j.innerHTML,c);c.element=j;c.no_events||this.onLoadContent.dispatch(this,c);c.element=null;return r}},save:function(c){var j=this,r=j.getElement(),p;if(r&&j.initialized){c=c||{};c.save=true;if(!c.no_events){j.undoManager.typing=false;j.undoManager.add()}c.element=r;p=c.content=j.getContent(c);c.no_events||j.onSaveContent.dispatch(j,c);
p=c.content;if(/TEXTAREA|INPUT/i.test(r.nodeName))r.value=p;else{r.innerHTML=p;if(r=o.getParent(j.id,"form"))a(r.elements,function(n){if(n.name==j.id){n.value=p;return false}})}c.element=r=null;return p}},setContent:function(c,j){var r=this.getBody();j=j||{};j.format=j.format||"html";j.set=true;j.content=c;j.no_events||this.onBeforeSetContent.dispatch(this,j);if(!k.isIE&&(c.length===0||/^\s+$/.test(c)))r.innerHTML='<br data-mce-bogus="1" />';else{if(j.format!=="raw")j.content=(new k.html.Serializer({},
this.schema)).serialize(this.parser.parse(j.content));r.innerHTML=k.trim(j.content);j.no_events||this.onSetContent.dispatch(this,j);return j.content}},getContent:function(c){var j;c=c||{};c.format=c.format||"html";c.get=true;c.no_events||this.onBeforeGetContent.dispatch(this,c);j=c.format=="raw"?this.getBody().innerHTML:this.serializer.serialize(this.getBody(),c);c.content=k.trim(j);c.no_events||this.onGetContent.dispatch(this,c);return c.content},isDirty:function(){return k.trim(this.startContent)!=
k.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},getContainer:function(){if(!this.container)this.container=o.get(this.editorContainer||this.id+"_parent");return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return o.get(this.settings.content_element||this.id)},getWin:function(){var c;if(!this.contentWindow)if(c=o.get(this.id+"_ifr"))this.contentWindow=c.contentWindow;return this.contentWindow},getDoc:function(){var c;
if(!this.contentDocument)if(c=this.getWin())this.contentDocument=c.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(c,j,r){var p=this.settings;if(p.urlconverter_callback)return this.execCallback("urlconverter_callback",c,r,true,j);if(!p.convert_urls||r&&r.nodeName=="LINK"||c.indexOf("file:")===0)return c;if(p.relative_urls)return this.documentBaseURI.toRelative(c);return c=this.documentBaseURI.toAbsolute(c,p.remove_script_host)},
addVisual:function(c){var j=this,r=j.settings;c=c||j.getBody();if(!d(j.hasVisual))j.hasVisual=r.visual;a(j.dom.select("table,a",c),function(p){var n;switch(p.nodeName){case "TABLE":n=j.dom.getAttrib(p,"border");if(!n||n=="0")j.hasVisual?j.dom.addClass(p,r.visual_table_class):j.dom.removeClass(p,r.visual_table_class);break;case "A":if(n=j.dom.getAttrib(p,"name"))j.hasVisual?j.dom.addClass(p,"mceItemAnchor"):j.dom.removeClass(p,"mceItemAnchor")}});j.onVisualAid.dispatch(j,c,j.hasVisual)},remove:function(){var c=
this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];k.remove(this);o.remove(c)},destroy:function(c){if(!this.destroyed){if(!c){k.removeUnload(this.destroy);tinyMCE.onBeforeUnload.remove(this._beforeUnload);this.theme&&this.theme.destroy&&this.theme.destroy();this.controlManager.destroy();this.selection.destroy();this.dom.destroy();if(!this.settings.content_editable){q.clear(this.getWin());q.clear(this.getDoc())}q.clear(this.getBody());
q.clear(this.formElement)}if(this.formElement){this.formElement.submit=this.formElement._mceOldSubmit;this.formElement._mceOldSubmit=null}this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null;if(this.selection)this.selection=this.selection.win=this.selection.dom=this.selection.dom.doc=null;this.destroyed=1}},_addEvents:function(){function c(F,y){if(!j.removed)if(j.onEvent.dispatch(j,F,y)!==false)j[s[F.fakeType||
F.type]].dispatch(j,F,y)}var j=this,r,p=j.settings,n=j.dom,s={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(s,function(F,y){switch(y){case "contextmenu":k.isOpera?n.bind(j.getBody(),"mousedown",function(x){if(x.ctrlKey){x.fakeType="contextmenu";c(x)}}):n.bind(j.getBody(),y,c);break;case "paste":n.bind(j.getBody(),y,function(x){c(x)});
break;case "submit":case "reset":n.bind(j.getElement().form||o.getParent(j.id,"form"),y,c);break;default:n.bind(p.content_editable?j.getBody():j.getDoc(),y,c)}});n.bind(p.content_editable?j.getBody():e?j.getDoc():j.getWin(),"focus",function(){j.focus(true)});k.isGecko&&n.bind(j.getDoc(),"DOMNodeInserted",function(F){var y;F=F.target;if(F.nodeType===1&&F.nodeName==="IMG"&&(y=F.getAttribute("data-mce-src")))F.src=j.documentBaseURI.toAbsolute(y)});if(e){r=function(){var F=this.getDoc(),y=this.settings;
if(e&&!y.readonly){if(this._isHidden())try{if(!y.content_editable)F.designMode="On"}catch(x){}try{F.execCommand("styleWithCSS",0,false)}catch(A){if(!this._isHidden())try{F.execCommand("useCSS",0,true)}catch(O){}}if(!y.table_inline_editing)try{F.execCommand("enableInlineTableEditing",false,false)}catch(J){}if(!y.object_resizing)try{F.execCommand("enableObjectResizing",false,false)}catch(B){}}};j.onBeforeExecCommand.add(r);j.onMouseDown.add(r)}k.isWebKit&&j.onClick.add(function(F,y){y=y.target;if(y.nodeName==
"IMG"||y.nodeName=="A"&&n.hasClass(y,"mceItemAnchor")){j.selection.getSel().setBaseAndExtent(y,0,y,1);j.nodeChanged()}});j.onMouseUp.add(j.nodeChanged);j.onKeyUp.add(function(F,y){var x=y.keyCode;if(x>=33&&x<=36||x>=37&&x<=40||x==13||x==45||x==46||x==8||k.isMac&&(x==91||x==93)||y.ctrlKey)j.nodeChanged()});j.onReset.add(function(){j.setContent(j.startContent,{format:"raw"})});if(p.custom_shortcuts){if(p.custom_undo_redo_keyboard_shortcuts){j.addShortcut("ctrl+z",j.getLang("undo_desc"),"Undo");j.addShortcut("ctrl+y",
j.getLang("redo_desc"),"Redo")}j.addShortcut("ctrl+b",j.getLang("bold_desc"),"Bold");j.addShortcut("ctrl+i",j.getLang("italic_desc"),"Italic");j.addShortcut("ctrl+u",j.getLang("underline_desc"),"Underline");for(r=1;r<=6;r++)j.addShortcut("ctrl+"+r,"",["FormatBlock",false,"h"+r]);j.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);j.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);j.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);var u=function(F){var y=null;if(!F.altKey&&!F.ctrlKey&&
!F.metaKey)return y;a(j.shortcuts,function(x){if(!(k.isMac&&x.ctrl!=F.metaKey))if(!(!k.isMac&&x.ctrl!=F.ctrlKey))if(x.alt==F.altKey)if(x.shift==F.shiftKey)if(F.keyCode==x.keyCode||F.charCode&&F.charCode==x.charCode){y=x;return false}});return y};j.onKeyUp.add(function(F,y){if(u(y))return q.cancel(y)});j.onKeyPress.add(function(F,y){if(u(y))return q.cancel(y)});j.onKeyDown.add(function(F,y){var x=u(y);if(x){x.func.call(x.scope);return q.cancel(y)}})}if(k.isIE){n.bind(j.getDoc(),"controlselect",function(F){var y=
j.resizeInfo;F=F.target;if(F.nodeName==="IMG"){y&&n.unbind(y.node,y.ev,y.cb);if(n.hasClass(F,"mceItemNoResize")){ev="resizestart";y=n.bind(F,"resizestart",q.cancel,q)}else{ev="resizeend";y=n.bind(F,ev,function(x){var A;x=x.target;if(A=n.getStyle(x,"width")){n.setAttrib(x,"width",A.replace(/[^0-9%]+/g,""));n.setStyle(x,"width","")}if(A=n.getStyle(x,"height")){n.setAttrib(x,"height",A.replace(/[^0-9%]+/g,""));n.setStyle(x,"height","")}})}y=j.resizeInfo={node:F,ev:ev,cb:y}}});j.onKeyDown.add(function(F,
y){var x;switch(y.keyCode){case 8:x=j.getDoc().selection;if(x.createRange&&x.createRange().item){F.dom.remove(x.createRange().item(0));return q.cancel(y)}}})}k.isOpera&&j.onClick.add(function(F,y){q.prevent(y)});if(p.custom_undo_redo){var t=function(){j.undoManager.typing=false;j.undoManager.add()};n.bind(j.getDoc(),"focusout",function(){!j.removed&&j.undoManager.typing&&t()});j.onKeyUp.add(function(F,y){var x,A;if(b&&y.keyCode==8){x=j.selection.getRng();if(x.parentElement){x=x.parentElement();A=
j.selection.getBookmark();x.innerHTML=x.innerHTML;j.selection.moveToBookmark(A)}}if(y.keyCode>=33&&y.keyCode<=36||y.keyCode>=37&&y.keyCode<=40||y.keyCode==13||y.keyCode==45||y.ctrlKey)t()});j.onKeyDown.add(function(F,y){var x,A;if(b&&y.keyCode==46){x=j.selection.getRng();if(x.parentElement){A=x.parentElement();if(y.ctrlKey){x.moveEnd("word",1);x.select()}j.selection.getSel().clear();if(x.parentElement()==A){x=j.selection.getBookmark();try{A.innerHTML=A.innerHTML}catch(O){}j.selection.moveToBookmark(x)}y.preventDefault();
return}}if(y.keyCode>=33&&y.keyCode<=36||y.keyCode>=37&&y.keyCode<=40||y.keyCode==13||y.keyCode==45)j.undoManager.typing&&t();else if(!j.undoManager.typing){j.undoManager.add();j.undoManager.typing=true}});j.onMouseDown.add(function(){j.undoManager.typing&&t()})}if(k.isGecko){var v=function(){j.undoManager.typing=false;j.undoManager.add();var F=j.dom.getAttribs(j.selection.getStart().cloneNode(false));return function(){var y=j.selection.getStart();j.dom.removeAllAttribs(y);a(F,function(x){y.setAttributeNode(x.cloneNode(true))});
j.undoManager.typing=false;j.undoManager.add()}},D=function(){var F=j.selection;return!F.isCollapsed()&&F.getStart()!=F.getEnd()};j.onKeyPress.add(function(F,y){if((y.keyCode==8||y.keyCode==46)&&D()){var x=v();j.getDoc().execCommand("delete",false,null);x();return q.cancel(y)}});j.dom.bind(j.getDoc(),"cut",function(){if(D()){var F=v();j.onKeyUp.addToTop(q.cancel,q);setTimeout(function(){F();j.onKeyUp.remove(q.cancel,q)},0)}})}},_isHidden:function(){var c;if(!e)return 0;c=this.selection.getSel();return!c||
!c.rangeCount||c.rangeCount==0}})})(tinymce);
(function(k){var o=k.each,q=true,m=false;k.EditorCommands=function(h){function a(p,n,s){var u;p=p.toLowerCase();if(u=c.exec[p]){u(p,n,s);return q}return m}function e(p){var n;p=p.toLowerCase();if(n=c.state[p])return n(p);return-1}function b(p,n){n=n||"exec";o(p,function(s,u){o(u.toLowerCase().split(","),function(t){c[n][t]=s})})}function d(p,n,s){if(n===void 0)n=m;if(s===void 0)s=null;return h.getDoc().execCommand(p,n,s)}function g(p,n){h.formatter.toggle(p,n?{value:n}:void 0)}var f=h.dom,l=h.selection,
c={state:{},exec:{},value:{}},j=h.settings,r;k.extend(this,{execCommand:a,queryCommandState:e,queryCommandValue:function(p){var n;p=p.toLowerCase();if(n=c.value[p])return n(p);return m},addCommands:b});b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){h.undoManager.add()},"Cut,Copy,Paste":function(p){var n=h.getDoc(),s;try{d(p)}catch(u){s=q}if(s||!n.queryCommandSupported(p))k.isGecko?h.windowManager.confirm(h.getLang("clipboard_msg"),function(t){t&&
open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):h.windowManager.alert(h.getLang("clipboard_no_support"))},unlink:function(p){l.isCollapsed()&&l.select(l.getNode());d(p);l.collapse(m)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(p){var n=p.substring(7);o("left,center,right,full".split(","),function(s){n!=s&&h.formatter.remove("align"+s)});g("align"+n);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(p){var n;d(p);if(p=f.getParent(l.getNode(),
"ol,ul")){n=p.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)){r=l.getBookmark(void 0);f.split(n,p);l.moveToBookmark(r)}}},"Bold,Italic,Underline,Strikethrough":function(p){g(p)},"ForeColor,HiliteColor,FontName":function(p,n,s){g(p,s)},FontSize:function(p,n,s){var u;if(s>=1&&s<=7){u=k.explode(j.font_size_style_values);s=(n=k.explode(j.font_size_classes))?n[s-1]||s:u[s-1]||s}g(p,s)},RemoveFormat:function(p){h.formatter.remove(p)},mceBlockQuote:function(){g("blockquote")},FormatBlock:function(p,
n,s){return g(s||"p")},mceCleanup:function(){var p=l.getBookmark();h.setContent(h.getContent({cleanup:q}),{cleanup:q});l.moveToBookmark(p)},mceRemoveNode:function(p,n,s){p=s||l.getNode();if(p!=h.getBody()){r=l.getBookmark(void 0);h.dom.remove(p,q);l.moveToBookmark(r)}},mceSelectNodeDepth:function(p,n,s){var u=0;f.getParent(l.getNode(),function(t){if(t.nodeType==1&&u++==s){l.select(t);return m}},h.getBody())},mceSelectNode:function(p,n,s){l.select(s)},mceInsertContent:function(p,n,s){var u;if(s.indexOf("{$caret}")==
-1)s+="{$caret}";l.setContent('<span id="__mce">\ufeff</span>');f.setOuterHTML("__mce",s.replace(/\{\$caret\}/,'<span data-mce-type="bookmark" id="__mce">\ufeff</span>'));p=f.select("#__mce")[0];for(n=f.getRoot();p;){if(p===n){f.setOuterHTML(u,(new k.html.Serializer({},h.schema)).serialize((new k.html.DomParser({},h.schema)).parse(f.getOuterHTML(u))));break}u=p;p=p.parentNode}if(p=f.select("#__mce")[0])if(p.parentNode.childNodes.length==1){u=p.parentNode;l.select(u.previousSibling,true);l.collapse(false);
f.remove(u)}else{u=f.createRng();u.setStartBefore(p);u.setEndAfter(p);l.setRng(u);if(k.isIE){h.getDoc().execCommand("Delete",false,null);f.remove(p)}else{f.remove(p);l.setRng(u)}}},mceInsertRawHTML:function(p,n,s){l.setContent("tiny_mce_marker");h.setContent(h.getContent().replace(/tiny_mce_marker/g,function(){return s}))},mceSetContent:function(p,n,s){h.setContent(s)},"Indent,Outdent":function(p){var n,s,u;n=j.indentation;s=/[a-z%]+$/i.exec(n);n=parseInt(n);!e("InsertUnorderedList")&&!e("InsertOrderedList")?
o(l.getSelectedBlocks(),function(t){if(p=="outdent"){u=Math.max(0,parseInt(t.style.paddingLeft||0)-n);f.setStyle(t,"paddingLeft",u?u+s:"")}else f.setStyle(t,"paddingLeft",parseInt(t.style.paddingLeft||0)+n+s)}):d(p)},mceRepaint:function(){if(k.isGecko)try{r=l.getBookmark(q);l.getSel()&&l.getSel().selectAllChildren(h.getBody());l.collapse(q);l.moveToBookmark(r)}catch(p){}},mceToggleFormat:function(p,n,s){h.formatter.toggle(s)},InsertHorizontalRule:function(){l.setContent("<hr />")},mceToggleVisualAid:function(){h.hasVisual=
!h.hasVisual;h.addVisual()},mceReplaceContent:function(p,n,s){l.setContent(s.replace(/\{\$selection\}/g,l.getContent({format:"text"})))},mceInsertLink:function(p,n,s){p=f.getParent(l.getNode(),"a");var u,t;if(k.is(s,"string"))s={href:s};s.href=s.href.replace(" ","%20");if(p)s.href?f.setAttribs(p,s):h.dom.remove(p,q);else{if(k.isWebKit)if(u=f.getParent(l.getNode(),"img")){t=u.style.cssFloat;u.style.cssFloat=null}d("CreateLink",m,"javascript:mctmp(0);");if(t)u.style.cssFloat=t;o(f.select("a[href=javascript:mctmp(0);]"),
function(v){f.setAttribs(v,s)})}},selectAll:function(){var p=f.getRoot(),n=f.createRng();n.setStart(p,0);n.setEnd(p,p.childNodes.length);h.selection.setRng(n)}});b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(p){p="align"+p.substring(7);return h.formatter.match(p)},"Bold,Italic,Underline,Strikethrough":function(p){return h.formatter.match(p)},mceBlockQuote:function(){return h.formatter.match("blockquote")},Outdent:function(){var p;if(j.inline_styles){if((p=f.getParent(l.getStart(),
f.isBlock))&&parseInt(p.style.paddingLeft)>0)return q;if((p=f.getParent(l.getEnd(),f.isBlock))&&parseInt(p.style.paddingLeft)>0)return q}return e("InsertUnorderedList")||e("InsertOrderedList")||!j.inline_styles&&!!f.getParent(l.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(p){return f.getParent(l.getNode(),p=="insertunorderedlist"?"UL":"OL")}},"state");b({"FontSize,FontName":function(p){var n=0,s;if(s=f.getParent(l.getNode(),"span"))n=p=="fontsize"?s.style.fontSize:s.style.fontFamily.replace(/, /g,
",").replace(/[\'\"]/g,"").toLowerCase();return n}},"value");j.custom_undo_redo&&b({Undo:function(){h.undoManager.undo()},Redo:function(){h.undoManager.redo()}})}})(tinymce);
(function(k){var o=k.util.Dispatcher;k.UndoManager=function(q){var m,h=0,a=[];return m={typing:false,onAdd:new o(m),onUndo:new o(m),onRedo:new o(m),add:function(e){var b;b=q.settings;var d;e=e||{};e.content=k.trim(q.getContent({format:"raw",no_events:1}));if((d=a[h])&&d.content==e.content)if(h>0||a.length==1)return null;if(b.custom_undo_redo_levels)if(a.length>b.custom_undo_redo_levels){for(b=0;b<a.length-1;b++)a[b]=a[b+1];a.length--;h=a.length}e.bookmark=q.selection.getBookmark(2,true);if(h<a.length-
1)a.length=h+1;a.push(e);h=a.length-1;m.onAdd.dispatch(m,e);q.isNotDirty=0;return e},undo:function(){var e;if(m.typing){m.add();m.typing=false}if(h>0){e=a[--h];q.setContent(e.content,{format:"raw"});q.selection.moveToBookmark(e.bookmark);m.onUndo.dispatch(m,e)}return e},redo:function(){var e;if(h<a.length-1){e=a[++h];q.setContent(e.content,{format:"raw"});q.selection.moveToBookmark(e.bookmark);m.onRedo.dispatch(m,e)}return e},clear:function(){a=[];h=0;m.typing=false},hasUndo:function(){return h>0||
m.typing},hasRedo:function(){return h<a.length-1}}}})(tinymce);
(function(k){function o(f,l){var c=l.ownerDocument.createRange();c.setStart(f.endContainer,f.endOffset);c.setEndAfter(l);return c.cloneContents().textContent.length==0}function q(f){f=f.innerHTML;f=f.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");f=f.replace(/<[^>]+>/g,"");return f.replace(/[ \u00a0\t\r\n]+/g,"")==""}function m(f,l,c){var j;if(q(c)){j=l.getParent(c,"ul,ol");if(!l.getParent(j.parentNode,"ul,ol")){l.split(j,c);j=l.create("p",0,'<br data-mce-bogus="1" />');l.replace(j,c);
f.select(j,1)}return g}return d}var h=k.dom.Event,a=k.isIE,e=k.isGecko,b=k.isOpera,d=true,g=false;k.create("tinymce.ForceBlocks",{ForceBlocks:function(f){var l=f.settings,c;this.editor=f;this.dom=f.dom;c=(l.forced_root_block||"p").toLowerCase();l.element=c.toUpperCase();f.onPreInit.add(this.setup,this);if(l.forced_root_block){f.onInit.add(this.forceRoots,this);f.onSetContent.add(this.forceRoots,this);f.onBeforeGetContent.add(this.forceRoots,this)}},setup:function(){var f=this,l=f.editor,c=l.settings,
j=l.dom,r=l.selection;if(c.forced_root_block){l.onBeforeExecCommand.add(f.forceRoots,f);l.onKeyUp.add(f.forceRoots,f);l.onPreProcess.add(f.forceRoots,f)}c.force_br_newlines&&a&&l.onKeyPress.add(function(p,n){var s;if(n.keyCode==13&&r.getNode().nodeName!="LI"){r.setContent('<br id="__" /> ',{format:"raw"});s=j.get("__");s.removeAttribute("id");r.select(s);r.collapse();return h.cancel(n)}});if(c.force_p_newlines){if(a){k.addUnload(function(){f._previousFormats=0});l.onKeyPress.add(function(p,n){f._previousFormats=
0;if(n.keyCode==13&&!n.shiftKey&&p.selection.isCollapsed()&&c.keep_styles){var s;var u=p.selection.getStart(),t,v,D;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(u.nodeName)){if(t){v=u.cloneNode(false);v.appendChild(t);t=v}else t=D=u.cloneNode(false);t.removeAttribute("id")}while(u=u.parentNode);if(t)s={wrapper:t,inner:D};f._previousFormats=s}});l.onKeyUp.add(function(p,n){if(n.keyCode==13&&!n.shiftKey){var s=p.selection.getStart(),u=f._previousFormats;if(!s.hasChildNodes()&&u)if((s=j.getParent(s,
j.isBlock))&&s.nodeName!="LI"){s.innerHTML="";if(f._previousFormats){s.appendChild(u.wrapper);u.inner.innerHTML="\ufeff"}else s.innerHTML="\ufeff";r.select(s,1);p.getDoc().execCommand("Delete",false,null);f._previousFormats=0}}})}else l.onKeyPress.add(function(p,n){n.keyCode==13&&!n.shiftKey&&!f.insertPara(n)&&h.cancel(n)});e&&l.onKeyDown.add(function(p,n){if((n.keyCode==8||n.keyCode==46)&&!n.shiftKey)f.backspaceDelete(n,n.keyCode==8)})}k.isWebKit&&l.onKeyPress.add(function(p,n){if(n.keyCode==13&&
(n.shiftKey||c.force_br_newlines&&!j.getParent(r.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))){var s=r.getRng(),u,t=j.create("div",null," "),v=j.getViewPort(p.getWin()).h;s.insertNode(u=j.create("br"));s.setStartAfter(u);s.setEndAfter(u);r.setRng(s);if(r.getSel().focusNode==u.previousSibling){r.select(j.insertAfter(j.doc.createTextNode("\u00a0"),u));r.collapse(d)}j.insertAfter(t,u);s=j.getPos(t).y;j.remove(t);s>v&&p.getWin().scrollTo(0,s);h.cancel(n)}});if(a)if(c.element!="P"){l.onKeyPress.add(function(){f.lastElm=
r.getNode().nodeName});l.onKeyUp.add(function(p,n){var s;s=r.getNode();if(p.getBody().childNodes.length===1&&s.nodeName=="P"){s=j.rename(s,c.element);r.select(s);r.collapse();p.nodeChanged()}else if(n.keyCode==13&&!n.shiftKey&&f.lastElm!="P")if(s=j.getParent(s,"p")){j.rename(s,c.element);p.nodeChanged()}})}},find:function(f,l,c){for(var j=this.editor.getDoc().createTreeWalker(f,4,null,g),r=-1;f=j.nextNode();){r++;if(l==0&&f==c)return r;if(l==1&&r==c)return f}return-1},forceRoots:function(f){f=this.editor;
var l=f.getBody(),c=f.getDoc(),j=f.selection,r=j.getSel(),p=j.getRng(),n=-2,s,u,t,v,D,F=l.childNodes,y,x,A;for(y=F.length-1;y>=0;y--){D=F[y];if(D.nodeType===1&&D.getAttribute("data-mce-type"))v=null;else if(D.nodeType===3||!this.dom.isBlock(D)&&D.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(D.nodeName))if(v)v.hasChildNodes()?v.insertBefore(D,v.firstChild):v.appendChild(D);else{if(D.nodeType!=3||/[^\s]/g.test(D.nodeValue)){if(n==-2&&p)if(!a||p.setStart)if(p.startContainer.nodeType==
1&&(x=p.startContainer.childNodes[p.startOffset])&&x.nodeType==1){A=x.getAttribute("id");x.setAttribute("id","__mce")}else{if(f.dom.getParent(p.startContainer,function(J){return J===l})){u=p.startOffset;t=p.endOffset;n=this.find(l,0,p.startContainer);s=this.find(l,0,p.endContainer)}}else{if(p.item){v=c.body.createTextRange();v.moveToElementText(p.item(0));p=v}v=c.body.createTextRange();v.moveToElementText(l);v.collapse(1);n=v.move("character",-16777215)*-1;v=p.duplicate();v.collapse(1);s=v.move("character",
-16777215)*-1;v=p.duplicate();v.collapse(0);v=v.move("character",-16777215)*-1-s;n=s-n;s=v}v=f.dom.create(f.settings.forced_root_block);D.parentNode.replaceChild(v,D);v.appendChild(D)}}else v=null}if(n!=-2)if(!a||p.setStart){v=l.getElementsByTagName(f.settings.element)[0];p=c.createRange();n!=-1?p.setStart(this.find(l,1,n),u):p.setStart(v,0);s!=-1?p.setEnd(this.find(l,1,s),t):p.setEnd(v,0);if(r){r.removeAllRanges();r.addRange(p)}}else try{p=r.createRange();p.moveToElementText(l);p.collapse(1);p.moveStart("character",
n);p.moveEnd("character",s);p.select()}catch(O){}else if((!a||p.setStart)&&(x=f.dom.get("__mce"))){A?x.setAttribute("id",A):x.removeAttribute("id");p=c.createRange();p.setStartBefore(x);p.setEndBefore(x);j.setRng(p)}},getParentBlock:function(f){var l=this.dom;return l.getParent(f,l.isBlock)},insertPara:function(){function f(V,Z){var ba=[],aa,fa;V.innerHTML="";if(r.keep_styles){fa=Z;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(fa.nodeName)){aa=fa.cloneNode(g);c.setAttrib(aa,"id","");ba.push(aa)}while(fa=
fa.parentNode)}if(ba.length>0){fa=ba.length-1;for(aa=V;fa>=0;fa--)aa=aa.appendChild(ba[fa]);ba[0].innerHTML=b?"&nbsp;":"<br />";return ba[0]}else V.innerHTML=b?"&nbsp;":"<br />"}var l=this.editor,c=l.dom,j=l.getDoc(),r=l.settings,p=l.selection.getSel(),n=p.getRangeAt(0),s=j.body,u,t,v,D,F,y,x,A,O,J,B,z,C=c.getViewPort(l.getWin()),K;u=j.createRange();u.setStart(p.anchorNode,p.anchorOffset);u.collapse(d);t=j.createRange();t.setStart(p.focusNode,p.focusOffset);t.collapse(d);D=(v=u.compareBoundaryPoints(u.START_TO_END,
t)<0)?p.anchorNode:p.focusNode;F=v?p.anchorOffset:p.focusOffset;y=v?p.focusNode:p.anchorNode;v=v?p.focusOffset:p.anchorOffset;if(D===y&&/^(TD|TH)$/.test(D.nodeName)){D.firstChild.nodeName=="BR"&&c.remove(D.firstChild);if(D.childNodes.length==0)l.dom.add(D,r.element,null,"<br />");else{z=D.innerHTML;D.innerHTML="";l.dom.add(D,r.element,null,z)}A=l.dom.add(D,r.element,null,"<br />");n=j.createRange();n.selectNodeContents(A);n.collapse(1);l.selection.setRng(n);return g}if(D==s&&y==s&&s.firstChild&&l.dom.isBlock(s.firstChild)){D=
y=D.firstChild;F=v=0;u=j.createRange();u.setStart(D,0);t=j.createRange();t.setStart(y,0)}D=D.nodeName=="HTML"?j.body:D;D=D.nodeName=="BODY"?D.firstChild:D;y=y.nodeName=="HTML"?j.body:y;y=y.nodeName=="BODY"?y.firstChild:y;x=this.getParentBlock(D);A=this.getParentBlock(y);O=x?x.nodeName:r.element;if(z=this.dom.getParent(x,"li,pre")){if(z.nodeName=="LI")return m(l.selection,this.dom,z);return d}if(x&&(x.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(c.getStyle(x,"position",1)))){O=r.element;x=
null}if(A&&(A.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(c.getStyle(x,"position",1)))){O=r.element;A=null}if(/(TD|TABLE|TH|CAPTION)/.test(O)||x&&O=="DIV"&&/left|right/gi.test(c.getStyle(x,"float",1))){O=r.element;x=A=null}J=x&&x.nodeName==O?x.cloneNode(0):l.dom.create(O);A=A&&A.nodeName==O?A.cloneNode(0):l.dom.create(O);A.removeAttribute("id");if(/^(H[1-6])$/.test(O)&&o(n,x))A=l.dom.create(r.element);z=x=D;do{if(z==s||z.nodeType==9||this.dom.isBlock(z)||/(TD|TABLE|TH|CAPTION)/.test(z.nodeName))break;
x=z}while(z=z.previousSibling?z.previousSibling:z.parentNode);z=B=y;do{if(z==s||z.nodeType==9||this.dom.isBlock(z)||/(TD|TABLE|TH|CAPTION)/.test(z.nodeName))break;B=z}while(z=z.nextSibling?z.nextSibling:z.parentNode);x.nodeName==O?u.setStart(x,0):u.setStartBefore(x);u.setEnd(D,F);J.appendChild(u.cloneContents()||j.createTextNode(""));try{t.setEndAfter(B)}catch(H){}t.setStart(y,v);A.appendChild(t.cloneContents()||j.createTextNode(""));n=j.createRange();if(!x.previousSibling&&x.parentNode.nodeName==
O)n.setStartBefore(x.parentNode);else u.startContainer.nodeName==O&&u.startOffset==0?n.setStartBefore(u.startContainer):n.setStart(u.startContainer,u.startOffset);!B.nextSibling&&B.parentNode.nodeName==O?n.setEndAfter(B.parentNode):n.setEnd(t.endContainer,t.endOffset);n.deleteContents();b&&l.getWin().scrollTo(0,C.y);if(J.firstChild&&J.firstChild.nodeName==O)J.innerHTML=J.firstChild.innerHTML;if(A.firstChild&&A.firstChild.nodeName==O)A.innerHTML=A.firstChild.innerHTML;if(q(J))J.innerHTML="<br />";
if(q(A))K=f(A,y);if(b&&parseFloat(opera.version())<9.5){n.insertNode(J);n.insertNode(A)}else{n.insertNode(A);n.insertNode(J)}A.normalize();J.normalize();n=j.createRange();n.selectNodeContents(e?j.createTreeWalker(K||A,NodeFilter.SHOW_TEXT,null,g).nextNode()||K||A:K||A);n.collapse(1);p.removeAllRanges();p.addRange(n);j=l.dom.getPos(A).y;p=A.clientHeight;if(j<C.y||j+p>C.y+C.h)l.getWin().scrollTo(0,j<C.y?j:j-C.h+25);return g},backspaceDelete:function(f,l){var c=this.editor,j=c.getBody(),r,p=c.selection,
n=p.getRng(),s=n.startContainer,u;if(!l&&n.collapsed&&s.nodeType==1&&n.startOffset==s.childNodes.length){u=new k.dom.TreeWalker(s.lastChild,s);for(r=s.lastChild;r;r=u.prev())if(r.nodeType==3){n.setStart(r,r.nodeValue.length);n.collapse(true);p.setRng(n);return}}if(s&&c.dom.isBlock(s)&&!/^(TD|TH)$/.test(s.nodeName)&&l)if(s.childNodes.length==0||s.childNodes.length==1&&s.firstChild.nodeName=="BR"){for(r=s;(r=r.previousSibling)&&!c.dom.isBlock(r););if(r){if(s!=j.firstChild){for(j=c.dom.doc.createTreeWalker(r,
NodeFilter.SHOW_TEXT,null,g);n=j.nextNode();)r=n;n=c.getDoc().createRange();n.setStart(r,r.nodeValue?r.nodeValue.length:0);n.setEnd(r,r.nodeValue?r.nodeValue.length:0);p.setRng(n);c.dom.remove(s)}return h.cancel(f)}}}})})(tinymce);
(function(k){var o=k.dom.Event,q=k.each,m=k.extend;k.create("tinymce.ControlManager",{ControlManager:function(h,a){var e=this;a=a||{};e.editor=h;e.controls={};e.onAdd=new k.util.Dispatcher(e);e.onPostRender=new k.util.Dispatcher(e);e.prefix=a.prefix||h.id+"_";e._cls={};e.onPostRender.add(function(){q(e.controls,function(b){b.postRender()})})},get:function(h){return this.controls[this.prefix+h]||this.controls[h]},setActive:function(h,a){var e=null;if(e=this.get(h))e.setActive(a);return e},setDisabled:function(h,
a){var e=null;if(e=this.get(h))e.setDisabled(a);return e},add:function(h){if(h){this.controls[h.id]=h;this.onAdd.dispatch(h,this)}return h},createControl:function(h){var a,e=this,b=e.editor;q(b.plugins,function(d){if(d.createControl)if(a=d.createControl(h,e))return false});switch(h){case "|":case "separator":return e.createSeparator()}if(!a&&b.buttons&&(a=b.buttons[h]))return e.createButton(h,a);return e.add(a)},createDropMenu:function(h,a,e){var b=this.editor,d,g,f;a=m({"class":"mceDropDown",constrain:b.settings.constrain_menus},
a);a["class"]=a["class"]+" "+b.getParam("skin")+"Skin";if(f=b.getParam("skin_variant"))a["class"]+=" "+b.getParam("skin")+"Skin"+f.substring(0,1).toUpperCase()+f.substring(1);h=this.prefix+h;d=this.controls[h]=new (e||this._cls.dropmenu||k.ui.DropMenu)(h,a);d.onAddItem.add(function(l,c){var j=c.settings;j.title=b.getLang(j.title,j.title);if(!j.onclick)j.onclick=function(){if(j.cmd)b.execCommand(j.cmd,j.ui||false,j.value)}});b.onRemove.add(function(){d.destroy()});if(k.isIE){d.onShowMenu.add(function(){b.focus();
g=b.selection.getBookmark(1)});d.onHideMenu.add(function(){if(g){b.selection.moveToBookmark(g);g=0}})}return this.add(d)},createListBox:function(h,a,e){var b=this.editor;if(this.get(h))return null;a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onselect)a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};a=m({title:a.title,"class":"mce_"+h,scope:a.scope,control_manager:this},a);h=this.prefix+h;if(b.settings.use_native_selects)e=new k.ui.NativeListBox(h,a);else{e=e||this._cls.listbox||
k.ui.ListBox;e=new e(h,a)}this.controls[h]=e;k.isWebKit&&e.onPostRender.add(function(d,g){o.add(g,"mousedown",function(){b.bookmark=b.selection.getBookmark(1)});o.add(g,"focus",function(){b.selection.moveToBookmark(b.bookmark);b.bookmark=null})});e.hideMenu&&b.onMouseDown.add(e.hideMenu,e);return this.add(e)},createButton:function(h,a,e){var b=this.editor;if(this.get(h))return null;a.title=b.translate(a.title);a.label=b.translate(a.label);a.scope=a.scope||b;if(!a.onclick&&!a.menu_button)a.onclick=
function(){b.execCommand(a.cmd,a.ui||false,a.value)};a=m({title:a.title,"class":"mce_"+h,unavailable_prefix:b.getLang("unavailable",""),scope:a.scope,control_manager:this},a);h=this.prefix+h;if(a.menu_button){e=e||this._cls.menubutton||k.ui.MenuButton;h=new e(h,a);b.onMouseDown.add(h.hideMenu,h)}else{e=this._cls.button||k.ui.Button;h=new e(h,a)}return this.add(h)},createMenuButton:function(h,a,e){a=a||{};a.menu_button=1;return this.createButton(h,a,e)},createSplitButton:function(h,a,e){var b=this.editor;
if(this.get(h))return null;a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onclick)a.onclick=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};if(!a.onselect)a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)};a=m({title:a.title,"class":"mce_"+h,scope:a.scope,control_manager:this},a);h=this.prefix+h;h=this.add(new (e||this._cls.splitbutton||k.ui.SplitButton)(h,a));b.onMouseDown.add(h.hideMenu,h);return h},createColorSplitButton:function(h,a,e){var b=this.editor,d,g;if(this.get(h))return null;
a.title=b.translate(a.title);a.scope=a.scope||b;if(!a.onclick)a.onclick=function(f){if(k.isIE)g=b.selection.getBookmark(1);b.execCommand(a.cmd,a.ui||false,f||a.value)};if(!a.onselect)a.onselect=function(f){b.execCommand(a.cmd,a.ui||false,f||a.value)};a=m({title:a.title,"class":"mce_"+h,menu_class:b.getParam("skin")+"Skin",scope:a.scope,more_colors_title:b.getLang("more_colors")},a);h=this.prefix+h;d=new (e||this._cls.colorsplitbutton||k.ui.ColorSplitButton)(h,a);b.onMouseDown.add(d.hideMenu,d);b.onRemove.add(function(){d.destroy()});
if(k.isIE){d.onShowMenu.add(function(){b.focus();g=b.selection.getBookmark(1)});d.onHideMenu.add(function(){if(g){b.selection.moveToBookmark(g);g=0}})}return this.add(d)},createToolbar:function(h,a,e){h=this.prefix+h;a=new (e||this._cls.toolbar||k.ui.Toolbar)(h,a);if(this.get(h))return null;return this.add(a)},createSeparator:function(h){return new (h||this._cls.separator||k.ui.Separator)},setControlType:function(h,a){return this._cls[h.toLowerCase()]=a},destroy:function(){q(this.controls,function(h){h.destroy()});
this.controls=null}})})(tinymce);
(function(k){var o=k.util.Dispatcher,q=k.each,m=k.isIE,h=k.isOpera;k.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new o(this);this.onClose=new o(this);this.params={};this.features={}},open:function(a,e){var b="",d=this.editor.settings.dialog_type=="modal",g,f,l;l=k.DOM.getViewPort();a=a||{};e=e||{};f=h?l.w:screen.width;l=h?l.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=true;
a.left=a.left||parseInt(f/2)-a.width/2;a.top=a.top||parseInt(l/2)-a.height/2;e.inline=false;e.mce_width=a.width;e.mce_height=a.height;e.mce_auto_focus=a.auto_focus;if(d)if(m){a.center=true;a.help=false;a.dialogWidth=a.width+"px";a.dialogHeight=a.height+"px";a.scroll=a.scrollbars||false}q(a,function(j,r){if(k.is(j,"boolean"))j=j?"yes":"no";/^(name|url)$/.test(r)||(b+=m&&d?(b?";":"")+r+":"+j:(b?",":"")+r+"="+j)});this.features=a;this.params=e;this.onOpen.dispatch(this,a,e);f=a.url||a.file;f=k._addVer(f);
try{if(m&&d){g=1;window.showModalDialog(f,window,b)}else g=window.open(f,a.name,b)}catch(c){}g||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,e,b,d,g,f){return new (k.resolve(a))(e,b,d,g,f)},confirm:function(a,e,b,d){d=d||window;e.call(b||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,e,b,d){d=d||window;d.alert(this._decode(this.editor.getLang(a,a)));if(e)e.call(b||this)},resizeBy:function(a,
e,b){b.resizeBy(a,e)},_decode:function(a){return k.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(k){k.Formatter=function(o){function q(E){return E.nodeType===1&&(E.face==="mceinline"||E.style.fontFamily==="mceinline")}function m(E){return E?y[E]:y}function h(E,G){if(E)if(typeof E!=="string")x(E,function(I,L){h(L,I)});else{G=G.length?G:[G];x(G,function(I){if(I.deep===fa)I.deep=!I.selector;if(I.split===fa)I.split=!I.selector||I.inline;if(I.remove===fa&&I.selector&&!I.inline)I.remove="none";if(I.selector&&I.inline){I.mixed=true;I.block_expand=true}if(typeof I.classes==="string")I.classes=
I.classes.split(/\s+/)});y[E]=G}}function a(E,G,I){function L(Q){var S=Q.startContainer,P=Q.startOffset;if(S.nodeType==1||S.nodeValue==="")if(S=S.nodeType==1?S.childNodes[P]:S){S=new J(S,S.parentNode);for(P=S.current();P;P=S.next())if(P.nodeType==3&&!j(P)){Q.setStart(P,0);break}}return Q}function W(Q,S){S=S||R;if(Q){x(S.styles,function(P,T){A.setStyle(Q,T,c(P,G))});x(S.attributes,function(P,T){A.setAttrib(Q,T,c(P,G))});x(S.classes,function(P){P=c(P,G);A.hasClass(Q,P)||A.addClass(Q,P)})}}function M(Q){var S=
[],P,T;P=R.inline||R.block;T=A.create(P);W(T);B.walk(Q,function(N){function X($){var da=$.nodeName.toLowerCase(),ga=$.parentNode.nodeName.toLowerCase(),ha;if(f(da,"br")){ca=0;R.block&&A.remove($)}else if(R.wrapper&&b($,E,G))ca=0;else if(R.block&&!R.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(da)){$=A.rename($,P);W($);S.push($);ca=0}else{if(R.selector){x(Y,function(ia){if(A.is($,ia.selector)&&!q($)){W($,ia);ha=true}});if(!R.inline||ha){ca=0;return}}if((R.wrap_links!==false||da!="a")&&z(P,
da)&&z(ga,P)&&!($.nodeType===3&&$.nodeValue.length===1&&$.nodeValue.charCodeAt(0)===65279)){if(!ca){ca=T.cloneNode(ba);$.parentNode.insertBefore(ca,$);S.push(ca)}ca.appendChild($)}else{ca=0;x(k.grep($.childNodes),X);ca=0}}}var ca;x(N,X)});x(S,function(N){function X($){var da,ga;x($.childNodes,function(ha){if(ha.nodeType==1&&!t(ha)&&!q(ha)){da=ha;return ba}});if(da&&g(da,R)){ga=da.cloneNode(ba);W(ga);A.replace(ga,$,aa);A.remove(da,1)}return ga||$}var ca;ca=function($){var da=0;x($.childNodes,function(ga){!j(ga)&&
!t(ga)&&da++});return da}(N);if((S.length>1||!C(N))&&ca===0)A.remove(N,1);else if(R.inline||R.wrapper){if(!R.exact&&ca===1)N=X(N);x(Y,function($){x(A.select($.inline,N),function(da){n($,G,da,$.exact?da:null)})});if(b(N.parentNode,E,G)){A.remove(N,1);N=0;return aa}R.merge_with_parents&&A.getParent(N.parentNode,function($){if(b($,E,G)){A.remove(N,1);N=0;return aa}});if(N){N=v(u(N),N);N=v(N,u(N,aa))}}})}var Y=m(E),R=Y[0],U;if(R)if(I){U=A.createRng();U.setStartBefore(I);U.setEndAfter(I);M(p(U,Y))}else if(!O.isCollapsed()||
!R.inline){I=O.getBookmark();M(p(O.getRng(aa),Y));O.moveToBookmark(I);O.setRng(L(O.getRng(aa)));o.nodeChanged()}else F("apply",E,G)}function e(E,G,I){function L(T){var N=T.startContainer,X=T.startOffset,ca;if(N.nodeType==3&&X>=N.nodeValue.length-1){N=N.parentNode;X=H(N)+1}if(N.nodeType==1){ca=N.childNodes;N=ca[Math.min(X,ca.length-1)];N=new J(N);X>ca.length-1&&N.next();for(X=N.current();X;X=N.next())if(X.nodeType==3&&!j(X)){N=A.create("a",null,V);X.parentNode.insertBefore(N,X);T.setStart(X,0);O.setRng(T);
A.remove(N);break}}}function W(T){var N,X,ca;N=k.grep(T.childNodes);X=0;for(ca=Q.length;X<ca;X++)if(n(Q[X],G,T,T))break;if(S.deep){X=0;for(ca=N.length;X<ca;X++)W(N[X])}}function M(T){var N;x(A.getParents(T.parentNode,void 0,A.getRoot()).reverse(),function(X){var ca;if(!N&&X.id!="_start"&&X.id!="_end")if((ca=b(X,E,G))&&ca.split!==false)N=X});return N}function Y(T,N,X,ca){var $,da,ga,ha,ia,ja;if(T){ja=T.parentNode;for($=N.parentNode;$&&$!=ja;$=$.parentNode){da=$.cloneNode(ba);for(ia=0;ia<Q.length;ia++)if(n(Q[ia],
G,da,da)){da=0;break}if(da){ga&&da.appendChild(ga);ha||(ha=da);ga=da}}if(ca&&(!S.mixed||!C(T)))N=A.split(T,N);if(ga){X.parentNode.insertBefore(ga,X);ha.appendChild(X)}}return N}function R(T){var N=A.get(T?"_start":"_end"),X=N[T?"firstChild":"lastChild"];if(t(X))X=X[T?"firstChild":"lastChild"];A.remove(N,true);return X}function U(T){var N,X;T=p(T,Q,aa);if(S.split){N=D(T,aa);X=D(T);if(N!=X){N=r(N,"span",{id:"_start","data-mce-type":"bookmark"});X=r(X,"span",{id:"_end","data-mce-type":"bookmark"});Y(M(N),
N,N,true);Y(M(X),X,X,true);N=R(aa);X=R()}else N=X=Y(M(N),N,N,true);T.startContainer=N.parentNode;T.startOffset=H(N);T.endContainer=X.parentNode;T.endOffset=H(X)+1}B.walk(T,function(ca){x(ca,function($){W($)})})}var Q=m(E),S=Q[0],P;if(I){P=A.createRng();P.setStartBefore(I);P.setEndAfter(I);U(P)}else if(!O.isCollapsed()||!S.inline){I=O.getBookmark();U(O.getRng(aa));O.moveToBookmark(I);d(E,G,O.getStart())&&L(O.getRng(true));o.nodeChanged()}else F("remove",E,G)}function b(E,G,I,L){function W(R,U,Q){var S,
P,T=U[Q];if(T)if(T.length===fa)for(S in T){if(T.hasOwnProperty(S)){P=Q==="attributes"?A.getAttrib(R,S):l(R,S);if(L&&!P&&!U.exact)return;if((!L||U.exact)&&!f(P,c(T[S],I)))return}}else for(S=0;S<T.length;S++)if(Q==="attributes"?A.getAttrib(R,T[S]):l(R,T[S]))break;return U}var M=m(G),Y;if(M&&E)for(Y=0;Y<M.length;Y++){G=M[Y];if(g(E,G)&&W(E,G,"attributes")&&W(E,G,"styles")){if(M=G.classes)for(Y=0;Y<M.length;Y++)if(!A.hasClass(E,M[Y]))return;return G}}}function d(E,G,I){function L(M){M=A.getParent(M,function(Y){return!!b(Y,
E,G,true)});return b(M,E,G)}var W;if(I)return L(I);if(O.isCollapsed()){for(I=ea.apply.length-1;I>=0;I--)if(ea.apply[I].name==E)return true;for(I=ea.remove.length-1;I>=0;I--)if(ea.remove[I].name==E)return false;return L(O.getNode())}I=O.getNode();if(L(I))return aa;W=O.getStart();if(W!=I)if(L(W))return aa;return ba}function g(E,G){if(f(E,G.inline))return aa;if(f(E,G.block))return aa;if(G.selector)return A.is(E,G.selector)}function f(E,G){E=E||"";G=G||"";E=""+(E.nodeName||E);G=""+(G.nodeName||G);return E.toLowerCase()==
G.toLowerCase()}function l(E,G){var I=A.getStyle(E,G);if(G=="color"||G=="backgroundColor")I=A.toHex(I);if(G=="fontWeight"&&I==700)I="bold";return""+I}function c(E,G){if(typeof E!="string")E=E(G);else if(G)E=E.replace(/%(\w+)/g,function(I,L){return G[L]||I});return E}function j(E){return E&&E.nodeType===3&&/^([\s\r\n]+|)$/.test(E.nodeValue)}function r(E,G,I){G=A.create(G,I);E.parentNode.insertBefore(G,E);G.appendChild(E);return G}function p(E,G){function I(Q,S,P,T){var N;for(T=T||A.getRoot();;){N=
Q.parentNode;if(N==T||!G[0].block_expand&&C(N))break;for(R=N[S];R&&R!=Q;R=R[P]){if(R.nodeType==1&&!t(R))return Q;if(R.nodeType==3&&!j(R))return Q}Q=Q.parentNode}return Q}var L=E.startContainer,W=E.startOffset,M=E.endContainer,Y=E.endOffset,R,U;if(L.nodeType==1&&L.hasChildNodes()){U=L.childNodes.length-1;L=L.childNodes[W>U?U:W];if(L.nodeType==3)W=0}if(M.nodeType==1&&M.hasChildNodes()){U=M.childNodes.length-1;M=M.childNodes[Y>U?U:Y-1];if(M.nodeType==3)Y=M.nodeValue.length}if(t(L.parentNode))L=L.parentNode;
if(t(L))L=L.nextSibling||L;if(t(M.parentNode))M=M.parentNode;if(t(M))M=M.previousSibling||M;if(G[0].inline||G[0].block_expand){L=I(L,"firstChild","nextSibling");M=I(M,"lastChild","previousSibling")}if(G[0].selector&&G[0].expand!==ba&&!G[0].inline){U=function(Q,S){var P,T,N;if(Q.nodeType==3&&Q.nodeValue.length==0&&Q[S])Q=Q[S];P=A.getParents(Q,void 0,A.getRoot());for(T=0;T<P.length;T++)for(N=0;N<G.length;N++)if(A.is(P[T],G[N].selector))return P[T];return Q};L=U(L,"previousSibling");M=U(M,"nextSibling")}if(G[0].block||
G[0].selector){U=function(Q,S){var P;G[0].wrapper||(P=A.getParent(Q,G[0].block));P||(P=A.getParent(Q.nodeType==3?Q.parentNode:Q,C));if(P&&G[0].wrapper)P=A.getParents(P,"ul,ol",A.getRoot()).reverse()[0]||P;if(!P)for(P=Q;P[S]&&!C(P[S]);){P=P[S];if(f(P,"br"))break}return P||Q};L=U(L,"previousSibling");M=U(M,"nextSibling");if(G[0].block){C(L)||(L=I(L,"firstChild","nextSibling"));C(M)||(M=I(M,"lastChild","previousSibling"))}}if(L.nodeType==1){W=H(L);L=L.parentNode}if(M.nodeType==1){Y=H(M)+1;M=M.parentNode}return{startContainer:L,
startOffset:W,endContainer:M,endOffset:Y}}function n(E,G,I,L){var W,M,Y;if(!g(I,E))return ba;if(E.remove!="all"){x(E.styles,function(R,U){R=c(R,G);if(typeof U==="number"){U=R;L=0}if(!L||f(l(L,U),R))A.setStyle(I,U,"");Y=1});if(Y&&A.getAttrib(I,"style")==""){I.removeAttribute("style");I.removeAttribute("data-mce-style")}x(E.attributes,function(R,U){var Q;R=c(R,G);if(typeof U==="number"){U=R;L=0}if(!L||f(A.getAttrib(L,U),R)){if(U=="class")if(R=A.getAttrib(I,U)){Q="";x(R.split(/\s+/),function(S){if(/mce\w+/.test(S))Q+=
(Q?" ":"")+S});if(Q){A.setAttrib(I,U,Q);return}}U=="class"&&I.removeAttribute("className");Z.test(U)&&I.removeAttribute("data-mce-"+U);I.removeAttribute(U)}});x(E.classes,function(R){R=c(R,G);if(!L||A.hasClass(L,R))A.removeClass(I,R)});M=A.getAttribs(I);for(W=0;W<M.length;W++)if(M[W].nodeName.indexOf("_")!==0)return ba}if(E.remove!="none"){s(I,E);return aa}}function s(E,G){var I=E.parentNode,L;if(G.block)if(K){if(I==A.getRoot())if(!G.list_block||!f(E,G.list_block))x(k.grep(E.childNodes),function(M){if(z(K,
M.nodeName.toLowerCase()))if(L)L.appendChild(M);else L=r(M,K);else L=0})}else{var W=function(M,Y,R){M=u(M,Y,R);return!M||M.nodeName=="BR"||C(M)};if(C(E)&&!C(I)){!W(E,ba)&&!W(E.firstChild,aa,1)&&E.insertBefore(A.create("br"),E.firstChild);!W(E,aa)&&!W(E.lastChild,ba,1)&&E.appendChild(A.create("br"))}}G.selector&&G.inline&&!f(G.inline,E)||A.remove(E,1)}function u(E,G,I){if(E){G=G?"nextSibling":"previousSibling";for(E=I?E:E[G];E;E=E[G])if(E.nodeType==1||!j(E))return E}}function t(E){return E&&E.nodeType==
1&&E.getAttribute("data-mce-type")=="bookmark"}function v(E,G){function I(M,Y){function R(Q){var S={};x(A.getAttribs(Q),function(P){P=P.nodeName.toLowerCase();if(P.indexOf("_")!==0&&P!=="style")S[P]=A.getAttrib(Q,P)});return S}function U(Q,S){var P,T;for(T in Q)if(Q.hasOwnProperty(T)){P=S[T];if(P===fa)return ba;if(Q[T]!=P)return ba;delete S[T]}for(T in S)if(S.hasOwnProperty(T))return ba;return aa}if(M.nodeName!=Y.nodeName)return ba;if(!U(R(M),R(Y)))return ba;if(!U(A.parseStyle(A.getAttrib(M,"style")),
A.parseStyle(A.getAttrib(Y,"style"))))return ba;return aa}var L,W;if(E&&G){W=function(M,Y){for(L=M;L;L=L[Y]){if(L.nodeType==3&&!j(L))break;if(L.nodeType==1&&!t(L))return L}return M};E=W(E,"previousSibling");G=W(G,"nextSibling");if(I(E,G)){for(L=E.nextSibling;L&&L!=G;){W=L;L=L.nextSibling;E.appendChild(W)}A.remove(G);x(k.grep(G.childNodes),function(M){E.appendChild(M)});return E}}return G}function D(E,G){var I,L,W;I=E[G?"startContainer":"endContainer"];L=E[G?"startOffset":"endOffset"];if(I.nodeType==
1){W=I.childNodes.length-1;!G&&L&&L--;I=I.childNodes[L>W?W:L]}return I}function F(E,G,I){function L(){return ea.apply.length||ea.remove.length}function W(R){x(ea.apply.reverse(),function(U){a(U.name,U.vars,R)});x(ea.remove.reverse(),function(U){e(U.name,U.vars,R)});A.remove(R,1);ea.apply=[];ea.remove=[]}var M=ea[E],Y=ea[E=="apply"?"remove":"apply"];for(E=M.length-1;E>=0;E--)if(M[E].name==G)return;M.push({name:G,vars:I});for(E=Y.length-1;E>=0;E--)Y[E].name==G&&Y.splice(E,1);if(L()){o.getDoc().execCommand("FontName",
false,"mceinline");ea.lastRng=O.getRng();x(A.select("font,span"),function(R){var U;if(q(R)){U=O.getBookmark();W(R);O.moveToBookmark(U);o.nodeChanged()}});if(!ea.isListening&&L()){ea.isListening=true;x("onKeyDown,onKeyUp,onKeyPress,onMouseUp".split(","),function(R){o[R].addToTop(function(U,Q){if(L()&&!k.dom.RangeUtils.compareRanges(ea.lastRng,O.getRng())){x(A.select("font,span"),function(S){var P;if(q(S))if(P=S.firstChild){W(S);S=A.createRng();S.setStart(P,P.nodeValue.length);S.setEnd(P,P.nodeValue.length);
O.setRng(S);U.nodeChanged()}else A.remove(S)});if(Q.type=="keyup"||Q.type=="mouseup"){ea.apply=[];ea.remove=[]}}})})}}}var y={},x=k.each,A=o.dom,O=o.selection,J=k.dom.TreeWalker,B=new k.dom.RangeUtils(A),z=o.schema.isValidChild,C=A.isBlock,K=o.settings.forced_root_block,H=A.nodeIndex,V="\ufeff",Z=/^(src|href|style)$/,ba=false,aa=true,fa,ea={apply:[],remove:[]};k.extend(this,{get:m,register:h,apply:a,remove:e,toggle:function(E,G,I){d(E,G,I)?e(E,G,I):a(E,G,I)},match:d,matchAll:function(E,G){var I,L=
[],W={},M,Y;if(O.isCollapsed()){for(M=0;M<E.length;M++)for(I=ea.remove.length-1;I>=0;I--){Y=E[M];if(ea.remove[I].name==Y){W[Y]=true;break}}for(I=ea.apply.length-1;I>=0;I--)for(M=0;M<E.length;M++){Y=E[M];if(!W[Y]&&ea.apply[I].name==Y){W[Y]=true;L.push(Y)}}}I=O.getStart();A.getParent(I,function(R){var U,Q;for(U=0;U<E.length;U++){Q=E[U];if(!W[Q]&&b(R,Q,G)){W[Q]=true;L.push(Q)}}});return L},matchNode:b,canApply:function(E){E=m(E);var G,I,L,W;if(E){G=O.getStart();G=A.getParents(G,void 0,A.getRoot());for(L=
E.length-1;L>=0;L--){W=E[L].selector;if(!W)return aa;for(I=G.length-1;I>=0;I--)if(A.is(G[I],W))return aa}}return ba}})}})(tinymce);
tinymce.onAddEditor.add(function(k,o){var q,m,h,a=o.settings;if(a.inline_styles){m=k.explode(a.font_size_style_values);var e=function(d,g){k.each(g,function(f,l){f&&h.setStyle(d,l,f)});h.rename(d,"span")};q={font:function(d,g){e(g,{backgroundColor:g.style.backgroundColor,color:g.color,fontFamily:g.face,fontSize:m[parseInt(g.size)-1]})},u:function(d,g){e(g,{textDecoration:"underline"})},strike:function(d,g){e(g,{textDecoration:"line-through"})}};var b=function(d,g){h=d.dom;a.convert_fonts_to_spans&&
k.each(h.select("font,u,strike",g.node),function(f){q[f.nodeName.toLowerCase()](o.dom,f)})};o.onPreProcess.add(b);o.onInit.add(function(){o.selection.onSetContent.add(b)})}});
